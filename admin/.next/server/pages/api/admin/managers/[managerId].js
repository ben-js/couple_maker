"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/admin/managers/[managerId]";
exports.ids = ["pages/api/admin/managers/[managerId]"];
exports.modules = {

/***/ "@aws-sdk/client-dynamodb":
/*!*******************************************!*\
  !*** external "@aws-sdk/client-dynamodb" ***!
  \*******************************************/
/***/ ((module) => {

module.exports = require("@aws-sdk/client-dynamodb");

/***/ }),

/***/ "@aws-sdk/lib-dynamodb":
/*!****************************************!*\
  !*** external "@aws-sdk/lib-dynamodb" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("@aws-sdk/lib-dynamodb");

/***/ }),

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Fmanagers%2F%5BmanagerId%5D&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cadmin%5Cmanagers%5C%5BmanagerId%5D.ts&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Fmanagers%2F%5BmanagerId%5D&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cadmin%5Cmanagers%5C%5BmanagerId%5D.ts&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_admin_managers_managerId_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src\\pages\\api\\admin\\managers\\[managerId].ts */ \"(api)/./src/pages/api/admin/managers/[managerId].ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_admin_managers_managerId_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_admin_managers_managerId_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/admin/managers/[managerId]\",\n        pathname: \"/api/admin/managers/[managerId]\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_admin_managers_managerId_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmFkbWluJTJGbWFuYWdlcnMlMkYlNUJtYW5hZ2VySWQlNUQmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZzcmMlNUNwYWdlcyU1Q2FwaSU1Q2FkbWluJTVDbWFuYWdlcnMlNUMlNUJtYW5hZ2VySWQlNUQudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDK0U7QUFDL0U7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLHVFQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyx1RUFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRlLXNlbnNlLWFkbWluLz81MjZmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9zcmNcXFxccGFnZXNcXFxcYXBpXFxcXGFkbWluXFxcXG1hbmFnZXJzXFxcXFttYW5hZ2VySWRdLnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYWRtaW4vbWFuYWdlcnMvW21hbmFnZXJJZF1cIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hZG1pbi9tYW5hZ2Vycy9bbWFuYWdlcklkXVwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Fmanagers%2F%5BmanagerId%5D&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cadmin%5Cmanagers%5C%5BmanagerId%5D.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/config/aws.ts":
/*!***************************!*\
  !*** ./src/config/aws.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   awsConfig: () => (/* binding */ awsConfig)\n/* harmony export */ });\n/**\n * AWS 공통 설정\n * @module config/aws\n * @description Admin에서 모든 AWS 서비스에서 공통으로 사용하는 설정\n */ const awsConfig = {\n    accessKeyId: process.env.AWS_ACCESS_KEY_ID,\n    secretAccessKey: process.env.AWS_SECRET_ACCESS_KEY,\n    region: process.env.AWS_REGION\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvY29uZmlnL2F3cy50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7Ozs7Q0FJQyxHQUNNLE1BQU1BLFlBQVk7SUFDdkJDLGFBQWFDLFFBQVFDLEdBQUcsQ0FBQ0MsaUJBQWlCO0lBQzFDQyxpQkFBaUJILFFBQVFDLEdBQUcsQ0FBQ0cscUJBQXFCO0lBQ2xEQyxRQUFRTCxRQUFRQyxHQUFHLENBQUNLLFVBQVU7QUFDaEMsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGUtc2Vuc2UtYWRtaW4vLi9zcmMvY29uZmlnL2F3cy50cz81ZTQzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQVdTIOqzte2GtSDshKTsoJVcbiAqIEBtb2R1bGUgY29uZmlnL2F3c1xuICogQGRlc2NyaXB0aW9uIEFkbWlu7JeQ7IScIOuqqOuToCBBV1Mg7ISc67mE7Iqk7JeQ7IScIOqzte2GteycvOuhnCDsgqzsmqntlZjripQg7ISk7KCVXG4gKi9cbmV4cG9ydCBjb25zdCBhd3NDb25maWcgPSB7XG4gIGFjY2Vzc0tleUlkOiBwcm9jZXNzLmVudi5BV1NfQUNDRVNTX0tFWV9JRCxcbiAgc2VjcmV0QWNjZXNzS2V5OiBwcm9jZXNzLmVudi5BV1NfU0VDUkVUX0FDQ0VTU19LRVksXG4gIHJlZ2lvbjogcHJvY2Vzcy5lbnYuQVdTX1JFR0lPTixcbn07ICJdLCJuYW1lcyI6WyJhd3NDb25maWciLCJhY2Nlc3NLZXlJZCIsInByb2Nlc3MiLCJlbnYiLCJBV1NfQUNDRVNTX0tFWV9JRCIsInNlY3JldEFjY2Vzc0tleSIsIkFXU19TRUNSRVRfQUNDRVNTX0tFWSIsInJlZ2lvbiIsIkFXU19SRUdJT04iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/config/aws.ts\n");

/***/ }),

/***/ "(api)/./src/lib/dataService.ts":
/*!********************************!*\
  !*** ./src/lib/dataService.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   deleteAllScoreHistory: () => (/* binding */ deleteAllScoreHistory),\n/* harmony export */   dynamodb: () => (/* binding */ dynamodb),\n/* harmony export */   getUserScore: () => (/* binding */ getUserScore),\n/* harmony export */   getUserScoreHistory: () => (/* binding */ getUserScoreHistory),\n/* harmony export */   saveUserScore: () => (/* binding */ saveUserScore)\n/* harmony export */ });\n/* harmony import */ var _aws_sdk_client_dynamodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-sdk/client-dynamodb */ \"@aws-sdk/client-dynamodb\");\n/* harmony import */ var _aws_sdk_client_dynamodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_aws_sdk_client_dynamodb__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-sdk/lib-dynamodb */ \"@aws-sdk/lib-dynamodb\");\n/* harmony import */ var _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _config_aws__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config/aws */ \"(api)/./src/config/aws.ts\");\n\n\n\n// AWS 설정\nconst client = new _aws_sdk_client_dynamodb__WEBPACK_IMPORTED_MODULE_0__.DynamoDBClient(_config_aws__WEBPACK_IMPORTED_MODULE_2__.awsConfig);\nconst dynamodb = _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.DynamoDBDocumentClient.from(client);\n// DynamoDB 클라이언트를 export하여 다른 모듈에서 사용할 수 있도록 함\n\nclass DataService {\n    // 매니저 계정 관련 메서드\n    async getManagerByEmail(email) {\n        const params = {\n            TableName: \"Managers\",\n            IndexName: \"EmailIndex\",\n            KeyConditionExpression: \"email = :email\",\n            ExpressionAttributeValues: {\n                \":email\": email\n            }\n        };\n        try {\n            const result = await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.QueryCommand(params));\n            return result.Items?.[0] || null;\n        } catch (error) {\n            throw error;\n        }\n    }\n    async getManagerById(managerId) {\n        const params = {\n            TableName: \"Managers\",\n            Key: {\n                id: managerId\n            }\n        };\n        try {\n            const result = await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.GetCommand(params));\n            return result.Item || null;\n        } catch (error) {\n            throw error;\n        }\n    }\n    // 일반 사용자 관련 메서드 (기존 Users 테이블 사용)\n    async getUsers() {\n        const params = {\n            TableName: \"Users\"\n        };\n        try {\n            const result = await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.ScanCommand(params));\n            return result.Items || [];\n        } catch (error) {\n            throw error;\n        }\n    }\n    async getUserById(userId) {\n        const params = {\n            TableName: \"Users\",\n            Key: {\n                user_id: userId\n            }\n        };\n        try {\n            const result = await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.GetCommand(params));\n            return result.Item || null;\n        } catch (error) {\n            throw error;\n        }\n    }\n    async getProfile(userId) {\n        const params = {\n            TableName: \"Profiles\",\n            Key: {\n                user_id: userId\n            }\n        };\n        try {\n            const result = await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.GetCommand(params));\n            return result.Item || null;\n        } catch (error) {\n            // 프로필이 없어도 오류로 처리하지 않음\n            return null;\n        }\n    }\n    async getPreferences(userId) {\n        const params = {\n            TableName: \"Preferences\",\n            Key: {\n                user_id: userId\n            }\n        };\n        try {\n            const result = await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.GetCommand(params));\n            return result.Item || null;\n        } catch (error) {\n            // 선호도가 없어도 오류로 처리하지 않음\n            return null;\n        }\n    }\n    async updateUserStatus(userId, status, reason) {\n        const params = {\n            TableName: \"Users\",\n            Key: {\n                user_id: userId\n            },\n            UpdateExpression: \"SET #status = :status, updated_at = :updatedAt\",\n            ExpressionAttributeNames: {\n                \"#status\": \"status\"\n            },\n            ExpressionAttributeValues: {\n                \":status\": status,\n                \":updatedAt\": new Date().toISOString()\n            },\n            ReturnValues: \"ALL_NEW\"\n        };\n        if (reason) {\n            params.UpdateExpression += \", delete_reason = :reason\";\n            params.ExpressionAttributeValues[\":reason\"] = reason;\n        }\n        try {\n            const result = await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.UpdateCommand(params));\n            return result.Attributes || null;\n        } catch (error) {\n            throw error;\n        }\n    }\n    async updateUserGrade(userId, grade) {\n        const params = {\n            TableName: \"Users\",\n            Key: {\n                user_id: userId\n            },\n            UpdateExpression: \"SET grade = :grade, updated_at = :updatedAt\",\n            ExpressionAttributeValues: {\n                \":grade\": grade,\n                \":updatedAt\": new Date().toISOString()\n            },\n            ReturnValues: \"ALL_NEW\"\n        };\n        try {\n            const result = await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.UpdateCommand(params));\n            return result.Attributes || null;\n        } catch (error) {\n            throw error;\n        }\n    }\n    // 매칭 관련 메서드\n    async getMatchingRequests(status) {\n        const params = {\n            TableName: \"MatchingRequests\"\n        };\n        if (status) {\n            params.FilterExpression = \"#status = :status\";\n            params.ExpressionAttributeNames = {\n                \"#status\": \"status\"\n            };\n            params.ExpressionAttributeValues = {\n                \":status\": status\n            };\n        }\n        try {\n            const result = await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.ScanCommand(params));\n            return result.Items || [];\n        } catch (error) {\n            throw error;\n        }\n    }\n    async getProposals(status) {\n        const params = {\n            TableName: \"Proposals\"\n        };\n        if (status) {\n            params.FilterExpression = \"#status = :status\";\n            params.ExpressionAttributeNames = {\n                \"#status\": \"status\"\n            };\n            params.ExpressionAttributeValues = {\n                \":status\": status\n            };\n        }\n        try {\n            const result = await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.ScanCommand(params));\n            return result.Items || [];\n        } catch (error) {\n            throw error;\n        }\n    }\n    async getMatchPairs() {\n        const params = {\n            TableName: \"MatchPairs\"\n        };\n        try {\n            const result = await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.ScanCommand(params));\n            return result.Items || [];\n        } catch (error) {\n            throw error;\n        }\n    }\n    async getMatchingHistory() {\n        const params = {\n            TableName: \"MatchingHistory\"\n        };\n        try {\n            const result = await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.ScanCommand(params));\n            return result.Items || [];\n        } catch (error) {\n            throw error;\n        }\n    }\n    async getReviews() {\n        const params = {\n            TableName: \"Reviews\"\n        };\n        try {\n            const result = await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.ScanCommand(params));\n            return result.Items || [];\n        } catch (error) {\n            throw error;\n        }\n    }\n    // 포인트 관련 메서드\n    async getPointHistory(userId) {\n        const params = {\n            TableName: \"PointHistory\"\n        };\n        if (userId) {\n            params.KeyConditionExpression = \"user_id = :userId\";\n            params.ExpressionAttributeValues = {\n                \":userId\": userId\n            };\n            params.ScanIndexForward = false; // 최신순\n        }\n        try {\n            const result = userId ? await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.QueryCommand(params)) : await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.ScanCommand(params));\n            return result.Items || [];\n        } catch (error) {\n            throw error;\n        }\n    }\n    // 사용자 상태 이력 관련 메서드\n    async getUserStatusHistory(userId) {\n        const params = {\n            TableName: \"UserStatusHistory\"\n        };\n        if (userId) {\n            params.KeyConditionExpression = \"user_id = :userId\";\n            params.ExpressionAttributeValues = {\n                \":userId\": userId\n            };\n            params.ScanIndexForward = false; // 최신순\n        }\n        try {\n            const result = userId ? await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.QueryCommand(params)) : await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.ScanCommand(params));\n            return result.Items || [];\n        } catch (error) {\n            throw error;\n        }\n    }\n    // 매니저 로그 관련 메서드\n    async logManagerAction(managerId, actionType, targetId, details) {\n        const params = {\n            TableName: \"ManagerLogs\",\n            Item: {\n                id: `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n                timestamp: new Date().toISOString(),\n                managerId: managerId,\n                action: actionType,\n                targetId: targetId,\n                details: details\n            }\n        };\n        try {\n            await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.PutCommand(params));\n        } catch (error) {\n            throw error;\n        }\n    }\n    async getManagerLogs(limit = 50, managerId, action) {\n        const params = {\n            TableName: \"ManagerLogs\",\n            Limit: limit\n        };\n        if (managerId || action) {\n            params.FilterExpression = [];\n            params.ExpressionAttributeValues = {};\n            if (managerId) {\n                params.FilterExpression.push(\"managerId = :managerId\");\n                params.ExpressionAttributeValues[\":managerId\"] = managerId;\n            }\n            if (action) {\n                params.FilterExpression.push(\"action = :action\");\n                params.ExpressionAttributeValues[\":action\"] = action;\n            }\n            params.FilterExpression = params.FilterExpression.join(\" AND \");\n        }\n        try {\n            const result = await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.ScanCommand(params));\n            const logs = result.Items || [];\n            // 실제 테이블 스키마에 맞게 변환\n            const convertedLogs = logs.map((log)=>({\n                    id: log.id,\n                    manager_id: log.managerId,\n                    action_type: log.action,\n                    target_id: log.targetId,\n                    details: log.details,\n                    created_at: log.timestamp\n                }));\n            return convertedLogs.sort((a, b)=>new Date(b.created_at).getTime() - new Date(a.created_at).getTime());\n        } catch (error) {\n            throw error;\n        }\n    }\n    // 유틸리티 메서드\n    getTargetType(targetId) {\n        if (targetId.startsWith(\"user_\")) return \"user\";\n        if (targetId.startsWith(\"match_\")) return \"match\";\n        return \"unknown\";\n    }\n    // 대시보드 통계 메서드\n    async getDashboardStats() {\n        try {\n            const [users, matches, points] = await Promise.all([\n                this.getUsers(),\n                this.getMatchingHistory(),\n                this.getPointHistory()\n            ]);\n            const totalUsers = users.length;\n            const activeUsers = users.filter((user)=>user.status === \"active\" || user.status === \"green\").length;\n            const totalMatches = matches.length;\n            const totalPoints = points.reduce((sum, point)=>sum + point.amount, 0);\n            const totalRevenue = points.filter((point)=>point.type === \"charge\" || point.amount > 0).reduce((sum, point)=>sum + Math.abs(point.amount), 0);\n            return {\n                totalUsers,\n                activeUsers,\n                totalMatches,\n                totalPoints,\n                totalRevenue\n            };\n        } catch (error) {\n            throw error;\n        }\n    }\n    // 최근 활동 메서드\n    async getRecentActivities(limit = 10) {\n        try {\n            const [users, matches, points] = await Promise.all([\n                this.getUsers(),\n                this.getMatchingHistory(),\n                this.getPointHistory()\n            ]);\n            const activities = [];\n            // 최근 가입한 사용자들\n            const recentUsers = users.sort((a, b)=>new Date(b.created_at).getTime() - new Date(a.created_at).getTime()).slice(0, 3);\n            recentUsers.forEach((user)=>{\n                activities.push({\n                    id: user.user_id,\n                    type: \"user_signup\",\n                    description: `새로운 사용자가 가입했습니다: ${user.email}`,\n                    timestamp: user.created_at,\n                    user: user.email\n                });\n            });\n            // 최근 매칭 활동\n            const recentMatches = matches.sort((a, b)=>new Date(b.created_at).getTime() - new Date(a.created_at).getTime()).slice(0, 3);\n            recentMatches.forEach((match)=>{\n                activities.push({\n                    id: match.id,\n                    type: \"matching\",\n                    description: `새로운 매칭이 생성되었습니다: ${match.user1_id} ↔ ${match.user2_id}`,\n                    timestamp: match.created_at,\n                    user: `${match.user1_id}, ${match.user2_id}`\n                });\n            });\n            // 최근 포인트 거래\n            const recentPoints = points.sort((a, b)=>new Date(b.created_at).getTime() - new Date(a.created_at).getTime()).slice(0, 3);\n            recentPoints.forEach((point)=>{\n                activities.push({\n                    id: point.id,\n                    type: \"point_transaction\",\n                    description: `포인트 거래: ${point.amount > 0 ? \"+\" : \"\"}${point.amount}P (${point.type})`,\n                    timestamp: point.created_at,\n                    user: point.user_id\n                });\n            });\n            // 모든 활동을 시간순으로 정렬하고 최근 limit개만 반환\n            return activities.sort((a, b)=>new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime()).slice(0, limit);\n        } catch (error) {\n            throw error;\n        }\n    }\n    // users + scores + profiles 병합 반환\n    async getUsersWithScoreAndProfile() {\n        const users = await this.getUsers();\n        // Scores, Profiles 모두 Scan\n        const scoresResult = await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.ScanCommand({\n            TableName: \"Scores\"\n        }));\n        const profilesResult = await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.ScanCommand({\n            TableName: \"Profiles\"\n        }));\n        const scores = scoresResult.Items || [];\n        const profiles = profilesResult.Items || [];\n        // 병합\n        return users.map((user)=>({\n                ...user,\n                score: scores.find((s)=>s.user_id === user.user_id) || null,\n                profile: profiles.find((p)=>p.user_id === user.user_id) || null\n            }));\n    }\n    // 여러 user_id로 Users + Profiles 정보 한 번에 조회\n    async getUsersWithProfilesByIds(userIds) {\n        if (!userIds.length) return [];\n        // DynamoDB batchGet은 100개까지 지원\n        const batches = [];\n        for(let i = 0; i < userIds.length; i += 100){\n            batches.push(userIds.slice(i, i + 100));\n        }\n        const results = [];\n        for (const batch of batches){\n            const params = {\n                RequestItems: {\n                    Users: {\n                        Keys: batch.map((id)=>({\n                                user_id: id\n                            }))\n                    },\n                    Profiles: {\n                        Keys: batch.map((id)=>({\n                                user_id: id\n                            }))\n                    }\n                }\n            };\n            const res = await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.BatchGetCommand(params));\n            const users = res.Responses?.Users || [];\n            const profiles = res.Responses?.Profiles || [];\n            const profileMap = Object.fromEntries(profiles.map((p)=>[\n                    p.user_id,\n                    p\n                ]));\n            // 각 유저별로 preferences도 가져와서 병합\n            for (const u of users){\n                let preferences = null;\n                try {\n                    preferences = await this.getPreferences(u.user_id);\n                } catch (e) {\n                    preferences = null;\n                }\n                results.push({\n                    ...u,\n                    profile: profileMap[u.user_id],\n                    preferences\n                });\n            }\n        }\n        return results;\n    }\n}\nconst dataService = new DataService();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (dataService);\n// Scores 테이블 연동 함수\nasync function saveUserScore(userId, score, scorer, summary = \"\") {\n    const now = new Date().toISOString();\n    // 기존 점수 row 모두 삭제 (user_id로 Query)\n    const existing = await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.QueryCommand({\n        TableName: \"Scores\",\n        KeyConditionExpression: \"user_id = :uid\",\n        ExpressionAttributeValues: {\n            \":uid\": userId\n        }\n    }));\n    for (const item of existing.Items || []){\n        await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.DeleteCommand({\n            TableName: \"Scores\",\n            Key: {\n                user_id: item.user_id,\n                created_at: item.created_at\n            }\n        }));\n    }\n    // Scores 테이블: user_id + created_at(=now)로 저장\n    const average = score.appearance * 0.25 + score.personality * 0.25 + score.job * 0.2 + score.education * 0.15 + score.economics * 0.15;\n    function getGrade(score) {\n        if (score >= 95) return \"S\";\n        if (score >= 85) return \"A\";\n        if (score >= 75) return \"B\";\n        if (score >= 65) return \"C\";\n        if (score >= 55) return \"D\";\n        if (score >= 45) return \"E\";\n        return \"F\";\n    }\n    const averageGrade = getGrade(average);\n    const item = {\n        user_id: userId,\n        created_at: now,\n        scorer,\n        ...score,\n        average,\n        grade: averageGrade,\n        updated_at: now\n    };\n    await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.PutCommand({\n        TableName: \"Scores\",\n        Item: item\n    }));\n    // Users 테이블에 has_score: true 업데이트\n    await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.UpdateCommand({\n        TableName: \"Users\",\n        Key: {\n            user_id: userId\n        },\n        UpdateExpression: \"SET has_score = :true, updated_at = :updatedAt\",\n        ExpressionAttributeValues: {\n            \":true\": true,\n            \":updatedAt\": now\n        }\n    }));\n    // 점수 저장 전 평균/등급 계산\n    // ScoreHistory 테이블에 이력 저장 (평탄화 구조)\n    await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.PutCommand({\n        TableName: \"ScoreHistory\",\n        Item: {\n            user_id: userId,\n            created_at: now,\n            face_score: score.faceScore,\n            appearance: score.appearance,\n            personality: score.personality,\n            job: score.job,\n            education: score.education,\n            economics: score.economics,\n            average,\n            averageGrade,\n            reason: summary,\n            manager_id: scorer\n        }\n    }));\n    // UserStatusHistory에는 점수 이력 저장하지 않음\n    return item;\n}\nasync function getUserScoreHistory(userId) {\n    const params = {\n        TableName: \"UserStatusHistory\",\n        KeyConditionExpression: \"user_id = :uid\",\n        ExpressionAttributeValues: {\n            \":uid\": userId\n        },\n        ScanIndexForward: false\n    };\n    const result = await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.QueryCommand(params));\n    // type이 'score'인 이력만 반환\n    return (result.Items || []).filter((item)=>item.type === \"score\");\n}\nasync function deleteAllScoreHistory(userId) {\n    // 해당 user_id의 모든 ScoreHistory row 삭제\n    const result = await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.QueryCommand({\n        TableName: \"ScoreHistory\",\n        KeyConditionExpression: \"user_id = :uid\",\n        ExpressionAttributeValues: {\n            \":uid\": userId\n        }\n    }));\n    for (const item of result.Items || []){\n        await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.DeleteCommand({\n            TableName: \"ScoreHistory\",\n            Key: {\n                user_id: item.user_id,\n                created_at: item.created_at\n            }\n        }));\n    }\n}\nasync function getUserScore(userId) {\n    const params = {\n        TableName: \"Scores\",\n        KeyConditionExpression: \"user_id = :uid\",\n        ExpressionAttributeValues: {\n            \":uid\": userId\n        },\n        ScanIndexForward: false,\n        Limit: 1\n    };\n    const result = await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.QueryCommand(params));\n    return result.Items?.[0] || null;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QjtRQUN4QkMsMkJBQTJCO1lBQUUsUUFBUVk7UUFBTztRQUM1Q3NCLGtCQUFrQjtJQUNwQjtJQUNBLE1BQU1qQyxTQUFTLE1BQU1WLFNBQVNXLElBQUksQ0FBQyxJQUFJckIsK0RBQVlBLENBQUNlO0lBQ3BELHdCQUF3QjtJQUN4QixPQUFPLENBQUNLLE9BQU9FLEtBQUssSUFBSSxFQUFFLEVBQUV3RSxNQUFNLENBQUN1RCxDQUFBQSxPQUFRQSxLQUFLOUMsSUFBSSxLQUFLO0FBQzNEO0FBRU8sZUFBZTJELHNCQUFzQm5JLE1BQWM7SUFDeEQscUNBQXFDO0lBQ3JDLE1BQU1YLFNBQVMsTUFBTVYsU0FBU1csSUFBSSxDQUFDLElBQUlyQiwrREFBWUEsQ0FBQztRQUNsRGdCLFdBQVc7UUFDWEUsd0JBQXdCO1FBQ3hCQywyQkFBMkI7WUFBRSxRQUFRWTtRQUFPO0lBQzlDO0lBQ0EsS0FBSyxNQUFNc0gsUUFBUWpJLE9BQU9FLEtBQUssSUFBSSxFQUFFLENBQUU7UUFDckMsTUFBTVosU0FBU1csSUFBSSxDQUFDLElBQUloQixnRUFBYUEsQ0FBQztZQUNwQ1csV0FBVztZQUNYVSxLQUFLO2dCQUFFTSxTQUFTcUgsS0FBS3JILE9BQU87Z0JBQUU4QyxZQUFZdUUsS0FBS3ZFLFVBQVU7WUFBQztRQUM1RDtJQUNGO0FBQ0Y7QUFFTyxlQUFlcUYsYUFBYXBJLE1BQWM7SUFDL0MsTUFBTWhCLFNBQVM7UUFDYkMsV0FBVztRQUNYRSx3QkFBd0I7UUFDeEJDLDJCQUEyQjtZQUFFLFFBQVFZO1FBQU87UUFDNUNzQixrQkFBa0I7UUFDbEJlLE9BQU87SUFDVDtJQUNBLE1BQU1oRCxTQUFTLE1BQU1WLFNBQVNXLElBQUksQ0FBQyxJQUFJckIsK0RBQVlBLENBQUNlO0lBQ3BELE9BQU9LLE9BQU9FLEtBQUssRUFBRSxDQUFDLEVBQUUsSUFBSTtBQUM5QiIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGUtc2Vuc2UtYWRtaW4vLi9zcmMvbGliL2RhdGFTZXJ2aWNlLnRzP2RkM2YiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRHluYW1vREJDbGllbnQgfSBmcm9tICdAYXdzLXNkay9jbGllbnQtZHluYW1vZGInO1xyXG5pbXBvcnQgeyBEeW5hbW9EQkRvY3VtZW50Q2xpZW50LCBRdWVyeUNvbW1hbmQsIEdldENvbW1hbmQsIFNjYW5Db21tYW5kLCBVcGRhdGVDb21tYW5kLCBQdXRDb21tYW5kLCBEZWxldGVDb21tYW5kLCBCYXRjaEdldENvbW1hbmQgfSBmcm9tICdAYXdzLXNkay9saWItZHluYW1vZGInO1xyXG5pbXBvcnQgeyBhd3NDb25maWcgYXMgQVdTX0NPTkZJRyB9IGZyb20gJy4uL2NvbmZpZy9hd3MnO1xyXG5pbXBvcnQge1xyXG4gIE1hbmFnZXIsXHJcbiAgVXNlcixcclxuICBNYXRjaGluZ1JlcXVlc3QsXHJcbiAgUHJvcG9zYWwsXHJcbiAgTWF0Y2hQYWlyLFxyXG4gIE1hdGNoaW5nSGlzdG9yeSxcclxuICBQb2ludEhpc3RvcnksXHJcbiAgVXNlclN0YXR1c0hpc3RvcnksXHJcbiAgUmV2aWV3LFxyXG4gIE1hbmFnZXJMb2csXHJcbiAgRGFzaGJvYXJkU3RhdHMsXHJcbiAgUmV2aWV3U3RhdHMsXHJcbn0gZnJvbSAnLi4vdHlwZXMnO1xyXG5pbXBvcnQgeyBTY29yZUlucHV0LCBTY29yZVJlc3VsdCB9IGZyb20gJy4uL3R5cGVzL3Njb3JlJztcclxuXHJcbi8vIEFXUyDshKTsoJVcclxuY29uc3QgY2xpZW50ID0gbmV3IER5bmFtb0RCQ2xpZW50KEFXU19DT05GSUcpO1xyXG5jb25zdCBkeW5hbW9kYiA9IER5bmFtb0RCRG9jdW1lbnRDbGllbnQuZnJvbShjbGllbnQpO1xyXG5cclxuLy8gRHluYW1vREIg7YG065287J207Ja47Yq466W8IGV4cG9ydO2VmOyXrCDri6Trpbgg66qo65OI7JeQ7IScIOyCrOyaqe2VoCDsiJgg7J6I64+E66GdIO2VqFxyXG5leHBvcnQgeyBkeW5hbW9kYiB9O1xyXG5cclxuY2xhc3MgRGF0YVNlcnZpY2Uge1xyXG4gIC8vIOunpOuLiOyggCDqs4TsoJUg6rSA66CoIOuplOyEnOuTnFxyXG4gIGFzeW5jIGdldE1hbmFnZXJCeUVtYWlsKGVtYWlsOiBzdHJpbmcpOiBQcm9taXNlPE1hbmFnZXIgfCBudWxsPiB7XHJcbiAgICBjb25zdCBwYXJhbXMgPSB7XHJcbiAgICAgIFRhYmxlTmFtZTogJ01hbmFnZXJzJyxcclxuICAgICAgSW5kZXhOYW1lOiAnRW1haWxJbmRleCcsXHJcbiAgICAgIEtleUNvbmRpdGlvbkV4cHJlc3Npb246ICdlbWFpbCA9IDplbWFpbCcsXHJcbiAgICAgIEV4cHJlc3Npb25BdHRyaWJ1dGVWYWx1ZXM6IHtcclxuICAgICAgICAnOmVtYWlsJzogZW1haWxcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZHluYW1vZGIuc2VuZChuZXcgUXVlcnlDb21tYW5kKHBhcmFtcykpO1xyXG4gICAgICByZXR1cm4gcmVzdWx0Lkl0ZW1zPy5bMF0gYXMgTWFuYWdlciB8fCBudWxsO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRNYW5hZ2VyQnlJZChtYW5hZ2VySWQ6IHN0cmluZyk6IFByb21pc2U8TWFuYWdlciB8IG51bGw+IHtcclxuICAgIGNvbnN0IHBhcmFtcyA9IHtcclxuICAgICAgVGFibGVOYW1lOiAnTWFuYWdlcnMnLFxyXG4gICAgICBLZXk6IHsgaWQ6IG1hbmFnZXJJZCB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkeW5hbW9kYi5zZW5kKG5ldyBHZXRDb21tYW5kKHBhcmFtcykpO1xyXG4gICAgICByZXR1cm4gcmVzdWx0Lkl0ZW0gYXMgTWFuYWdlciB8fCBudWxsO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyDsnbzrsJgg7IKs7Jqp7J6QIOq0gOugqCDrqZTshJzrk5wgKOq4sOyhtCBVc2VycyDthYzsnbTruJQg7IKs7JqpKVxyXG4gIGFzeW5jIGdldFVzZXJzKCk6IFByb21pc2U8VXNlcltdPiB7XHJcbiAgICBjb25zdCBwYXJhbXMgPSB7XHJcbiAgICAgIFRhYmxlTmFtZTogJ1VzZXJzJ1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZHluYW1vZGIuc2VuZChuZXcgU2NhbkNvbW1hbmQocGFyYW1zKSk7XHJcbiAgICAgIHJldHVybiByZXN1bHQuSXRlbXMgYXMgVXNlcltdIHx8IFtdO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRVc2VyQnlJZCh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8VXNlciB8IG51bGw+IHtcclxuICAgIFxyXG4gICAgY29uc3QgcGFyYW1zID0ge1xyXG4gICAgICBUYWJsZU5hbWU6ICdVc2VycycsXHJcbiAgICAgIEtleTogeyB1c2VyX2lkOiB1c2VySWQgfVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkeW5hbW9kYi5zZW5kKG5ldyBHZXRDb21tYW5kKHBhcmFtcykpO1xyXG4gICAgICBcclxuICAgICAgcmV0dXJuIHJlc3VsdC5JdGVtIGFzIFVzZXIgfHwgbnVsbDtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0UHJvZmlsZSh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8YW55IHwgbnVsbD4ge1xyXG4gICAgXHJcbiAgICBjb25zdCBwYXJhbXMgPSB7XHJcbiAgICAgIFRhYmxlTmFtZTogJ1Byb2ZpbGVzJyxcclxuICAgICAgS2V5OiB7IHVzZXJfaWQ6IHVzZXJJZCB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGR5bmFtb2RiLnNlbmQobmV3IEdldENvbW1hbmQocGFyYW1zKSk7XHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4gcmVzdWx0Lkl0ZW0gfHwgbnVsbDtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIC8vIO2UhOuhnO2VhOydtCDsl4bslrTrj4Qg7Jik66WY66GcIOyymOumrO2VmOyngCDslYrsnYxcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRQcmVmZXJlbmNlcyh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8YW55IHwgbnVsbD4ge1xyXG4gICAgXHJcbiAgICBjb25zdCBwYXJhbXMgPSB7XHJcbiAgICAgIFRhYmxlTmFtZTogJ1ByZWZlcmVuY2VzJyxcclxuICAgICAgS2V5OiB7IHVzZXJfaWQ6IHVzZXJJZCB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGR5bmFtb2RiLnNlbmQobmV3IEdldENvbW1hbmQocGFyYW1zKSk7XHJcbiAgICAgIFxyXG4gICAgICByZXR1cm4gcmVzdWx0Lkl0ZW0gfHwgbnVsbDtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIC8vIOyEoO2YuOuPhOqwgCDsl4bslrTrj4Qg7Jik66WY66GcIOyymOumrO2VmOyngCDslYrsnYxcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyB1cGRhdGVVc2VyU3RhdHVzKHVzZXJJZDogc3RyaW5nLCBzdGF0dXM6IHN0cmluZywgcmVhc29uPzogc3RyaW5nKTogUHJvbWlzZTxVc2VyIHwgbnVsbD4ge1xyXG4gICAgY29uc3QgcGFyYW1zOiBhbnkgPSB7XHJcbiAgICAgIFRhYmxlTmFtZTogJ1VzZXJzJyxcclxuICAgICAgS2V5OiB7IHVzZXJfaWQ6IHVzZXJJZCB9LFxyXG4gICAgICBVcGRhdGVFeHByZXNzaW9uOiAnU0VUICNzdGF0dXMgPSA6c3RhdHVzLCB1cGRhdGVkX2F0ID0gOnVwZGF0ZWRBdCcsXHJcbiAgICAgIEV4cHJlc3Npb25BdHRyaWJ1dGVOYW1lczoge1xyXG4gICAgICAgICcjc3RhdHVzJzogJ3N0YXR1cydcclxuICAgICAgfSxcclxuICAgICAgRXhwcmVzc2lvbkF0dHJpYnV0ZVZhbHVlczoge1xyXG4gICAgICAgICc6c3RhdHVzJzogc3RhdHVzLFxyXG4gICAgICAgICc6dXBkYXRlZEF0JzogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgIH0sXHJcbiAgICAgIFJldHVyblZhbHVlczogJ0FMTF9ORVcnIGFzIGNvbnN0XHJcbiAgICB9O1xyXG5cclxuICAgIGlmIChyZWFzb24pIHtcclxuICAgICAgcGFyYW1zLlVwZGF0ZUV4cHJlc3Npb24gKz0gJywgZGVsZXRlX3JlYXNvbiA9IDpyZWFzb24nO1xyXG4gICAgICBwYXJhbXMuRXhwcmVzc2lvbkF0dHJpYnV0ZVZhbHVlc1snOnJlYXNvbiddID0gcmVhc29uO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkeW5hbW9kYi5zZW5kKG5ldyBVcGRhdGVDb21tYW5kKHBhcmFtcykpO1xyXG4gICAgICByZXR1cm4gcmVzdWx0LkF0dHJpYnV0ZXMgYXMgVXNlciB8fCBudWxsO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyB1cGRhdGVVc2VyR3JhZGUodXNlcklkOiBzdHJpbmcsIGdyYWRlOiBzdHJpbmcpOiBQcm9taXNlPFVzZXIgfCBudWxsPiB7XHJcbiAgICBjb25zdCBwYXJhbXMgPSB7XHJcbiAgICAgIFRhYmxlTmFtZTogJ1VzZXJzJyxcclxuICAgICAgS2V5OiB7IHVzZXJfaWQ6IHVzZXJJZCB9LFxyXG4gICAgICBVcGRhdGVFeHByZXNzaW9uOiAnU0VUIGdyYWRlID0gOmdyYWRlLCB1cGRhdGVkX2F0ID0gOnVwZGF0ZWRBdCcsXHJcbiAgICAgIEV4cHJlc3Npb25BdHRyaWJ1dGVWYWx1ZXM6IHtcclxuICAgICAgICAnOmdyYWRlJzogZ3JhZGUsXHJcbiAgICAgICAgJzp1cGRhdGVkQXQnOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgfSxcclxuICAgICAgUmV0dXJuVmFsdWVzOiAnQUxMX05FVycgYXMgY29uc3RcclxuICAgIH07XHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGR5bmFtb2RiLnNlbmQobmV3IFVwZGF0ZUNvbW1hbmQocGFyYW1zKSk7XHJcbiAgICAgIHJldHVybiByZXN1bHQuQXR0cmlidXRlcyBhcyBVc2VyIHx8IG51bGw7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIOunpOy5rSDqtIDroKgg66mU7ISc65OcXHJcbiAgYXN5bmMgZ2V0TWF0Y2hpbmdSZXF1ZXN0cyhzdGF0dXM/OiBzdHJpbmcpOiBQcm9taXNlPE1hdGNoaW5nUmVxdWVzdFtdPiB7XHJcbiAgICBjb25zdCBwYXJhbXM6IGFueSA9IHtcclxuICAgICAgVGFibGVOYW1lOiAnTWF0Y2hpbmdSZXF1ZXN0cydcclxuICAgIH07XHJcblxyXG4gICAgaWYgKHN0YXR1cykge1xyXG4gICAgICBwYXJhbXMuRmlsdGVyRXhwcmVzc2lvbiA9ICcjc3RhdHVzID0gOnN0YXR1cyc7XHJcbiAgICAgIHBhcmFtcy5FeHByZXNzaW9uQXR0cmlidXRlTmFtZXMgPSB7XHJcbiAgICAgICAgJyNzdGF0dXMnOiAnc3RhdHVzJ1xyXG4gICAgICB9O1xyXG4gICAgICBwYXJhbXMuRXhwcmVzc2lvbkF0dHJpYnV0ZVZhbHVlcyA9IHtcclxuICAgICAgICAnOnN0YXR1cyc6IHN0YXR1c1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkeW5hbW9kYi5zZW5kKG5ldyBTY2FuQ29tbWFuZChwYXJhbXMpKTtcclxuICAgICAgcmV0dXJuIHJlc3VsdC5JdGVtcyBhcyBNYXRjaGluZ1JlcXVlc3RbXSB8fCBbXTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0UHJvcG9zYWxzKHN0YXR1cz86IHN0cmluZyk6IFByb21pc2U8UHJvcG9zYWxbXT4ge1xyXG4gICAgY29uc3QgcGFyYW1zOiBhbnkgPSB7XHJcbiAgICAgIFRhYmxlTmFtZTogJ1Byb3Bvc2FscydcclxuICAgIH07XHJcblxyXG4gICAgaWYgKHN0YXR1cykge1xyXG4gICAgICBwYXJhbXMuRmlsdGVyRXhwcmVzc2lvbiA9ICcjc3RhdHVzID0gOnN0YXR1cyc7XHJcbiAgICAgIHBhcmFtcy5FeHByZXNzaW9uQXR0cmlidXRlTmFtZXMgPSB7XHJcbiAgICAgICAgJyNzdGF0dXMnOiAnc3RhdHVzJ1xyXG4gICAgICB9O1xyXG4gICAgICBwYXJhbXMuRXhwcmVzc2lvbkF0dHJpYnV0ZVZhbHVlcyA9IHtcclxuICAgICAgICAnOnN0YXR1cyc6IHN0YXR1c1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkeW5hbW9kYi5zZW5kKG5ldyBTY2FuQ29tbWFuZChwYXJhbXMpKTtcclxuICAgICAgcmV0dXJuIHJlc3VsdC5JdGVtcyBhcyBQcm9wb3NhbFtdIHx8IFtdO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRNYXRjaFBhaXJzKCk6IFByb21pc2U8TWF0Y2hQYWlyW10+IHtcclxuICAgIGNvbnN0IHBhcmFtcyA9IHtcclxuICAgICAgVGFibGVOYW1lOiAnTWF0Y2hQYWlycydcclxuICAgIH07XHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGR5bmFtb2RiLnNlbmQobmV3IFNjYW5Db21tYW5kKHBhcmFtcykpO1xyXG4gICAgICByZXR1cm4gcmVzdWx0Lkl0ZW1zIGFzIE1hdGNoUGFpcltdIHx8IFtdO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRNYXRjaGluZ0hpc3RvcnkoKTogUHJvbWlzZTxNYXRjaGluZ0hpc3RvcnlbXT4ge1xyXG4gICAgY29uc3QgcGFyYW1zID0ge1xyXG4gICAgICBUYWJsZU5hbWU6ICdNYXRjaGluZ0hpc3RvcnknXHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkeW5hbW9kYi5zZW5kKG5ldyBTY2FuQ29tbWFuZChwYXJhbXMpKTtcclxuICAgICAgcmV0dXJuIHJlc3VsdC5JdGVtcyBhcyBNYXRjaGluZ0hpc3RvcnlbXSB8fCBbXTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0UmV2aWV3cygpOiBQcm9taXNlPFJldmlld1tdPiB7XHJcbiAgICBjb25zdCBwYXJhbXMgPSB7XHJcbiAgICAgIFRhYmxlTmFtZTogJ1Jldmlld3MnXHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkeW5hbW9kYi5zZW5kKG5ldyBTY2FuQ29tbWFuZChwYXJhbXMpKTtcclxuICAgICAgcmV0dXJuIHJlc3VsdC5JdGVtcyBhcyBSZXZpZXdbXSB8fCBbXTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8g7Y+s7J247Yq4IOq0gOugqCDrqZTshJzrk5xcclxuICBhc3luYyBnZXRQb2ludEhpc3RvcnkodXNlcklkPzogc3RyaW5nKTogUHJvbWlzZTxQb2ludEhpc3RvcnlbXT4ge1xyXG4gICAgY29uc3QgcGFyYW1zOiBhbnkgPSB7XHJcbiAgICAgIFRhYmxlTmFtZTogJ1BvaW50SGlzdG9yeSdcclxuICAgIH07XHJcblxyXG4gICAgaWYgKHVzZXJJZCkge1xyXG4gICAgICBwYXJhbXMuS2V5Q29uZGl0aW9uRXhwcmVzc2lvbiA9ICd1c2VyX2lkID0gOnVzZXJJZCc7XHJcbiAgICAgIHBhcmFtcy5FeHByZXNzaW9uQXR0cmlidXRlVmFsdWVzID0ge1xyXG4gICAgICAgICc6dXNlcklkJzogdXNlcklkXHJcbiAgICAgIH07XHJcbiAgICAgIHBhcmFtcy5TY2FuSW5kZXhGb3J3YXJkID0gZmFsc2U7IC8vIOy1nOyLoOyInFxyXG4gICAgfVxyXG4gICAgXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSB1c2VySWQgXHJcbiAgICAgICAgPyBhd2FpdCBkeW5hbW9kYi5zZW5kKG5ldyBRdWVyeUNvbW1hbmQocGFyYW1zKSlcclxuICAgICAgICA6IGF3YWl0IGR5bmFtb2RiLnNlbmQobmV3IFNjYW5Db21tYW5kKHBhcmFtcykpO1xyXG4gICAgICByZXR1cm4gcmVzdWx0Lkl0ZW1zIGFzIFBvaW50SGlzdG9yeVtdIHx8IFtdO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyDsgqzsmqnsnpAg7IOB7YOcIOydtOugpSDqtIDroKgg66mU7ISc65OcXHJcbiAgYXN5bmMgZ2V0VXNlclN0YXR1c0hpc3RvcnkodXNlcklkPzogc3RyaW5nKTogUHJvbWlzZTxVc2VyU3RhdHVzSGlzdG9yeVtdPiB7XHJcbiAgICBjb25zdCBwYXJhbXM6IGFueSA9IHtcclxuICAgICAgVGFibGVOYW1lOiAnVXNlclN0YXR1c0hpc3RvcnknXHJcbiAgICB9O1xyXG5cclxuICAgIGlmICh1c2VySWQpIHtcclxuICAgICAgcGFyYW1zLktleUNvbmRpdGlvbkV4cHJlc3Npb24gPSAndXNlcl9pZCA9IDp1c2VySWQnO1xyXG4gICAgICBwYXJhbXMuRXhwcmVzc2lvbkF0dHJpYnV0ZVZhbHVlcyA9IHtcclxuICAgICAgICAnOnVzZXJJZCc6IHVzZXJJZFxyXG4gICAgICB9O1xyXG4gICAgICBwYXJhbXMuU2NhbkluZGV4Rm9yd2FyZCA9IGZhbHNlOyAvLyDstZzsi6DsiJxcclxuICAgIH1cclxuICAgIFxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gdXNlcklkIFxyXG4gICAgICAgID8gYXdhaXQgZHluYW1vZGIuc2VuZChuZXcgUXVlcnlDb21tYW5kKHBhcmFtcykpXHJcbiAgICAgICAgOiBhd2FpdCBkeW5hbW9kYi5zZW5kKG5ldyBTY2FuQ29tbWFuZChwYXJhbXMpKTtcclxuICAgICAgcmV0dXJuIHJlc3VsdC5JdGVtcyBhcyBVc2VyU3RhdHVzSGlzdG9yeVtdIHx8IFtdO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyDrp6Tri4jsoIAg66Gc6re4IOq0gOugqCDrqZTshJzrk5xcclxuICBhc3luYyBsb2dNYW5hZ2VyQWN0aW9uKG1hbmFnZXJJZDogc3RyaW5nLCBhY3Rpb25UeXBlOiBzdHJpbmcsIHRhcmdldElkOiBzdHJpbmcsIGRldGFpbHM6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgY29uc3QgcGFyYW1zID0ge1xyXG4gICAgICBUYWJsZU5hbWU6ICdNYW5hZ2VyTG9ncycsXHJcbiAgICAgIEl0ZW06IHtcclxuICAgICAgICBpZDogYCR7RGF0ZS5ub3coKX0tJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YCxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICBtYW5hZ2VySWQ6IG1hbmFnZXJJZCxcclxuICAgICAgICBhY3Rpb246IGFjdGlvblR5cGUsXHJcbiAgICAgICAgdGFyZ2V0SWQ6IHRhcmdldElkLFxyXG4gICAgICAgIGRldGFpbHM6IGRldGFpbHNcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgZHluYW1vZGIuc2VuZChuZXcgUHV0Q29tbWFuZChwYXJhbXMpKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0TWFuYWdlckxvZ3MobGltaXQ6IG51bWJlciA9IDUwLCBtYW5hZ2VySWQ/OiBzdHJpbmcsIGFjdGlvbj86IHN0cmluZyk6IFByb21pc2U8TWFuYWdlckxvZ1tdPiB7XHJcbiAgICBjb25zdCBwYXJhbXM6IGFueSA9IHtcclxuICAgICAgVGFibGVOYW1lOiAnTWFuYWdlckxvZ3MnLFxyXG4gICAgICBMaW1pdDogbGltaXRcclxuICAgIH07XHJcblxyXG4gICAgaWYgKG1hbmFnZXJJZCB8fCBhY3Rpb24pIHtcclxuICAgICAgcGFyYW1zLkZpbHRlckV4cHJlc3Npb24gPSBbXTtcclxuICAgICAgcGFyYW1zLkV4cHJlc3Npb25BdHRyaWJ1dGVWYWx1ZXMgPSB7fTtcclxuICAgICAgXHJcbiAgICAgIGlmIChtYW5hZ2VySWQpIHtcclxuICAgICAgICBwYXJhbXMuRmlsdGVyRXhwcmVzc2lvbi5wdXNoKCdtYW5hZ2VySWQgPSA6bWFuYWdlcklkJyk7XHJcbiAgICAgICAgcGFyYW1zLkV4cHJlc3Npb25BdHRyaWJ1dGVWYWx1ZXNbJzptYW5hZ2VySWQnXSA9IG1hbmFnZXJJZDtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgaWYgKGFjdGlvbikge1xyXG4gICAgICAgIHBhcmFtcy5GaWx0ZXJFeHByZXNzaW9uLnB1c2goJ2FjdGlvbiA9IDphY3Rpb24nKTtcclxuICAgICAgICBwYXJhbXMuRXhwcmVzc2lvbkF0dHJpYnV0ZVZhbHVlc1snOmFjdGlvbiddID0gYWN0aW9uO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBwYXJhbXMuRmlsdGVyRXhwcmVzc2lvbiA9IHBhcmFtcy5GaWx0ZXJFeHByZXNzaW9uLmpvaW4oJyBBTkQgJyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGR5bmFtb2RiLnNlbmQobmV3IFNjYW5Db21tYW5kKHBhcmFtcykpO1xyXG4gICAgICBjb25zdCBsb2dzID0gcmVzdWx0Lkl0ZW1zIGFzIGFueVtdIHx8IFtdO1xyXG4gICAgICAvLyDsi6TsoJwg7YWM7J2067iUIOyKpO2CpOuniOyXkCDrp57qsowg67OA7ZmYXHJcbiAgICAgIGNvbnN0IGNvbnZlcnRlZExvZ3M6IE1hbmFnZXJMb2dbXSA9IGxvZ3MubWFwKGxvZyA9PiAoe1xyXG4gICAgICAgIGlkOiBsb2cuaWQsXHJcbiAgICAgICAgbWFuYWdlcl9pZDogbG9nLm1hbmFnZXJJZCxcclxuICAgICAgICBhY3Rpb25fdHlwZTogbG9nLmFjdGlvbixcclxuICAgICAgICB0YXJnZXRfaWQ6IGxvZy50YXJnZXRJZCxcclxuICAgICAgICBkZXRhaWxzOiBsb2cuZGV0YWlscyxcclxuICAgICAgICBjcmVhdGVkX2F0OiBsb2cudGltZXN0YW1wXHJcbiAgICAgIH0pKTtcclxuICAgICAgcmV0dXJuIGNvbnZlcnRlZExvZ3Muc29ydCgoYSwgYikgPT4gbmV3IERhdGUoYi5jcmVhdGVkX2F0KS5nZXRUaW1lKCkgLSBuZXcgRGF0ZShhLmNyZWF0ZWRfYXQpLmdldFRpbWUoKSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIOycoO2LuOumrO2LsCDrqZTshJzrk5xcclxuICBnZXRUYXJnZXRUeXBlKHRhcmdldElkOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgaWYgKHRhcmdldElkLnN0YXJ0c1dpdGgoJ3VzZXJfJykpIHJldHVybiAndXNlcic7XHJcbiAgICBpZiAodGFyZ2V0SWQuc3RhcnRzV2l0aCgnbWF0Y2hfJykpIHJldHVybiAnbWF0Y2gnO1xyXG4gICAgcmV0dXJuICd1bmtub3duJztcclxuICB9XHJcblxyXG4gIC8vIOuMgOyLnOuztOuTnCDthrXqs4Qg66mU7ISc65OcXHJcbiAgYXN5bmMgZ2V0RGFzaGJvYXJkU3RhdHMoKTogUHJvbWlzZTxEYXNoYm9hcmRTdGF0cz4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgW3VzZXJzLCBtYXRjaGVzLCBwb2ludHNdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xyXG4gICAgICAgIHRoaXMuZ2V0VXNlcnMoKSxcclxuICAgICAgICB0aGlzLmdldE1hdGNoaW5nSGlzdG9yeSgpLFxyXG4gICAgICAgIHRoaXMuZ2V0UG9pbnRIaXN0b3J5KClcclxuICAgICAgXSk7XHJcblxyXG4gICAgICBjb25zdCB0b3RhbFVzZXJzID0gdXNlcnMubGVuZ3RoO1xyXG4gICAgICBjb25zdCBhY3RpdmVVc2VycyA9IHVzZXJzLmZpbHRlcih1c2VyID0+IHVzZXIuc3RhdHVzID09PSAnYWN0aXZlJyB8fCB1c2VyLnN0YXR1cyA9PT0gJ2dyZWVuJykubGVuZ3RoO1xyXG4gICAgICBjb25zdCB0b3RhbE1hdGNoZXMgPSBtYXRjaGVzLmxlbmd0aDtcclxuICAgICAgY29uc3QgdG90YWxQb2ludHMgPSBwb2ludHMucmVkdWNlKChzdW0sIHBvaW50KSA9PiBzdW0gKyBwb2ludC5hbW91bnQsIDApO1xyXG4gICAgICBjb25zdCB0b3RhbFJldmVudWUgPSBwb2ludHNcclxuICAgICAgICAuZmlsdGVyKHBvaW50ID0+IHBvaW50LnR5cGUgPT09ICdjaGFyZ2UnIHx8IHBvaW50LmFtb3VudCA+IDApXHJcbiAgICAgICAgLnJlZHVjZSgoc3VtLCBwb2ludCkgPT4gc3VtICsgTWF0aC5hYnMocG9pbnQuYW1vdW50KSwgMCk7XHJcblxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHRvdGFsVXNlcnMsXHJcbiAgICAgICAgYWN0aXZlVXNlcnMsXHJcbiAgICAgICAgdG90YWxNYXRjaGVzLFxyXG4gICAgICAgIHRvdGFsUG9pbnRzLFxyXG4gICAgICAgIHRvdGFsUmV2ZW51ZVxyXG4gICAgICB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyDstZzqt7wg7Zmc64+ZIOuplOyEnOuTnFxyXG4gIGFzeW5jIGdldFJlY2VudEFjdGl2aXRpZXMobGltaXQ6IG51bWJlciA9IDEwKTogUHJvbWlzZTxhbnlbXT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgW3VzZXJzLCBtYXRjaGVzLCBwb2ludHNdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xyXG4gICAgICAgIHRoaXMuZ2V0VXNlcnMoKSxcclxuICAgICAgICB0aGlzLmdldE1hdGNoaW5nSGlzdG9yeSgpLFxyXG4gICAgICAgIHRoaXMuZ2V0UG9pbnRIaXN0b3J5KClcclxuICAgICAgXSk7XHJcblxyXG4gICAgICBjb25zdCBhY3Rpdml0aWVzOiBhbnlbXSA9IFtdO1xyXG5cclxuICAgICAgLy8g7LWc6re8IOqwgOyehe2VnCDsgqzsmqnsnpDrk6RcclxuICAgICAgY29uc3QgcmVjZW50VXNlcnMgPSB1c2Vyc1xyXG4gICAgICAgIC5zb3J0KChhLCBiKSA9PiBuZXcgRGF0ZShiLmNyZWF0ZWRfYXQpLmdldFRpbWUoKSAtIG5ldyBEYXRlKGEuY3JlYXRlZF9hdCkuZ2V0VGltZSgpKVxyXG4gICAgICAgIC5zbGljZSgwLCAzKTtcclxuXHJcbiAgICAgIHJlY2VudFVzZXJzLmZvckVhY2godXNlciA9PiB7XHJcbiAgICAgICAgYWN0aXZpdGllcy5wdXNoKHtcclxuICAgICAgICAgIGlkOiB1c2VyLnVzZXJfaWQsXHJcbiAgICAgICAgICB0eXBlOiAndXNlcl9zaWdudXAnLFxyXG4gICAgICAgICAgZGVzY3JpcHRpb246IGDsg4jroZzsmrQg7IKs7Jqp7J6Q6rCAIOqwgOyehe2WiOyKteuLiOuLpDogJHt1c2VyLmVtYWlsfWAsXHJcbiAgICAgICAgICB0aW1lc3RhbXA6IHVzZXIuY3JlYXRlZF9hdCxcclxuICAgICAgICAgIHVzZXI6IHVzZXIuZW1haWxcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyDstZzqt7wg66ek7LmtIO2ZnOuPmVxyXG4gICAgICBjb25zdCByZWNlbnRNYXRjaGVzID0gbWF0Y2hlc1xyXG4gICAgICAgIC5zb3J0KChhLCBiKSA9PiBuZXcgRGF0ZShiLmNyZWF0ZWRfYXQpLmdldFRpbWUoKSAtIG5ldyBEYXRlKGEuY3JlYXRlZF9hdCkuZ2V0VGltZSgpKVxyXG4gICAgICAgIC5zbGljZSgwLCAzKTtcclxuXHJcbiAgICAgIHJlY2VudE1hdGNoZXMuZm9yRWFjaChtYXRjaCA9PiB7XHJcbiAgICAgICAgYWN0aXZpdGllcy5wdXNoKHtcclxuICAgICAgICAgIGlkOiBtYXRjaC5pZCxcclxuICAgICAgICAgIHR5cGU6ICdtYXRjaGluZycsXHJcbiAgICAgICAgICBkZXNjcmlwdGlvbjogYOyDiOuhnOyatCDrp6Tsua3snbQg7IOd7ISx65CY7JeI7Iq164uI64ukOiAke21hdGNoLnVzZXIxX2lkfSDihpQgJHttYXRjaC51c2VyMl9pZH1gLFxyXG4gICAgICAgICAgdGltZXN0YW1wOiBtYXRjaC5jcmVhdGVkX2F0LFxyXG4gICAgICAgICAgdXNlcjogYCR7bWF0Y2gudXNlcjFfaWR9LCAke21hdGNoLnVzZXIyX2lkfWBcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyDstZzqt7wg7Y+s7J247Yq4IOqxsOuemFxyXG4gICAgICBjb25zdCByZWNlbnRQb2ludHMgPSBwb2ludHNcclxuICAgICAgICAuc29ydCgoYSwgYikgPT4gbmV3IERhdGUoYi5jcmVhdGVkX2F0KS5nZXRUaW1lKCkgLSBuZXcgRGF0ZShhLmNyZWF0ZWRfYXQpLmdldFRpbWUoKSlcclxuICAgICAgICAuc2xpY2UoMCwgMyk7XHJcblxyXG4gICAgICByZWNlbnRQb2ludHMuZm9yRWFjaChwb2ludCA9PiB7XHJcbiAgICAgICAgYWN0aXZpdGllcy5wdXNoKHtcclxuICAgICAgICAgIGlkOiBwb2ludC5pZCxcclxuICAgICAgICAgIHR5cGU6ICdwb2ludF90cmFuc2FjdGlvbicsXHJcbiAgICAgICAgICBkZXNjcmlwdGlvbjogYO2PrOyduO2KuCDqsbDrnpg6ICR7cG9pbnQuYW1vdW50ID4gMCA/ICcrJyA6ICcnfSR7cG9pbnQuYW1vdW50fVAgKCR7cG9pbnQudHlwZX0pYCxcclxuICAgICAgICAgIHRpbWVzdGFtcDogcG9pbnQuY3JlYXRlZF9hdCxcclxuICAgICAgICAgIHVzZXI6IHBvaW50LnVzZXJfaWRcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyDrqqjrk6Ag7Zmc64+Z7J2EIOyLnOqwhOyInOycvOuhnCDsoJXroKztlZjqs6Ag7LWc6re8IGxpbWl06rCc66eMIOuwmO2ZmFxyXG4gICAgICByZXR1cm4gYWN0aXZpdGllc1xyXG4gICAgICAgIC5zb3J0KChhLCBiKSA9PiBuZXcgRGF0ZShiLnRpbWVzdGFtcCkuZ2V0VGltZSgpIC0gbmV3IERhdGUoYS50aW1lc3RhbXApLmdldFRpbWUoKSlcclxuICAgICAgICAuc2xpY2UoMCwgbGltaXQpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyB1c2VycyArIHNjb3JlcyArIHByb2ZpbGVzIOuzke2VqSDrsJjtmZhcclxuICBhc3luYyBnZXRVc2Vyc1dpdGhTY29yZUFuZFByb2ZpbGUoKTogUHJvbWlzZTxhbnlbXT4ge1xyXG4gICAgY29uc3QgdXNlcnMgPSBhd2FpdCB0aGlzLmdldFVzZXJzKCk7XHJcbiAgICAvLyBTY29yZXMsIFByb2ZpbGVzIOuqqOuRkCBTY2FuXHJcbiAgICBjb25zdCBzY29yZXNSZXN1bHQgPSBhd2FpdCBkeW5hbW9kYi5zZW5kKG5ldyBTY2FuQ29tbWFuZCh7IFRhYmxlTmFtZTogJ1Njb3JlcycgfSkpO1xyXG4gICAgY29uc3QgcHJvZmlsZXNSZXN1bHQgPSBhd2FpdCBkeW5hbW9kYi5zZW5kKG5ldyBTY2FuQ29tbWFuZCh7IFRhYmxlTmFtZTogJ1Byb2ZpbGVzJyB9KSk7XHJcbiAgICBjb25zdCBzY29yZXMgPSBzY29yZXNSZXN1bHQuSXRlbXMgfHwgW107XHJcbiAgICBjb25zdCBwcm9maWxlcyA9IHByb2ZpbGVzUmVzdWx0Lkl0ZW1zIHx8IFtdO1xyXG4gICAgLy8g67OR7ZWpXHJcbiAgICByZXR1cm4gdXNlcnMubWFwKHVzZXIgPT4gKHtcclxuICAgICAgLi4udXNlcixcclxuICAgICAgc2NvcmU6IHNjb3Jlcy5maW5kKHMgPT4gcy51c2VyX2lkID09PSB1c2VyLnVzZXJfaWQpIHx8IG51bGwsXHJcbiAgICAgIHByb2ZpbGU6IHByb2ZpbGVzLmZpbmQocCA9PiBwLnVzZXJfaWQgPT09IHVzZXIudXNlcl9pZCkgfHwgbnVsbCxcclxuICAgIH0pKTtcclxuICB9XHJcblxyXG4gIC8vIOyXrOufrCB1c2VyX2lk66GcIFVzZXJzICsgUHJvZmlsZXMg7KCV67O0IO2VnCDrsojsl5Ag7KGw7ZqMXHJcbiAgYXN5bmMgZ2V0VXNlcnNXaXRoUHJvZmlsZXNCeUlkcyh1c2VySWRzOiBzdHJpbmdbXSk6IFByb21pc2U8YW55W10+IHtcclxuICAgIGlmICghdXNlcklkcy5sZW5ndGgpIHJldHVybiBbXTtcclxuICAgIC8vIER5bmFtb0RCIGJhdGNoR2V07J2AIDEwMOqwnOq5jOyngCDsp4Dsm5BcclxuICAgIGNvbnN0IGJhdGNoZXMgPSBbXTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdXNlcklkcy5sZW5ndGg7IGkgKz0gMTAwKSB7XHJcbiAgICAgIGJhdGNoZXMucHVzaCh1c2VySWRzLnNsaWNlKGksIGkgKyAxMDApKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHJlc3VsdHM6IGFueVtdID0gW107XHJcbiAgICBmb3IgKGNvbnN0IGJhdGNoIG9mIGJhdGNoZXMpIHtcclxuICAgICAgY29uc3QgcGFyYW1zID0ge1xyXG4gICAgICAgIFJlcXVlc3RJdGVtczoge1xyXG4gICAgICAgICAgVXNlcnM6IHtcclxuICAgICAgICAgICAgS2V5czogYmF0Y2gubWFwKGlkID0+ICh7IHVzZXJfaWQ6IGlkIH0pKVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIFByb2ZpbGVzOiB7XHJcbiAgICAgICAgICAgIEtleXM6IGJhdGNoLm1hcChpZCA9PiAoeyB1c2VyX2lkOiBpZCB9KSlcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGR5bmFtb2RiLnNlbmQobmV3IEJhdGNoR2V0Q29tbWFuZChwYXJhbXMpKTtcclxuICAgICAgY29uc3QgdXNlcnMgPSByZXMuUmVzcG9uc2VzPy5Vc2VycyB8fCBbXTtcclxuICAgICAgY29uc3QgcHJvZmlsZXMgPSByZXMuUmVzcG9uc2VzPy5Qcm9maWxlcyB8fCBbXTtcclxuICAgICAgY29uc3QgcHJvZmlsZU1hcCA9IE9iamVjdC5mcm9tRW50cmllcyhwcm9maWxlcy5tYXAoKHA6IGFueSkgPT4gW3AudXNlcl9pZCwgcF0pKTtcclxuICAgICAgLy8g6rCBIOycoOyggOuzhOuhnCBwcmVmZXJlbmNlc+uPhCDqsIDsoLjsmYDshJwg67OR7ZWpXHJcbiAgICAgIGZvciAoY29uc3QgdSBvZiB1c2Vycykge1xyXG4gICAgICAgIGxldCBwcmVmZXJlbmNlcyA9IG51bGw7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIHByZWZlcmVuY2VzID0gYXdhaXQgdGhpcy5nZXRQcmVmZXJlbmNlcyh1LnVzZXJfaWQpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgIHByZWZlcmVuY2VzID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmVzdWx0cy5wdXNoKHsgLi4udSwgcHJvZmlsZTogcHJvZmlsZU1hcFt1LnVzZXJfaWRdLCBwcmVmZXJlbmNlcyB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgfVxyXG59XHJcblxyXG5jb25zdCBkYXRhU2VydmljZSA9IG5ldyBEYXRhU2VydmljZSgpO1xyXG5leHBvcnQgZGVmYXVsdCBkYXRhU2VydmljZTtcclxuXHJcbi8vIFNjb3JlcyDthYzsnbTruJQg7Jew64+ZIO2VqOyImFxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2F2ZVVzZXJTY29yZSh1c2VySWQ6IHN0cmluZywgc2NvcmU6IGFueSwgc2NvcmVyOiBzdHJpbmcsIHN1bW1hcnk6IHN0cmluZyA9ICcnKSB7XHJcbiAgY29uc3Qgbm93ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG4gIC8vIOq4sOyhtCDsoJDsiJggcm93IOuqqOuRkCDsgq3soJwgKHVzZXJfaWTroZwgUXVlcnkpXHJcbiAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBkeW5hbW9kYi5zZW5kKG5ldyBRdWVyeUNvbW1hbmQoe1xyXG4gICAgVGFibGVOYW1lOiAnU2NvcmVzJyxcclxuICAgIEtleUNvbmRpdGlvbkV4cHJlc3Npb246ICd1c2VyX2lkID0gOnVpZCcsXHJcbiAgICBFeHByZXNzaW9uQXR0cmlidXRlVmFsdWVzOiB7ICc6dWlkJzogdXNlcklkIH0sXHJcbiAgfSkpO1xyXG4gIGZvciAoY29uc3QgaXRlbSBvZiBleGlzdGluZy5JdGVtcyB8fCBbXSkge1xyXG4gICAgYXdhaXQgZHluYW1vZGIuc2VuZChuZXcgRGVsZXRlQ29tbWFuZCh7XHJcbiAgICAgIFRhYmxlTmFtZTogJ1Njb3JlcycsXHJcbiAgICAgIEtleTogeyB1c2VyX2lkOiBpdGVtLnVzZXJfaWQsIGNyZWF0ZWRfYXQ6IGl0ZW0uY3JlYXRlZF9hdCB9LFxyXG4gICAgfSkpO1xyXG4gIH1cclxuICAvLyBTY29yZXMg7YWM7J2067iUOiB1c2VyX2lkICsgY3JlYXRlZF9hdCg9bm93KeuhnCDsoIDsnqVcclxuICBjb25zdCBhdmVyYWdlID1cclxuICAgIHNjb3JlLmFwcGVhcmFuY2UgKiAwLjI1ICtcclxuICAgIHNjb3JlLnBlcnNvbmFsaXR5ICogMC4yNSArXHJcbiAgICBzY29yZS5qb2IgKiAwLjIgK1xyXG4gICAgc2NvcmUuZWR1Y2F0aW9uICogMC4xNSArXHJcbiAgICBzY29yZS5lY29ub21pY3MgKiAwLjE1O1xyXG4gIGZ1bmN0aW9uIGdldEdyYWRlKHNjb3JlOiBudW1iZXIpOiBzdHJpbmcge1xyXG4gICAgaWYgKHNjb3JlID49IDk1KSByZXR1cm4gJ1MnO1xyXG4gICAgaWYgKHNjb3JlID49IDg1KSByZXR1cm4gJ0EnO1xyXG4gICAgaWYgKHNjb3JlID49IDc1KSByZXR1cm4gJ0InO1xyXG4gICAgaWYgKHNjb3JlID49IDY1KSByZXR1cm4gJ0MnO1xyXG4gICAgaWYgKHNjb3JlID49IDU1KSByZXR1cm4gJ0QnO1xyXG4gICAgaWYgKHNjb3JlID49IDQ1KSByZXR1cm4gJ0UnO1xyXG4gICAgcmV0dXJuICdGJztcclxuICB9XHJcbiAgY29uc3QgYXZlcmFnZUdyYWRlID0gZ2V0R3JhZGUoYXZlcmFnZSk7XHJcbiAgY29uc3QgaXRlbSA9IHtcclxuICAgIHVzZXJfaWQ6IHVzZXJJZCxcclxuICAgIGNyZWF0ZWRfYXQ6IG5vdyxcclxuICAgIHNjb3JlcixcclxuICAgIC4uLnNjb3JlLFxyXG4gICAgYXZlcmFnZSxcclxuICAgIGdyYWRlOiBhdmVyYWdlR3JhZGUsIC8vIGF2ZXJhZ2VHcmFkZeulvCBncmFkZSDtlYTrk5zroZwg7KCA7J6lXHJcbiAgICB1cGRhdGVkX2F0OiBub3csXHJcbiAgfTtcclxuICBhd2FpdCBkeW5hbW9kYi5zZW5kKG5ldyBQdXRDb21tYW5kKHsgVGFibGVOYW1lOiAnU2NvcmVzJywgSXRlbTogaXRlbSB9KSk7XHJcbiAgLy8gVXNlcnMg7YWM7J2067iU7JeQIGhhc19zY29yZTogdHJ1ZSDsl4XrjbDsnbTtirhcclxuICBhd2FpdCBkeW5hbW9kYi5zZW5kKG5ldyBVcGRhdGVDb21tYW5kKHtcclxuICAgIFRhYmxlTmFtZTogJ1VzZXJzJyxcclxuICAgIEtleTogeyB1c2VyX2lkOiB1c2VySWQgfSxcclxuICAgIFVwZGF0ZUV4cHJlc3Npb246ICdTRVQgaGFzX3Njb3JlID0gOnRydWUsIHVwZGF0ZWRfYXQgPSA6dXBkYXRlZEF0JyxcclxuICAgIEV4cHJlc3Npb25BdHRyaWJ1dGVWYWx1ZXM6IHsgJzp0cnVlJzogdHJ1ZSwgJzp1cGRhdGVkQXQnOiBub3cgfSxcclxuICB9KSk7XHJcbiAgLy8g7KCQ7IiYIOyggOyepSDsoIQg7Y+J6regL+uTseq4iSDqs4TsgrBcclxuICAvLyBTY29yZUhpc3Rvcnkg7YWM7J2067iU7JeQIOydtOugpSDsoIDsnqUgKO2Pie2DhO2ZlCDqtazsobApXHJcbiAgYXdhaXQgZHluYW1vZGIuc2VuZChuZXcgUHV0Q29tbWFuZCh7XHJcbiAgICBUYWJsZU5hbWU6ICdTY29yZUhpc3RvcnknLFxyXG4gICAgSXRlbToge1xyXG4gICAgICB1c2VyX2lkOiB1c2VySWQsXHJcbiAgICAgIGNyZWF0ZWRfYXQ6IG5vdyxcclxuICAgICAgZmFjZV9zY29yZTogc2NvcmUuZmFjZVNjb3JlLFxyXG4gICAgICBhcHBlYXJhbmNlOiBzY29yZS5hcHBlYXJhbmNlLFxyXG4gICAgICBwZXJzb25hbGl0eTogc2NvcmUucGVyc29uYWxpdHksXHJcbiAgICAgIGpvYjogc2NvcmUuam9iLFxyXG4gICAgICBlZHVjYXRpb246IHNjb3JlLmVkdWNhdGlvbixcclxuICAgICAgZWNvbm9taWNzOiBzY29yZS5lY29ub21pY3MsXHJcbiAgICAgIGF2ZXJhZ2UsXHJcbiAgICAgIGF2ZXJhZ2VHcmFkZSxcclxuICAgICAgcmVhc29uOiBzdW1tYXJ5LFxyXG4gICAgICBtYW5hZ2VyX2lkOiBzY29yZXIsXHJcbiAgICB9XHJcbiAgfSkpO1xyXG4gIC8vIFVzZXJTdGF0dXNIaXN0b3J57JeQ64qUIOygkOyImCDsnbTroKUg7KCA7J6l7ZWY7KeAIOyViuydjFxyXG4gIHJldHVybiBpdGVtO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlclNjb3JlSGlzdG9yeSh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8YW55W10+IHtcclxuICBjb25zdCBwYXJhbXMgPSB7XHJcbiAgICBUYWJsZU5hbWU6ICdVc2VyU3RhdHVzSGlzdG9yeScsXHJcbiAgICBLZXlDb25kaXRpb25FeHByZXNzaW9uOiAndXNlcl9pZCA9IDp1aWQnLFxyXG4gICAgRXhwcmVzc2lvbkF0dHJpYnV0ZVZhbHVlczogeyAnOnVpZCc6IHVzZXJJZCB9LFxyXG4gICAgU2NhbkluZGV4Rm9yd2FyZDogZmFsc2UsIC8vIOy1nOyLoOyInCDsoJXroKxcclxuICB9O1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGR5bmFtb2RiLnNlbmQobmV3IFF1ZXJ5Q29tbWFuZChwYXJhbXMpKTtcclxuICAvLyB0eXBl7J20ICdzY29yZSfsnbgg7J2066Cl66eMIOuwmO2ZmFxyXG4gIHJldHVybiAocmVzdWx0Lkl0ZW1zIHx8IFtdKS5maWx0ZXIoaXRlbSA9PiBpdGVtLnR5cGUgPT09ICdzY29yZScpO1xyXG59IFxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUFsbFNjb3JlSGlzdG9yeSh1c2VySWQ6IHN0cmluZykge1xyXG4gIC8vIO2VtOuLuSB1c2VyX2lk7J2YIOuqqOuToCBTY29yZUhpc3Rvcnkgcm93IOyCreygnFxyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGR5bmFtb2RiLnNlbmQobmV3IFF1ZXJ5Q29tbWFuZCh7XHJcbiAgICBUYWJsZU5hbWU6ICdTY29yZUhpc3RvcnknLFxyXG4gICAgS2V5Q29uZGl0aW9uRXhwcmVzc2lvbjogJ3VzZXJfaWQgPSA6dWlkJyxcclxuICAgIEV4cHJlc3Npb25BdHRyaWJ1dGVWYWx1ZXM6IHsgJzp1aWQnOiB1c2VySWQgfSxcclxuICB9KSk7XHJcbiAgZm9yIChjb25zdCBpdGVtIG9mIHJlc3VsdC5JdGVtcyB8fCBbXSkge1xyXG4gICAgYXdhaXQgZHluYW1vZGIuc2VuZChuZXcgRGVsZXRlQ29tbWFuZCh7XHJcbiAgICAgIFRhYmxlTmFtZTogJ1Njb3JlSGlzdG9yeScsXHJcbiAgICAgIEtleTogeyB1c2VyX2lkOiBpdGVtLnVzZXJfaWQsIGNyZWF0ZWRfYXQ6IGl0ZW0uY3JlYXRlZF9hdCB9LFxyXG4gICAgfSkpO1xyXG4gIH1cclxufSBcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyU2NvcmUodXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPGFueSB8IG51bGw+IHtcclxuICBjb25zdCBwYXJhbXMgPSB7XHJcbiAgICBUYWJsZU5hbWU6ICdTY29yZXMnLFxyXG4gICAgS2V5Q29uZGl0aW9uRXhwcmVzc2lvbjogJ3VzZXJfaWQgPSA6dWlkJyxcclxuICAgIEV4cHJlc3Npb25BdHRyaWJ1dGVWYWx1ZXM6IHsgJzp1aWQnOiB1c2VySWQgfSxcclxuICAgIFNjYW5JbmRleEZvcndhcmQ6IGZhbHNlLCAvLyDstZzsi6DsiJxcclxuICAgIExpbWl0OiAxLFxyXG4gIH07XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZHluYW1vZGIuc2VuZChuZXcgUXVlcnlDb21tYW5kKHBhcmFtcykpO1xyXG4gIHJldHVybiByZXN1bHQuSXRlbXM/LlswXSB8fCBudWxsO1xyXG59ICJdLCJuYW1lcyI6WyJEeW5hbW9EQkNsaWVudCIsIkR5bmFtb0RCRG9jdW1lbnRDbGllbnQiLCJRdWVyeUNvbW1hbmQiLCJHZXRDb21tYW5kIiwiU2NhbkNvbW1hbmQiLCJVcGRhdGVDb21tYW5kIiwiUHV0Q29tbWFuZCIsIkRlbGV0ZUNvbW1hbmQiLCJCYXRjaEdldENvbW1hbmQiLCJhd3NDb25maWciLCJBV1NfQ09ORklHIiwiY2xpZW50IiwiZHluYW1vZGIiLCJmcm9tIiwiRGF0YVNlcnZpY2UiLCJnZXRNYW5hZ2VyQnlFbWFpbCIsImVtYWlsIiwicGFyYW1zIiwiVGFibGVOYW1lIiwiSW5kZXhOYW1lIiwiS2V5Q29uZGl0aW9uRXhwcmVzc2lvbiIsIkV4cHJlc3Npb25BdHRyaWJ1dGVWYWx1ZXMiLCJyZXN1bHQiLCJzZW5kIiwiSXRlbXMiLCJlcnJvciIsImdldE1hbmFnZXJCeUlkIiwibWFuYWdlcklkIiwiS2V5IiwiaWQiLCJJdGVtIiwiZ2V0VXNlcnMiLCJnZXRVc2VyQnlJZCIsInVzZXJJZCIsInVzZXJfaWQiLCJnZXRQcm9maWxlIiwiZ2V0UHJlZmVyZW5jZXMiLCJ1cGRhdGVVc2VyU3RhdHVzIiwic3RhdHVzIiwicmVhc29uIiwiVXBkYXRlRXhwcmVzc2lvbiIsIkV4cHJlc3Npb25BdHRyaWJ1dGVOYW1lcyIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsIlJldHVyblZhbHVlcyIsIkF0dHJpYnV0ZXMiLCJ1cGRhdGVVc2VyR3JhZGUiLCJncmFkZSIsImdldE1hdGNoaW5nUmVxdWVzdHMiLCJGaWx0ZXJFeHByZXNzaW9uIiwiZ2V0UHJvcG9zYWxzIiwiZ2V0TWF0Y2hQYWlycyIsImdldE1hdGNoaW5nSGlzdG9yeSIsImdldFJldmlld3MiLCJnZXRQb2ludEhpc3RvcnkiLCJTY2FuSW5kZXhGb3J3YXJkIiwiZ2V0VXNlclN0YXR1c0hpc3RvcnkiLCJsb2dNYW5hZ2VyQWN0aW9uIiwiYWN0aW9uVHlwZSIsInRhcmdldElkIiwiZGV0YWlscyIsIm5vdyIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0ciIsInRpbWVzdGFtcCIsImFjdGlvbiIsImdldE1hbmFnZXJMb2dzIiwibGltaXQiLCJMaW1pdCIsInB1c2giLCJqb2luIiwibG9ncyIsImNvbnZlcnRlZExvZ3MiLCJtYXAiLCJsb2ciLCJtYW5hZ2VyX2lkIiwiYWN0aW9uX3R5cGUiLCJ0YXJnZXRfaWQiLCJjcmVhdGVkX2F0Iiwic29ydCIsImEiLCJiIiwiZ2V0VGltZSIsImdldFRhcmdldFR5cGUiLCJzdGFydHNXaXRoIiwiZ2V0RGFzaGJvYXJkU3RhdHMiLCJ1c2VycyIsIm1hdGNoZXMiLCJwb2ludHMiLCJQcm9taXNlIiwiYWxsIiwidG90YWxVc2VycyIsImxlbmd0aCIsImFjdGl2ZVVzZXJzIiwiZmlsdGVyIiwidXNlciIsInRvdGFsTWF0Y2hlcyIsInRvdGFsUG9pbnRzIiwicmVkdWNlIiwic3VtIiwicG9pbnQiLCJhbW91bnQiLCJ0b3RhbFJldmVudWUiLCJ0eXBlIiwiYWJzIiwiZ2V0UmVjZW50QWN0aXZpdGllcyIsImFjdGl2aXRpZXMiLCJyZWNlbnRVc2VycyIsInNsaWNlIiwiZm9yRWFjaCIsImRlc2NyaXB0aW9uIiwicmVjZW50TWF0Y2hlcyIsIm1hdGNoIiwidXNlcjFfaWQiLCJ1c2VyMl9pZCIsInJlY2VudFBvaW50cyIsImdldFVzZXJzV2l0aFNjb3JlQW5kUHJvZmlsZSIsInNjb3Jlc1Jlc3VsdCIsInByb2ZpbGVzUmVzdWx0Iiwic2NvcmVzIiwicHJvZmlsZXMiLCJzY29yZSIsImZpbmQiLCJzIiwicHJvZmlsZSIsInAiLCJnZXRVc2Vyc1dpdGhQcm9maWxlc0J5SWRzIiwidXNlcklkcyIsImJhdGNoZXMiLCJpIiwicmVzdWx0cyIsImJhdGNoIiwiUmVxdWVzdEl0ZW1zIiwiVXNlcnMiLCJLZXlzIiwiUHJvZmlsZXMiLCJyZXMiLCJSZXNwb25zZXMiLCJwcm9maWxlTWFwIiwiT2JqZWN0IiwiZnJvbUVudHJpZXMiLCJ1IiwicHJlZmVyZW5jZXMiLCJlIiwiZGF0YVNlcnZpY2UiLCJzYXZlVXNlclNjb3JlIiwic2NvcmVyIiwic3VtbWFyeSIsImV4aXN0aW5nIiwiaXRlbSIsImF2ZXJhZ2UiLCJhcHBlYXJhbmNlIiwicGVyc29uYWxpdHkiLCJqb2IiLCJlZHVjYXRpb24iLCJlY29ub21pY3MiLCJnZXRHcmFkZSIsImF2ZXJhZ2VHcmFkZSIsInVwZGF0ZWRfYXQiLCJmYWNlX3Njb3JlIiwiZmFjZVNjb3JlIiwiZ2V0VXNlclNjb3JlSGlzdG9yeSIsImRlbGV0ZUFsbFNjb3JlSGlzdG9yeSIsImdldFVzZXJTY29yZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/lib/dataService.ts\n");

/***/ }),

/***/ "(api)/./src/pages/api/admin/managers/[managerId].ts":
/*!*****************************************************!*\
  !*** ./src/pages/api/admin/managers/[managerId].ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _aws_sdk_client_dynamodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-sdk/client-dynamodb */ \"@aws-sdk/client-dynamodb\");\n/* harmony import */ var _aws_sdk_client_dynamodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_aws_sdk_client_dynamodb__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-sdk/lib-dynamodb */ \"@aws-sdk/lib-dynamodb\");\n/* harmony import */ var _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _config_aws__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../config/aws */ \"(api)/./src/config/aws.ts\");\n/* harmony import */ var _lib_dataService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../lib/dataService */ \"(api)/./src/lib/dataService.ts\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_4__);\n\n\n\n\n\nconst JWT_SECRET = \"dev_jwt_secret_key_here\"; // login.ts와 동일한 시크릿 키\nfunction getDefaultPermissions(role) {\n    const basePermissions = {\n        user_management: {\n            read: false,\n            write: false,\n            delete: false\n        },\n        matching_management: {\n            read: false,\n            write: false,\n            delete: false\n        },\n        review_management: {\n            read: false,\n            write: false,\n            delete: false\n        },\n        point_management: {\n            read: false,\n            write: false,\n            delete: false\n        },\n        manager_management: {\n            read: false,\n            write: false,\n            delete: false\n        },\n        manager_logs: {\n            read: false,\n            write: false,\n            delete: false\n        },\n        dashboard: {\n            read: false,\n            write: false,\n            delete: false\n        }\n    };\n    switch(role){\n        case \"admin\":\n            return Object.keys(basePermissions).reduce((acc, key)=>{\n                acc[key] = {\n                    read: true,\n                    write: true,\n                    delete: true\n                };\n                return acc;\n            }, {});\n        case \"manager\":\n            return {\n                ...basePermissions,\n                user_management: {\n                    read: true,\n                    write: true,\n                    delete: false\n                },\n                matching_management: {\n                    read: true,\n                    write: true,\n                    delete: false\n                },\n                point_management: {\n                    read: true,\n                    write: true,\n                    delete: false\n                },\n                manager_logs: {\n                    read: false,\n                    write: false,\n                    delete: false\n                },\n                dashboard: {\n                    read: true,\n                    write: false,\n                    delete: false\n                }\n            };\n        case \"support\":\n            return {\n                ...basePermissions,\n                user_management: {\n                    read: true,\n                    write: false,\n                    delete: false\n                },\n                matching_management: {\n                    read: true,\n                    write: false,\n                    delete: false\n                },\n                dashboard: {\n                    read: true,\n                    write: false,\n                    delete: false\n                }\n            };\n        default:\n            return basePermissions;\n    }\n}\n// AWS 설정\nconst client = new _aws_sdk_client_dynamodb__WEBPACK_IMPORTED_MODULE_0__.DynamoDBClient(_config_aws__WEBPACK_IMPORTED_MODULE_2__[\"default\"]);\nconst dynamodb = _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.DynamoDBDocumentClient.from(client);\nasync function handler(req, res) {\n    const { managerId } = req.query;\n    if (!managerId || typeof managerId !== \"string\") {\n        return res.status(400).json({\n            message: \"Manager ID is required\"\n        });\n    }\n    try {\n        // 개발 환경에서는 권한 검증 완화\n        if (true) {\n            console.log(\"\\uD83D\\uDD27 개발 환경: 권한 검증 건너뜀\");\n        } else {}\n        if (req.method === \"GET\") {\n            console.log(`Admin: 매니저 ${managerId} 조회 시작`);\n            const params = {\n                TableName: \"Managers\",\n                Key: {\n                    id: managerId\n                }\n            };\n            const result = await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.GetCommand(params));\n            if (!result.Item) {\n                console.log(`매니저 ${managerId}를 찾을 수 없습니다.`);\n                return res.status(404).json({\n                    message: \"Manager not found\"\n                });\n            }\n            const manager = {\n                id: result.Item.id || \"\",\n                email: result.Item.email || \"\",\n                name: result.Item.name || \"\",\n                role: result.Item.role || \"manager\",\n                status: result.Item.status || \"active\",\n                permissions: result.Item.permissions || getDefaultPermissions(result.Item.role || \"manager\"),\n                created_at: result.Item.createdAt || result.Item.created_at || new Date().toISOString(),\n                updated_at: result.Item.updatedAt || result.Item.updated_at || new Date().toISOString()\n            };\n            console.log(`Admin: 매니저 ${managerId} 조회 완료`);\n            res.status(200).json(manager);\n        } else if (req.method === \"PATCH\") {\n            console.log(`Admin: 매니저 ${managerId} 업데이트 시작`);\n            // 권한 검증 (자신의 이름만 변경하는 경우는 제외)\n            const updateFields = req.body;\n            const isOnlyNameUpdate = Object.keys(updateFields).length === 1 && updateFields.name;\n            if (!isOnlyNameUpdate) {\n                // 개발 환경에서는 권한 검증 완화\n                if (true) {\n                    console.log(\"\\uD83D\\uDD27 개발 환경: 권한 검증 건너뜀\");\n                } else {}\n            } else {\n                console.log(\"\\uD83D\\uDD27 자신의 이름 변경: 권한 검증 건너뜀\");\n            }\n            const updateParams = {\n                TableName: \"Managers\",\n                Key: {\n                    id: managerId\n                },\n                UpdateExpression: \"SET updatedAt = :updated_at\",\n                ExpressionAttributeValues: {\n                    \":updated_at\": new Date().toISOString()\n                },\n                ExpressionAttributeNames: {}\n            };\n            if (updateFields.name) {\n                updateParams.UpdateExpression += \", #name = :name\";\n                updateParams.ExpressionAttributeNames[\"#name\"] = \"name\";\n                updateParams.ExpressionAttributeValues[\":name\"] = updateFields.name;\n            }\n            if (updateFields.email) {\n                updateParams.UpdateExpression += \", email = :email\";\n                updateParams.ExpressionAttributeValues[\":email\"] = updateFields.email;\n            }\n            if (updateFields.role) {\n                updateParams.UpdateExpression += \", role = :role\";\n                updateParams.ExpressionAttributeValues[\":role\"] = updateFields.role;\n            }\n            if (updateFields.permissions) {\n                updateParams.UpdateExpression += \", #perms = :permissions\";\n                updateParams.ExpressionAttributeNames[\"#perms\"] = \"permissions\";\n                updateParams.ExpressionAttributeValues[\":permissions\"] = updateFields.permissions;\n            }\n            await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.UpdateCommand(updateParams));\n            // 업데이트된 데이터 조회\n            const getParams = {\n                TableName: \"Managers\",\n                Key: {\n                    id: managerId\n                }\n            };\n            const result = await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.GetCommand(getParams));\n            if (!result.Item) {\n                return res.status(404).json({\n                    message: \"Manager not found\"\n                });\n            }\n            const manager = {\n                id: result.Item.id || \"\",\n                email: result.Item.email || \"\",\n                name: result.Item.name || \"\",\n                role: result.Item.role || \"manager\",\n                status: result.Item.status || \"active\",\n                permissions: result.Item.permissions || getDefaultPermissions(result.Item.role || \"manager\"),\n                created_at: result.Item.createdAt || result.Item.created_at || new Date().toISOString(),\n                updated_at: result.Item.updatedAt || result.Item.updated_at || new Date().toISOString()\n            };\n            console.log(`Admin: 매니저 ${managerId} 업데이트 완료`);\n            res.status(200).json(manager);\n        } else if (req.method === \"DELETE\") {\n            console.log(`Admin: 매니저 ${managerId} 삭제 시작`);\n            // 삭제할 매니저 정보 조회\n            const getParams = {\n                TableName: \"Managers\",\n                Key: {\n                    id: managerId\n                }\n            };\n            const managerResult = await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.GetCommand(getParams));\n            if (!managerResult.Item) {\n                return res.status(404).json({\n                    message: \"Manager not found\"\n                });\n            }\n            const managerToDelete = managerResult.Item;\n            // 매니저 삭제\n            const deleteParams = {\n                TableName: \"Managers\",\n                Key: {\n                    id: managerId\n                }\n            };\n            await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.DeleteCommand(deleteParams));\n            // 로그 기록\n            try {\n                const authHeader = req.headers.authorization;\n                if (authHeader && authHeader.startsWith(\"Bearer \")) {\n                    const token = authHeader.substring(7);\n                    // 토큰에서 매니저 ID 추출 (실제로는 JWT 디코딩 필요)\n                    const currentManagerId = \"admin\"; // 임시로 admin으로 설정\n                    await _lib_dataService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].logManagerAction(currentManagerId, \"manager_delete\", managerId, `매니저 삭제: ${managerToDelete.name} (${managerToDelete.email})`);\n                }\n            } catch (logError) {\n                console.error(\"로그 기록 실패:\", logError);\n            // 로그 기록 실패해도 삭제는 계속 진행\n            }\n            console.log(`Admin: 매니저 ${managerId} 삭제 완료`);\n            res.status(200).json({\n                message: \"Manager deleted successfully\"\n            });\n        } else {\n            res.status(405).json({\n                message: \"Method not allowed\"\n            });\n        }\n    } catch (error) {\n        console.error(\"Admin: 매니저 관리 오류:\", error);\n        res.status(500).json({\n            message: \"매니저 관리 중 오류가 발생했습니다.\",\n            error: error instanceof Error ? error.message : \"Unknown error\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL2FkbWluL21hbmFnZXJzL1ttYW5hZ2VySWRdLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUMwRDtBQUMrQztBQUN6RDtBQUNNO0FBQ3ZCO0FBRS9CLE1BQU1RLGFBQWEsMkJBQTJCLHNCQUFzQjtBQUVwRSxTQUFTQyxzQkFBc0JDLElBQVk7SUFDekMsTUFBTUMsa0JBQWtCO1FBQ3RCQyxpQkFBaUI7WUFBRUMsTUFBTTtZQUFPQyxPQUFPO1lBQU9DLFFBQVE7UUFBTTtRQUM1REMscUJBQXFCO1lBQUVILE1BQU07WUFBT0MsT0FBTztZQUFPQyxRQUFRO1FBQU07UUFDaEVFLG1CQUFtQjtZQUFFSixNQUFNO1lBQU9DLE9BQU87WUFBT0MsUUFBUTtRQUFNO1FBQzlERyxrQkFBa0I7WUFBRUwsTUFBTTtZQUFPQyxPQUFPO1lBQU9DLFFBQVE7UUFBTTtRQUM3REksb0JBQW9CO1lBQUVOLE1BQU07WUFBT0MsT0FBTztZQUFPQyxRQUFRO1FBQU07UUFDL0RLLGNBQWM7WUFBRVAsTUFBTTtZQUFPQyxPQUFPO1lBQU9DLFFBQVE7UUFBTTtRQUN6RE0sV0FBVztZQUFFUixNQUFNO1lBQU9DLE9BQU87WUFBT0MsUUFBUTtRQUFNO0lBQ3hEO0lBRUEsT0FBUUw7UUFDTixLQUFLO1lBQ0gsT0FBT1ksT0FBT0MsSUFBSSxDQUFDWixpQkFBaUJhLE1BQU0sQ0FBQyxDQUFDQyxLQUFLQztnQkFDL0NELEdBQUcsQ0FBQ0MsSUFBSSxHQUFHO29CQUFFYixNQUFNO29CQUFNQyxPQUFPO29CQUFNQyxRQUFRO2dCQUFLO2dCQUNuRCxPQUFPVTtZQUNULEdBQUcsQ0FBQztRQUNOLEtBQUs7WUFDSCxPQUFPO2dCQUNMLEdBQUdkLGVBQWU7Z0JBQ2xCQyxpQkFBaUI7b0JBQUVDLE1BQU07b0JBQU1DLE9BQU87b0JBQU1DLFFBQVE7Z0JBQU07Z0JBQzFEQyxxQkFBcUI7b0JBQUVILE1BQU07b0JBQU1DLE9BQU87b0JBQU1DLFFBQVE7Z0JBQU07Z0JB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QWFEO1lBQzNCLHVCQUF1QjtZQUN6QjtZQUVBNUMsUUFBUUMsR0FBRyxDQUFDLENBQUMsV0FBVyxFQUFFUCxVQUFVLE1BQU0sQ0FBQztZQUMzQ0QsSUFBSUcsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUMsU0FBUztZQUErQjtRQUVqRSxPQUFPO1lBQ0xMLElBQUlHLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLFNBQVM7WUFBcUI7UUFDdkQ7SUFDRixFQUFFLE9BQU8rQyxPQUFPO1FBQ2Q3QyxRQUFRNkMsS0FBSyxDQUFDLHFCQUFxQkE7UUFDbkNwRCxJQUFJRyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQ25CQyxTQUFTO1lBQ1QrQyxPQUFPQSxpQkFBaUJDLFFBQVFELE1BQU0vQyxPQUFPLEdBQUc7UUFDbEQ7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0ZS1zZW5zZS1hZG1pbi8uL3NyYy9wYWdlcy9hcGkvYWRtaW4vbWFuYWdlcnMvW21hbmFnZXJJZF0udHM/NzdmYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XHJcbmltcG9ydCB7IER5bmFtb0RCQ2xpZW50IH0gZnJvbSAnQGF3cy1zZGsvY2xpZW50LWR5bmFtb2RiJztcclxuaW1wb3J0IHsgRHluYW1vREJEb2N1bWVudENsaWVudCwgR2V0Q29tbWFuZCwgVXBkYXRlQ29tbWFuZCwgRGVsZXRlQ29tbWFuZCB9IGZyb20gJ0Bhd3Mtc2RrL2xpYi1keW5hbW9kYic7XHJcbmltcG9ydCBBV1NfQ09ORklHIGZyb20gJy4uLy4uLy4uLy4uL2NvbmZpZy9hd3MnO1xyXG5pbXBvcnQgZGF0YVNlcnZpY2UgZnJvbSAnLi4vLi4vLi4vLi4vbGliL2RhdGFTZXJ2aWNlJztcclxuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xyXG5cclxuY29uc3QgSldUX1NFQ1JFVCA9ICdkZXZfand0X3NlY3JldF9rZXlfaGVyZSc7IC8vIGxvZ2luLnRz7JmAIOuPmeydvO2VnCDsi5ztgazrpr8g7YKkXHJcblxyXG5mdW5jdGlvbiBnZXREZWZhdWx0UGVybWlzc2lvbnMocm9sZTogc3RyaW5nKTogUmVjb3JkPHN0cmluZywgUmVjb3JkPHN0cmluZywgYm9vbGVhbj4+IHtcclxuICBjb25zdCBiYXNlUGVybWlzc2lvbnMgPSB7XHJcbiAgICB1c2VyX21hbmFnZW1lbnQ6IHsgcmVhZDogZmFsc2UsIHdyaXRlOiBmYWxzZSwgZGVsZXRlOiBmYWxzZSB9LFxyXG4gICAgbWF0Y2hpbmdfbWFuYWdlbWVudDogeyByZWFkOiBmYWxzZSwgd3JpdGU6IGZhbHNlLCBkZWxldGU6IGZhbHNlIH0sXHJcbiAgICByZXZpZXdfbWFuYWdlbWVudDogeyByZWFkOiBmYWxzZSwgd3JpdGU6IGZhbHNlLCBkZWxldGU6IGZhbHNlIH0sXHJcbiAgICBwb2ludF9tYW5hZ2VtZW50OiB7IHJlYWQ6IGZhbHNlLCB3cml0ZTogZmFsc2UsIGRlbGV0ZTogZmFsc2UgfSxcclxuICAgIG1hbmFnZXJfbWFuYWdlbWVudDogeyByZWFkOiBmYWxzZSwgd3JpdGU6IGZhbHNlLCBkZWxldGU6IGZhbHNlIH0sXHJcbiAgICBtYW5hZ2VyX2xvZ3M6IHsgcmVhZDogZmFsc2UsIHdyaXRlOiBmYWxzZSwgZGVsZXRlOiBmYWxzZSB9LFxyXG4gICAgZGFzaGJvYXJkOiB7IHJlYWQ6IGZhbHNlLCB3cml0ZTogZmFsc2UsIGRlbGV0ZTogZmFsc2UgfVxyXG4gIH07XHJcblxyXG4gIHN3aXRjaCAocm9sZSkge1xyXG4gICAgY2FzZSAnYWRtaW4nOlxyXG4gICAgICByZXR1cm4gT2JqZWN0LmtleXMoYmFzZVBlcm1pc3Npb25zKS5yZWR1Y2UoKGFjYywga2V5KSA9PiB7XHJcbiAgICAgICAgYWNjW2tleV0gPSB7IHJlYWQ6IHRydWUsIHdyaXRlOiB0cnVlLCBkZWxldGU6IHRydWUgfTtcclxuICAgICAgICByZXR1cm4gYWNjO1xyXG4gICAgICB9LCB7fSBhcyBSZWNvcmQ8c3RyaW5nLCBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPj4pO1xyXG4gICAgY2FzZSAnbWFuYWdlcic6XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgLi4uYmFzZVBlcm1pc3Npb25zLFxyXG4gICAgICAgIHVzZXJfbWFuYWdlbWVudDogeyByZWFkOiB0cnVlLCB3cml0ZTogdHJ1ZSwgZGVsZXRlOiBmYWxzZSB9LFxyXG4gICAgICAgIG1hdGNoaW5nX21hbmFnZW1lbnQ6IHsgcmVhZDogdHJ1ZSwgd3JpdGU6IHRydWUsIGRlbGV0ZTogZmFsc2UgfSxcclxuICAgICAgICBwb2ludF9tYW5hZ2VtZW50OiB7IHJlYWQ6IHRydWUsIHdyaXRlOiB0cnVlLCBkZWxldGU6IGZhbHNlIH0sXHJcbiAgICAgICAgbWFuYWdlcl9sb2dzOiB7IHJlYWQ6IGZhbHNlLCB3cml0ZTogZmFsc2UsIGRlbGV0ZTogZmFsc2UgfSxcclxuICAgICAgICBkYXNoYm9hcmQ6IHsgcmVhZDogdHJ1ZSwgd3JpdGU6IGZhbHNlLCBkZWxldGU6IGZhbHNlIH1cclxuICAgICAgfTtcclxuICAgIGNhc2UgJ3N1cHBvcnQnOlxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIC4uLmJhc2VQZXJtaXNzaW9ucyxcclxuICAgICAgICB1c2VyX21hbmFnZW1lbnQ6IHsgcmVhZDogdHJ1ZSwgd3JpdGU6IGZhbHNlLCBkZWxldGU6IGZhbHNlIH0sXHJcbiAgICAgICAgbWF0Y2hpbmdfbWFuYWdlbWVudDogeyByZWFkOiB0cnVlLCB3cml0ZTogZmFsc2UsIGRlbGV0ZTogZmFsc2UgfSxcclxuICAgICAgICBkYXNoYm9hcmQ6IHsgcmVhZDogdHJ1ZSwgd3JpdGU6IGZhbHNlLCBkZWxldGU6IGZhbHNlIH1cclxuICAgICAgfTtcclxuICAgIGRlZmF1bHQ6XHJcbiAgICAgIHJldHVybiBiYXNlUGVybWlzc2lvbnM7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBBV1Mg7ISk7KCVXHJcbmNvbnN0IGNsaWVudCA9IG5ldyBEeW5hbW9EQkNsaWVudChBV1NfQ09ORklHKTtcclxuY29uc3QgZHluYW1vZGIgPSBEeW5hbW9EQkRvY3VtZW50Q2xpZW50LmZyb20oY2xpZW50KTtcclxuXHJcbmludGVyZmFjZSBNYW5hZ2VyIHtcclxuICBpZDogc3RyaW5nO1xyXG4gIGVtYWlsOiBzdHJpbmc7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIHJvbGU6IHN0cmluZztcclxuICBjcmVhdGVkX2F0OiBzdHJpbmc7XHJcbiAgdXBkYXRlZF9hdDogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKFxyXG4gIHJlcTogTmV4dEFwaVJlcXVlc3QsXHJcbiAgcmVzOiBOZXh0QXBpUmVzcG9uc2U8TWFuYWdlciB8IHsgbWVzc2FnZTogc3RyaW5nOyBlcnJvcj86IHN0cmluZyB9PlxyXG4pIHtcclxuICBjb25zdCB7IG1hbmFnZXJJZCB9ID0gcmVxLnF1ZXJ5O1xyXG5cclxuICBpZiAoIW1hbmFnZXJJZCB8fCB0eXBlb2YgbWFuYWdlcklkICE9PSAnc3RyaW5nJykge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ01hbmFnZXIgSUQgaXMgcmVxdWlyZWQnIH0pO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIC8vIOqwnOuwnCDtmZjqsr3sl5DshJzripQg6raM7ZWcIOqygOymnSDsmYTtmZRcclxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xyXG4gICAgICBjb25zb2xlLmxvZygn8J+UpyDqsJzrsJwg7ZmY6rK9OiDqtoztlZwg6rKA7KadIOqxtOuEiOucgCcpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gQWRtaW4g6raM7ZWcIO2ZleyduCAoYWRtaW4g7Jet7ZWg7J2EIOqwgOynhCBNYW5hZ2Vy66eMIOygkeq3vCDqsIDriqUpXHJcbiAgICAgIGNvbnN0IGF1dGhIZWFkZXIgPSByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uO1xyXG4gICAgICBpZiAoIWF1dGhIZWFkZXIgfHwgIWF1dGhIZWFkZXIuc3RhcnRzV2l0aCgnQmVhcmVyICcpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAocmVxLm1ldGhvZCA9PT0gJ0dFVCcpIHtcclxuICAgICAgY29uc29sZS5sb2coYEFkbWluOiDrp6Tri4jsoIAgJHttYW5hZ2VySWR9IOyhsO2ajCDsi5zsnpFgKTtcclxuXHJcbiAgICAgIGNvbnN0IHBhcmFtcyA9IHtcclxuICAgICAgICBUYWJsZU5hbWU6ICdNYW5hZ2VycycsXHJcbiAgICAgICAgS2V5OiB7IGlkOiBtYW5hZ2VySWQgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZHluYW1vZGIuc2VuZChuZXcgR2V0Q29tbWFuZChwYXJhbXMpKTtcclxuICAgICAgXHJcbiAgICAgIGlmICghcmVzdWx0Lkl0ZW0pIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhg66ek64uI7KCAICR7bWFuYWdlcklkfeulvCDssL7snYQg7IiYIOyXhuyKteuLiOuLpC5gKTtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnTWFuYWdlciBub3QgZm91bmQnIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBtYW5hZ2VyID0ge1xyXG4gICAgICAgIGlkOiByZXN1bHQuSXRlbS5pZCB8fCAnJyxcclxuICAgICAgICBlbWFpbDogcmVzdWx0Lkl0ZW0uZW1haWwgfHwgJycsXHJcbiAgICAgICAgbmFtZTogcmVzdWx0Lkl0ZW0ubmFtZSB8fCAnJyxcclxuICAgICAgICByb2xlOiByZXN1bHQuSXRlbS5yb2xlIHx8ICdtYW5hZ2VyJyxcclxuICAgICAgICBzdGF0dXM6IHJlc3VsdC5JdGVtLnN0YXR1cyB8fCAnYWN0aXZlJyxcclxuICAgICAgICBwZXJtaXNzaW9uczogcmVzdWx0Lkl0ZW0ucGVybWlzc2lvbnMgfHwgZ2V0RGVmYXVsdFBlcm1pc3Npb25zKHJlc3VsdC5JdGVtLnJvbGUgfHwgJ21hbmFnZXInKSxcclxuICAgICAgICBjcmVhdGVkX2F0OiByZXN1bHQuSXRlbS5jcmVhdGVkQXQgfHwgcmVzdWx0Lkl0ZW0uY3JlYXRlZF9hdCB8fCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgdXBkYXRlZF9hdDogcmVzdWx0Lkl0ZW0udXBkYXRlZEF0IHx8IHJlc3VsdC5JdGVtLnVwZGF0ZWRfYXQgfHwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zb2xlLmxvZyhgQWRtaW46IOunpOuLiOyggCAke21hbmFnZXJJZH0g7KGw7ZqMIOyZhOujjGApO1xyXG4gICAgICByZXMuc3RhdHVzKDIwMCkuanNvbihtYW5hZ2VyKTtcclxuXHJcbiAgICB9IGVsc2UgaWYgKHJlcS5tZXRob2QgPT09ICdQQVRDSCcpIHtcclxuICAgICAgY29uc29sZS5sb2coYEFkbWluOiDrp6Tri4jsoIAgJHttYW5hZ2VySWR9IOyXheuNsOydtO2KuCDsi5zsnpFgKTtcclxuXHJcbiAgICAgIC8vIOq2jO2VnCDqsoDspp0gKOyekOyLoOydmCDsnbTrpoTrp4wg67OA6rK97ZWY64qUIOqyveyasOuKlCDsoJzsmbgpXHJcbiAgICAgIGNvbnN0IHVwZGF0ZUZpZWxkcyA9IHJlcS5ib2R5O1xyXG4gICAgICBjb25zdCBpc09ubHlOYW1lVXBkYXRlID0gT2JqZWN0LmtleXModXBkYXRlRmllbGRzKS5sZW5ndGggPT09IDEgJiYgdXBkYXRlRmllbGRzLm5hbWU7XHJcbiAgICAgIFxyXG4gICAgICBpZiAoIWlzT25seU5hbWVVcGRhdGUpIHtcclxuICAgICAgICAvLyDqsJzrsJwg7ZmY6rK97JeQ7ISc64qUIOq2jO2VnCDqsoDspp0g7JmE7ZmUXHJcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+UpyDqsJzrsJwg7ZmY6rK9OiDqtoztlZwg6rKA7KadIOqxtOuEiOucgCcpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAvLyBBZG1pbiDqtoztlZwg7ZmV7J24IChhZG1pbiDsl63tlaDsnYQg6rCA7KeEIE1hbmFnZXLrp4wg7KCR6re8IOqwgOuKpSlcclxuICAgICAgICAgIGNvbnN0IGF1dGhIZWFkZXIgPSByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uO1xyXG4gICAgICAgICAgaWYgKCFhdXRoSGVhZGVyIHx8ICFhdXRoSGVhZGVyLnN0YXJ0c1dpdGgoJ0JlYXJlciAnKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVW5hdXRob3JpemVkJyB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gSldUIO2GoO2BsOyXkOyEnCDrp6Tri4jsoIAgSUQg7LaU7Lac7ZWY7JesIOq2jO2VnCDtmZXsnbhcclxuICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRva2VuID0gYXV0aEhlYWRlci5zdWJzdHJpbmcoNyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRlY29kZWQgPSBqd3QudmVyaWZ5KHRva2VuLCBKV1RfU0VDUkVUKSBhcyBhbnk7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRNYW5hZ2VySWQgPSBkZWNvZGVkLnVzZXJJZDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIOyekOyLoOydmCDsoJXrs7TqsIAg7JWE64uI6rOgLCBhZG1pbiDqtoztlZzsnbQg7JeG64qUIOqyveyasCDqsbDrtoBcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnRNYW5hZ2VySWQgIT09IG1hbmFnZXJJZCAmJiBkZWNvZGVkLnJvbGUgIT09ICdhZG1pbicpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBtZXNzYWdlOiAn6raM7ZWc7J20IOyXhuyKteuLiOuLpC4nIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGNhdGNoICh0b2tlbkVycm9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdJbnZhbGlkIHRva2VuJyB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ/CflKcg7J6Q7Iug7J2YIOydtOumhCDrs4Dqsr06IOq2jO2VnCDqsoDspp0g6rG064SI65yAJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHVwZGF0ZVBhcmFtczogYW55ID0ge1xyXG4gICAgICAgIFRhYmxlTmFtZTogJ01hbmFnZXJzJyxcclxuICAgICAgICBLZXk6IHsgaWQ6IG1hbmFnZXJJZCB9LFxyXG4gICAgICAgIFVwZGF0ZUV4cHJlc3Npb246ICdTRVQgdXBkYXRlZEF0ID0gOnVwZGF0ZWRfYXQnLFxyXG4gICAgICAgIEV4cHJlc3Npb25BdHRyaWJ1dGVWYWx1ZXM6IHtcclxuICAgICAgICAgICc6dXBkYXRlZF9hdCc6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgRXhwcmVzc2lvbkF0dHJpYnV0ZU5hbWVzOiB7fVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgaWYgKHVwZGF0ZUZpZWxkcy5uYW1lKSB7XHJcbiAgICAgICAgdXBkYXRlUGFyYW1zLlVwZGF0ZUV4cHJlc3Npb24gKz0gJywgI25hbWUgPSA6bmFtZSc7XHJcbiAgICAgICAgdXBkYXRlUGFyYW1zLkV4cHJlc3Npb25BdHRyaWJ1dGVOYW1lc1snI25hbWUnXSA9ICduYW1lJztcclxuICAgICAgICB1cGRhdGVQYXJhbXMuRXhwcmVzc2lvbkF0dHJpYnV0ZVZhbHVlc1snOm5hbWUnXSA9IHVwZGF0ZUZpZWxkcy5uYW1lO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh1cGRhdGVGaWVsZHMuZW1haWwpIHtcclxuICAgICAgICB1cGRhdGVQYXJhbXMuVXBkYXRlRXhwcmVzc2lvbiArPSAnLCBlbWFpbCA9IDplbWFpbCc7XHJcbiAgICAgICAgdXBkYXRlUGFyYW1zLkV4cHJlc3Npb25BdHRyaWJ1dGVWYWx1ZXNbJzplbWFpbCddID0gdXBkYXRlRmllbGRzLmVtYWlsO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh1cGRhdGVGaWVsZHMucm9sZSkge1xyXG4gICAgICAgIHVwZGF0ZVBhcmFtcy5VcGRhdGVFeHByZXNzaW9uICs9ICcsIHJvbGUgPSA6cm9sZSc7XHJcbiAgICAgICAgdXBkYXRlUGFyYW1zLkV4cHJlc3Npb25BdHRyaWJ1dGVWYWx1ZXNbJzpyb2xlJ10gPSB1cGRhdGVGaWVsZHMucm9sZTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodXBkYXRlRmllbGRzLnBlcm1pc3Npb25zKSB7XHJcbiAgICAgICAgdXBkYXRlUGFyYW1zLlVwZGF0ZUV4cHJlc3Npb24gKz0gJywgI3Blcm1zID0gOnBlcm1pc3Npb25zJztcclxuICAgICAgICB1cGRhdGVQYXJhbXMuRXhwcmVzc2lvbkF0dHJpYnV0ZU5hbWVzWycjcGVybXMnXSA9ICdwZXJtaXNzaW9ucyc7XHJcbiAgICAgICAgdXBkYXRlUGFyYW1zLkV4cHJlc3Npb25BdHRyaWJ1dGVWYWx1ZXNbJzpwZXJtaXNzaW9ucyddID0gdXBkYXRlRmllbGRzLnBlcm1pc3Npb25zO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBhd2FpdCBkeW5hbW9kYi5zZW5kKG5ldyBVcGRhdGVDb21tYW5kKHVwZGF0ZVBhcmFtcykpO1xyXG5cclxuICAgICAgLy8g7JeF642w7J207Yq465CcIOuNsOydtO2EsCDsobDtmoxcclxuICAgICAgY29uc3QgZ2V0UGFyYW1zID0ge1xyXG4gICAgICAgIFRhYmxlTmFtZTogJ01hbmFnZXJzJyxcclxuICAgICAgICBLZXk6IHsgaWQ6IG1hbmFnZXJJZCB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkeW5hbW9kYi5zZW5kKG5ldyBHZXRDb21tYW5kKGdldFBhcmFtcykpO1xyXG4gICAgICBcclxuICAgICAgaWYgKCFyZXN1bHQuSXRlbSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdNYW5hZ2VyIG5vdCBmb3VuZCcgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IG1hbmFnZXIgPSB7XHJcbiAgICAgICAgaWQ6IHJlc3VsdC5JdGVtLmlkIHx8ICcnLFxyXG4gICAgICAgIGVtYWlsOiByZXN1bHQuSXRlbS5lbWFpbCB8fCAnJyxcclxuICAgICAgICBuYW1lOiByZXN1bHQuSXRlbS5uYW1lIHx8ICcnLFxyXG4gICAgICAgIHJvbGU6IHJlc3VsdC5JdGVtLnJvbGUgfHwgJ21hbmFnZXInLFxyXG4gICAgICAgIHN0YXR1czogcmVzdWx0Lkl0ZW0uc3RhdHVzIHx8ICdhY3RpdmUnLFxyXG4gICAgICAgIHBlcm1pc3Npb25zOiByZXN1bHQuSXRlbS5wZXJtaXNzaW9ucyB8fCBnZXREZWZhdWx0UGVybWlzc2lvbnMocmVzdWx0Lkl0ZW0ucm9sZSB8fCAnbWFuYWdlcicpLFxyXG4gICAgICAgIGNyZWF0ZWRfYXQ6IHJlc3VsdC5JdGVtLmNyZWF0ZWRBdCB8fCByZXN1bHQuSXRlbS5jcmVhdGVkX2F0IHx8IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICB1cGRhdGVkX2F0OiByZXN1bHQuSXRlbS51cGRhdGVkQXQgfHwgcmVzdWx0Lkl0ZW0udXBkYXRlZF9hdCB8fCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKGBBZG1pbjog66ek64uI7KCAICR7bWFuYWdlcklkfSDsl4XrjbDsnbTtirgg7JmE66OMYCk7XHJcbiAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKG1hbmFnZXIpO1xyXG5cclxuICAgIH0gZWxzZSBpZiAocmVxLm1ldGhvZCA9PT0gJ0RFTEVURScpIHtcclxuICAgICAgY29uc29sZS5sb2coYEFkbWluOiDrp6Tri4jsoIAgJHttYW5hZ2VySWR9IOyCreygnCDsi5zsnpFgKTtcclxuXHJcbiAgICAgIC8vIOyCreygnO2VoCDrp6Tri4jsoIAg7KCV67O0IOyhsO2ajFxyXG4gICAgICBjb25zdCBnZXRQYXJhbXMgPSB7XHJcbiAgICAgICAgVGFibGVOYW1lOiAnTWFuYWdlcnMnLFxyXG4gICAgICAgIEtleTogeyBpZDogbWFuYWdlcklkIH1cclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IG1hbmFnZXJSZXN1bHQgPSBhd2FpdCBkeW5hbW9kYi5zZW5kKG5ldyBHZXRDb21tYW5kKGdldFBhcmFtcykpO1xyXG4gICAgICBpZiAoIW1hbmFnZXJSZXN1bHQuSXRlbSkge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdNYW5hZ2VyIG5vdCBmb3VuZCcgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IG1hbmFnZXJUb0RlbGV0ZSA9IG1hbmFnZXJSZXN1bHQuSXRlbTtcclxuXHJcbiAgICAgIC8vIOunpOuLiOyggCDsgq3soJxcclxuICAgICAgY29uc3QgZGVsZXRlUGFyYW1zID0ge1xyXG4gICAgICAgIFRhYmxlTmFtZTogJ01hbmFnZXJzJyxcclxuICAgICAgICBLZXk6IHsgaWQ6IG1hbmFnZXJJZCB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBhd2FpdCBkeW5hbW9kYi5zZW5kKG5ldyBEZWxldGVDb21tYW5kKGRlbGV0ZVBhcmFtcykpO1xyXG5cclxuICAgICAgLy8g66Gc6re4IOq4sOuhnVxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGF1dGhIZWFkZXIgPSByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uO1xyXG4gICAgICAgIGlmIChhdXRoSGVhZGVyICYmIGF1dGhIZWFkZXIuc3RhcnRzV2l0aCgnQmVhcmVyICcpKSB7XHJcbiAgICAgICAgICBjb25zdCB0b2tlbiA9IGF1dGhIZWFkZXIuc3Vic3RyaW5nKDcpO1xyXG4gICAgICAgICAgLy8g7Yag7YGw7JeQ7IScIOunpOuLiOyggCBJRCDstpTstpwgKOyLpOygnOuhnOuKlCBKV1Qg65SU7L2U65SpIO2VhOyalClcclxuICAgICAgICAgIGNvbnN0IGN1cnJlbnRNYW5hZ2VySWQgPSAnYWRtaW4nOyAvLyDsnoTsi5zroZwgYWRtaW7snLzroZwg7ISk7KCVXHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGF3YWl0IGRhdGFTZXJ2aWNlLmxvZ01hbmFnZXJBY3Rpb24oXHJcbiAgICAgICAgICAgIGN1cnJlbnRNYW5hZ2VySWQsXHJcbiAgICAgICAgICAgICdtYW5hZ2VyX2RlbGV0ZScsXHJcbiAgICAgICAgICAgIG1hbmFnZXJJZCxcclxuICAgICAgICAgICAgYOunpOuLiOyggCDsgq3soJw6ICR7bWFuYWdlclRvRGVsZXRlLm5hbWV9ICgke21hbmFnZXJUb0RlbGV0ZS5lbWFpbH0pYFxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2ggKGxvZ0Vycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcign66Gc6re4IOq4sOuhnSDsi6TtjKg6JywgbG9nRXJyb3IpO1xyXG4gICAgICAgIC8vIOuhnOq3uCDquLDroZ0g7Iuk7Yyo7ZW064+EIOyCreygnOuKlCDqs4Tsho0g7KeE7ZaJXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKGBBZG1pbjog66ek64uI7KCAICR7bWFuYWdlcklkfSDsgq3soJwg7JmE66OMYCk7XHJcbiAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ01hbmFnZXIgZGVsZXRlZCBzdWNjZXNzZnVsbHknIH0pO1xyXG5cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgbWVzc2FnZTogJ01ldGhvZCBub3QgYWxsb3dlZCcgfSk7XHJcbiAgICB9XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0FkbWluOiDrp6Tri4jsoIAg6rSA66asIOyYpOulmDonLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IFxyXG4gICAgICBtZXNzYWdlOiAn66ek64uI7KCAIOq0gOumrCDspJEg7Jik66WY6rCAIOuwnOyDne2WiOyKteuLiOuLpC4nLFxyXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcclxuICAgIH0pO1xyXG4gIH1cclxufSAiXSwibmFtZXMiOlsiRHluYW1vREJDbGllbnQiLCJEeW5hbW9EQkRvY3VtZW50Q2xpZW50IiwiR2V0Q29tbWFuZCIsIlVwZGF0ZUNvbW1hbmQiLCJEZWxldGVDb21tYW5kIiwiQVdTX0NPTkZJRyIsImRhdGFTZXJ2aWNlIiwiand0IiwiSldUX1NFQ1JFVCIsImdldERlZmF1bHRQZXJtaXNzaW9ucyIsInJvbGUiLCJiYXNlUGVybWlzc2lvbnMiLCJ1c2VyX21hbmFnZW1lbnQiLCJyZWFkIiwid3JpdGUiLCJkZWxldGUiLCJtYXRjaGluZ19tYW5hZ2VtZW50IiwicmV2aWV3X21hbmFnZW1lbnQiLCJwb2ludF9tYW5hZ2VtZW50IiwibWFuYWdlcl9tYW5hZ2VtZW50IiwibWFuYWdlcl9sb2dzIiwiZGFzaGJvYXJkIiwiT2JqZWN0Iiwia2V5cyIsInJlZHVjZSIsImFjYyIsImtleSIsImNsaWVudCIsImR5bmFtb2RiIiwiZnJvbSIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtYW5hZ2VySWQiLCJxdWVyeSIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwicHJvY2VzcyIsImNvbnNvbGUiLCJsb2ciLCJhdXRoSGVhZGVyIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJzdGFydHNXaXRoIiwibWV0aG9kIiwicGFyYW1zIiwiVGFibGVOYW1lIiwiS2V5IiwiaWQiLCJyZXN1bHQiLCJzZW5kIiwiSXRlbSIsIm1hbmFnZXIiLCJlbWFpbCIsIm5hbWUiLCJwZXJtaXNzaW9ucyIsImNyZWF0ZWRfYXQiLCJjcmVhdGVkQXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJ1cGRhdGVkX2F0IiwidXBkYXRlZEF0IiwidXBkYXRlRmllbGRzIiwiYm9keSIsImlzT25seU5hbWVVcGRhdGUiLCJsZW5ndGgiLCJ0b2tlbiIsInN1YnN0cmluZyIsImRlY29kZWQiLCJ2ZXJpZnkiLCJjdXJyZW50TWFuYWdlcklkIiwidXNlcklkIiwidG9rZW5FcnJvciIsInVwZGF0ZVBhcmFtcyIsIlVwZGF0ZUV4cHJlc3Npb24iLCJFeHByZXNzaW9uQXR0cmlidXRlVmFsdWVzIiwiRXhwcmVzc2lvbkF0dHJpYnV0ZU5hbWVzIiwiZ2V0UGFyYW1zIiwibWFuYWdlclJlc3VsdCIsIm1hbmFnZXJUb0RlbGV0ZSIsImRlbGV0ZVBhcmFtcyIsImxvZ01hbmFnZXJBY3Rpb24iLCJsb2dFcnJvciIsImVycm9yIiwiRXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/admin/managers/[managerId].ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Fmanagers%2F%5BmanagerId%5D&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cadmin%5Cmanagers%5C%5BmanagerId%5D.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();