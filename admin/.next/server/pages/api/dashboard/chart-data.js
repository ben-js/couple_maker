"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/dashboard/chart-data";
exports.ids = ["pages/api/dashboard/chart-data"];
exports.modules = {

/***/ "@aws-sdk/client-dynamodb":
/*!*******************************************!*\
  !*** external "@aws-sdk/client-dynamodb" ***!
  \*******************************************/
/***/ ((module) => {

module.exports = require("@aws-sdk/client-dynamodb");

/***/ }),

/***/ "@aws-sdk/lib-dynamodb":
/*!****************************************!*\
  !*** external "@aws-sdk/lib-dynamodb" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("@aws-sdk/lib-dynamodb");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fdashboard%2Fchart-data&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cdashboard%5Cchart-data.ts&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fdashboard%2Fchart-data&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cdashboard%5Cchart-data.ts&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_dashboard_chart_data_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src\\pages\\api\\dashboard\\chart-data.ts */ \"(api)/./src/pages/api/dashboard/chart-data.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_dashboard_chart_data_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_dashboard_chart_data_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/dashboard/chart-data\",\n        pathname: \"/api/dashboard/chart-data\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_dashboard_chart_data_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmRhc2hib2FyZCUyRmNoYXJ0LWRhdGEmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZzcmMlNUNwYWdlcyU1Q2FwaSU1Q2Rhc2hib2FyZCU1Q2NoYXJ0LWRhdGEudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDd0U7QUFDeEU7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLG1FQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxtRUFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kYXRlLXNlbnNlLWFkbWluLz85NmY0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9zcmNcXFxccGFnZXNcXFxcYXBpXFxcXGRhc2hib2FyZFxcXFxjaGFydC1kYXRhLnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvZGFzaGJvYXJkL2NoYXJ0LWRhdGFcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9kYXNoYm9hcmQvY2hhcnQtZGF0YVwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fdashboard%2Fchart-data&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cdashboard%5Cchart-data.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/config/aws.ts":
/*!***************************!*\
  !*** ./src/config/aws.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/**\n * AWS 공통 설정\n * @module config/aws\n * @description Admin에서 모든 AWS 서비스에서 공통으로 사용하는 설정\n */ const AWS_CONFIG = {\n    region: \"ap-northeast-2\",\n    credentials: {\n        accessKeyId: \"AKIAU2GJ5ZJPVVVU5C4W\",\n        secretAccessKey: \"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\"\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AWS_CONFIG);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvY29uZmlnL2F3cy50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7Ozs7Q0FJQyxHQUlELE1BQU1BLGFBQW1DO0lBQ3ZDQyxRQUFRO0lBQ1JDLGFBQWE7UUFDWEMsYUFBYTtRQUNiQyxpQkFBaUI7SUFDbkI7QUFDRjtBQUVBLGlFQUFlSixVQUFVQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0ZS1zZW5zZS1hZG1pbi8uL3NyYy9jb25maWcvYXdzLnRzPzVlNDMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBBV1Mg6rO17Ya1IOyEpOyglVxuICogQG1vZHVsZSBjb25maWcvYXdzXG4gKiBAZGVzY3JpcHRpb24gQWRtaW7sl5DshJwg66qo65OgIEFXUyDshJzruYTsiqTsl5DshJwg6rO17Ya17Jy866GcIOyCrOyaqe2VmOuKlCDshKTsoJVcbiAqL1xuXG5pbXBvcnQgeyBEeW5hbW9EQkNsaWVudENvbmZpZyB9IGZyb20gJ0Bhd3Mtc2RrL2NsaWVudC1keW5hbW9kYic7XG5cbmNvbnN0IEFXU19DT05GSUc6IER5bmFtb0RCQ2xpZW50Q29uZmlnID0ge1xuICByZWdpb246ICdhcC1ub3J0aGVhc3QtMicsXG4gIGNyZWRlbnRpYWxzOiB7XG4gICAgYWNjZXNzS2V5SWQ6ICdBS0lBVTJHSjVaSlBWVlZVNUM0VycsXG4gICAgc2VjcmV0QWNjZXNzS2V5OiAnMmtUMy9nK01kdHloZ3NndlEzN1FGVnRFRTVKWWo2a0xOSWZyRExubicsXG4gIH0sXG59O1xuXG5leHBvcnQgZGVmYXVsdCBBV1NfQ09ORklHOyAiXSwibmFtZXMiOlsiQVdTX0NPTkZJRyIsInJlZ2lvbiIsImNyZWRlbnRpYWxzIiwiYWNjZXNzS2V5SWQiLCJzZWNyZXRBY2Nlc3NLZXkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/config/aws.ts\n");

/***/ }),

/***/ "(api)/./src/lib/dataService.ts":
/*!********************************!*\
  !*** ./src/lib/dataService.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   dynamodb: () => (/* binding */ dynamodb),\n/* harmony export */   getUserScoreHistory: () => (/* binding */ getUserScoreHistory),\n/* harmony export */   saveUserScore: () => (/* binding */ saveUserScore)\n/* harmony export */ });\n/* harmony import */ var _aws_sdk_client_dynamodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-sdk/client-dynamodb */ \"@aws-sdk/client-dynamodb\");\n/* harmony import */ var _aws_sdk_client_dynamodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_aws_sdk_client_dynamodb__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-sdk/lib-dynamodb */ \"@aws-sdk/lib-dynamodb\");\n/* harmony import */ var _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _config_aws__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../config/aws */ \"(api)/./src/config/aws.ts\");\n\n\n\n// AWS 설정\nconst client = new _aws_sdk_client_dynamodb__WEBPACK_IMPORTED_MODULE_0__.DynamoDBClient(_config_aws__WEBPACK_IMPORTED_MODULE_2__[\"default\"]);\nconst dynamodb = _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.DynamoDBDocumentClient.from(client);\n// DynamoDB 클라이언트를 export하여 다른 모듈에서 사용할 수 있도록 함\n\nclass DataService {\n    // 매니저 계정 관련 메서드\n    async getManagerByEmail(email) {\n        const params = {\n            TableName: \"Managers\",\n            IndexName: \"EmailIndex\",\n            KeyConditionExpression: \"email = :email\",\n            ExpressionAttributeValues: {\n                \":email\": email\n            }\n        };\n        try {\n            const result = await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.QueryCommand(params));\n            return result.Items?.[0] || null;\n        } catch (error) {\n            console.error(\"매니저 계정 조회 오류:\", error);\n            throw error;\n        }\n    }\n    async getManagerById(managerId) {\n        const params = {\n            TableName: \"Managers\",\n            Key: {\n                id: managerId\n            }\n        };\n        try {\n            const result = await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.GetCommand(params));\n            return result.Item || null;\n        } catch (error) {\n            console.error(\"매니저 계정 조회 오류:\", error);\n            throw error;\n        }\n    }\n    // 일반 사용자 관련 메서드 (기존 Users 테이블 사용)\n    async getUsers() {\n        const params = {\n            TableName: \"Users\"\n        };\n        try {\n            const result = await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.ScanCommand(params));\n            return result.Items || [];\n        } catch (error) {\n            console.error(\"사용자 조회 오류:\", error);\n            throw error;\n        }\n    }\n    async getUserById(userId) {\n        console.log(\"DataService.getUserById 호출됨, userId:\", userId);\n        const params = {\n            TableName: \"Users\",\n            Key: {\n                user_id: userId\n            }\n        };\n        console.log(\"DynamoDB 파라미터:\", params);\n        try {\n            const result = await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.GetCommand(params));\n            console.log(\"DynamoDB 응답:\", result);\n            console.log(\"조회된 사용자:\", result.Item);\n            return result.Item || null;\n        } catch (error) {\n            console.error(\"사용자 조회 오류:\", error);\n            throw error;\n        }\n    }\n    async getProfile(userId) {\n        console.log(\"DataService.getProfile 호출됨, userId:\", userId);\n        const params = {\n            TableName: \"Profiles\",\n            Key: {\n                user_id: userId\n            }\n        };\n        console.log(\"프로필 조회 파라미터:\", params);\n        try {\n            const result = await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.GetCommand(params));\n            console.log(\"프로필 조회 결과:\", result.Item);\n            return result.Item || null;\n        } catch (error) {\n            console.error(\"프로필 조회 오류:\", error);\n            // 프로필이 없어도 오류로 처리하지 않음\n            return null;\n        }\n    }\n    async getPreferences(userId) {\n        console.log(\"DataService.getPreferences 호출됨, userId:\", userId);\n        const params = {\n            TableName: \"Preferences\",\n            Key: {\n                user_id: userId\n            }\n        };\n        console.log(\"선호도 조회 파라미터:\", params);\n        try {\n            const result = await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.GetCommand(params));\n            console.log(\"선호도 조회 결과:\", result.Item);\n            return result.Item || null;\n        } catch (error) {\n            console.error(\"선호도 조회 오류:\", error);\n            // 선호도가 없어도 오류로 처리하지 않음\n            return null;\n        }\n    }\n    async updateUserStatus(userId, status, reason) {\n        const params = {\n            TableName: \"Users\",\n            Key: {\n                user_id: userId\n            },\n            UpdateExpression: \"SET #status = :status, updated_at = :updatedAt\",\n            ExpressionAttributeNames: {\n                \"#status\": \"status\"\n            },\n            ExpressionAttributeValues: {\n                \":status\": status,\n                \":updatedAt\": new Date().toISOString()\n            },\n            ReturnValues: \"ALL_NEW\"\n        };\n        if (reason) {\n            params.UpdateExpression += \", delete_reason = :reason\";\n            params.ExpressionAttributeValues[\":reason\"] = reason;\n        }\n        try {\n            const result = await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.UpdateCommand(params));\n            return result.Attributes || null;\n        } catch (error) {\n            console.error(\"사용자 상태 업데이트 오류:\", error);\n            throw error;\n        }\n    }\n    async updateUserGrade(userId, grade) {\n        const params = {\n            TableName: \"Users\",\n            Key: {\n                user_id: userId\n            },\n            UpdateExpression: \"SET grade = :grade, updated_at = :updatedAt\",\n            ExpressionAttributeValues: {\n                \":grade\": grade,\n                \":updatedAt\": new Date().toISOString()\n            },\n            ReturnValues: \"ALL_NEW\"\n        };\n        try {\n            const result = await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.UpdateCommand(params));\n            return result.Attributes || null;\n        } catch (error) {\n            console.error(\"사용자 등급 업데이트 오류:\", error);\n            throw error;\n        }\n    }\n    // 매칭 관련 메서드\n    async getMatchingRequests(status) {\n        const params = {\n            TableName: \"MatchingRequests\"\n        };\n        if (status) {\n            params.FilterExpression = \"#status = :status\";\n            params.ExpressionAttributeNames = {\n                \"#status\": \"status\"\n            };\n            params.ExpressionAttributeValues = {\n                \":status\": status\n            };\n        }\n        try {\n            const result = await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.ScanCommand(params));\n            return result.Items || [];\n        } catch (error) {\n            console.error(\"매칭 요청 조회 오류:\", error);\n            throw error;\n        }\n    }\n    async getProposals(status) {\n        const params = {\n            TableName: \"Proposals\"\n        };\n        if (status) {\n            params.FilterExpression = \"#status = :status\";\n            params.ExpressionAttributeNames = {\n                \"#status\": \"status\"\n            };\n            params.ExpressionAttributeValues = {\n                \":status\": status\n            };\n        }\n        try {\n            const result = await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.ScanCommand(params));\n            return result.Items || [];\n        } catch (error) {\n            console.error(\"제안 조회 오류:\", error);\n            throw error;\n        }\n    }\n    async getMatchPairs() {\n        const params = {\n            TableName: \"MatchPairs\"\n        };\n        try {\n            const result = await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.ScanCommand(params));\n            return result.Items || [];\n        } catch (error) {\n            console.error(\"매칭 페어 조회 오류:\", error);\n            throw error;\n        }\n    }\n    async getMatchingHistory() {\n        const params = {\n            TableName: \"MatchingHistory\"\n        };\n        try {\n            const result = await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.ScanCommand(params));\n            return result.Items || [];\n        } catch (error) {\n            console.error(\"매칭 이력 조회 오류:\", error);\n            throw error;\n        }\n    }\n    async getReviews() {\n        const params = {\n            TableName: \"Reviews\"\n        };\n        try {\n            const result = await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.ScanCommand(params));\n            return result.Items || [];\n        } catch (error) {\n            console.error(\"리뷰 조회 오류:\", error);\n            throw error;\n        }\n    }\n    // 포인트 관련 메서드\n    async getPointHistory(userId) {\n        const params = {\n            TableName: \"PointHistory\"\n        };\n        if (userId) {\n            params.KeyConditionExpression = \"user_id = :userId\";\n            params.ExpressionAttributeValues = {\n                \":userId\": userId\n            };\n            params.ScanIndexForward = false; // 최신순\n        }\n        try {\n            const result = userId ? await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.QueryCommand(params)) : await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.ScanCommand(params));\n            return result.Items || [];\n        } catch (error) {\n            console.error(\"포인트 내역 조회 오류:\", error);\n            throw error;\n        }\n    }\n    // 사용자 상태 이력 관련 메서드\n    async getUserStatusHistory(userId) {\n        const params = {\n            TableName: \"UserStatusHistory\"\n        };\n        if (userId) {\n            params.KeyConditionExpression = \"user_id = :userId\";\n            params.ExpressionAttributeValues = {\n                \":userId\": userId\n            };\n            params.ScanIndexForward = false; // 최신순\n        }\n        try {\n            const result = userId ? await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.QueryCommand(params)) : await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.ScanCommand(params));\n            return result.Items || [];\n        } catch (error) {\n            console.error(\"사용자 상태 이력 조회 오류:\", error);\n            throw error;\n        }\n    }\n    // 매니저 로그 관련 메서드\n    async logManagerAction(managerId, actionType, targetId, details) {\n        const params = {\n            TableName: \"ManagerLogs\",\n            Item: {\n                id: `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n                timestamp: new Date().toISOString(),\n                managerId: managerId,\n                action: actionType,\n                targetId: targetId,\n                details: details\n            }\n        };\n        try {\n            await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.PutCommand(params));\n            console.log(\"✅ 매니저 로그 저장 완료:\", params.Item);\n        } catch (error) {\n            console.error(\"매니저 액션 로그 저장 오류:\", error);\n            throw error;\n        }\n    }\n    async getManagerLogs(limit = 50, managerId, action) {\n        const params = {\n            TableName: \"ManagerLogs\",\n            Limit: limit\n        };\n        if (managerId || action) {\n            params.FilterExpression = [];\n            params.ExpressionAttributeValues = {};\n            if (managerId) {\n                params.FilterExpression.push(\"managerId = :managerId\");\n                params.ExpressionAttributeValues[\":managerId\"] = managerId;\n            }\n            if (action) {\n                params.FilterExpression.push(\"action = :action\");\n                params.ExpressionAttributeValues[\":action\"] = action;\n            }\n            params.FilterExpression = params.FilterExpression.join(\" AND \");\n        }\n        try {\n            const result = await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.ScanCommand(params));\n            const logs = result.Items || [];\n            // 실제 테이블 스키마에 맞게 변환\n            const convertedLogs = logs.map((log)=>({\n                    id: log.id,\n                    manager_id: log.managerId,\n                    action_type: log.action,\n                    target_id: log.targetId,\n                    details: log.details,\n                    created_at: log.timestamp\n                }));\n            return convertedLogs.sort((a, b)=>new Date(b.created_at).getTime() - new Date(a.created_at).getTime());\n        } catch (error) {\n            console.error(\"매니저 로그 조회 오류:\", error);\n            throw error;\n        }\n    }\n    // 유틸리티 메서드\n    getTargetType(targetId) {\n        if (targetId.startsWith(\"user_\")) return \"user\";\n        if (targetId.startsWith(\"match_\")) return \"match\";\n        return \"unknown\";\n    }\n    // 대시보드 통계 메서드\n    async getDashboardStats() {\n        try {\n            const [users, matches, points] = await Promise.all([\n                this.getUsers(),\n                this.getMatchingHistory(),\n                this.getPointHistory()\n            ]);\n            const totalUsers = users.length;\n            const activeUsers = users.filter((user)=>user.status === \"active\" || user.status === \"green\").length;\n            const totalMatches = matches.length;\n            const totalPoints = points.reduce((sum, point)=>sum + point.amount, 0);\n            const totalRevenue = points.filter((point)=>point.type === \"charge\" || point.amount > 0).reduce((sum, point)=>sum + Math.abs(point.amount), 0);\n            return {\n                totalUsers,\n                activeUsers,\n                totalMatches,\n                totalPoints,\n                totalRevenue\n            };\n        } catch (error) {\n            console.error(\"대시보드 통계 조회 오류:\", error);\n            throw error;\n        }\n    }\n    // 최근 활동 메서드\n    async getRecentActivities(limit = 10) {\n        try {\n            const [users, matches, points] = await Promise.all([\n                this.getUsers(),\n                this.getMatchingHistory(),\n                this.getPointHistory()\n            ]);\n            const activities = [];\n            // 최근 가입한 사용자들\n            const recentUsers = users.sort((a, b)=>new Date(b.created_at).getTime() - new Date(a.created_at).getTime()).slice(0, 3);\n            recentUsers.forEach((user)=>{\n                activities.push({\n                    id: user.user_id,\n                    type: \"user_signup\",\n                    description: `새로운 사용자가 가입했습니다: ${user.email}`,\n                    timestamp: user.created_at,\n                    user: user.email\n                });\n            });\n            // 최근 매칭 활동\n            const recentMatches = matches.sort((a, b)=>new Date(b.created_at).getTime() - new Date(a.created_at).getTime()).slice(0, 3);\n            recentMatches.forEach((match)=>{\n                activities.push({\n                    id: match.id,\n                    type: \"matching\",\n                    description: `새로운 매칭이 생성되었습니다: ${match.user1_id} ↔ ${match.user2_id}`,\n                    timestamp: match.created_at,\n                    user: `${match.user1_id}, ${match.user2_id}`\n                });\n            });\n            // 최근 포인트 거래\n            const recentPoints = points.sort((a, b)=>new Date(b.created_at).getTime() - new Date(a.created_at).getTime()).slice(0, 3);\n            recentPoints.forEach((point)=>{\n                activities.push({\n                    id: point.id,\n                    type: \"point_transaction\",\n                    description: `포인트 거래: ${point.amount > 0 ? \"+\" : \"\"}${point.amount}P (${point.type})`,\n                    timestamp: point.created_at,\n                    user: point.user_id\n                });\n            });\n            // 모든 활동을 시간순으로 정렬하고 최근 limit개만 반환\n            return activities.sort((a, b)=>new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime()).slice(0, limit);\n        } catch (error) {\n            console.error(\"최근 활동 조회 오류:\", error);\n            throw error;\n        }\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (DataService);\n// Scores 테이블 연동 함수\nasync function saveUserScore(userId, score, scorer, summary = \"\") {\n    const now = new Date().toISOString();\n    const item = {\n        user_id: userId,\n        created_at: now,\n        scorer,\n        summary,\n        ...score,\n        updated_at: now\n    };\n    await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.PutCommand({\n        TableName: \"Scores\",\n        Item: item\n    }));\n    // Users 테이블에 has_score: true 업데이트\n    await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.UpdateCommand({\n        TableName: \"Users\",\n        Key: {\n            user_id: userId\n        },\n        UpdateExpression: \"SET has_score = :true, updated_at = :updatedAt\",\n        ExpressionAttributeValues: {\n            \":true\": true,\n            \":updatedAt\": now\n        }\n    }));\n    // UserStatusHistory에 점수 입력 내역 기록 (faceScore, scorer, summary)\n    await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.PutCommand({\n        TableName: \"UserStatusHistory\",\n        Item: {\n            user_id: userId,\n            timestamp: now,\n            type: \"score\",\n            faceScore: score.faceScore,\n            scorer,\n            summary,\n            created_at: now,\n            updated_at: now\n        }\n    }));\n    return item;\n}\nasync function getUserScoreHistory(userId) {\n    const params = {\n        TableName: \"Scores\",\n        KeyConditionExpression: \"user_id = :uid\",\n        ExpressionAttributeValues: {\n            \":uid\": userId\n        },\n        ScanIndexForward: false\n    };\n    const result = await dynamodb.send(new _aws_sdk_lib_dynamodb__WEBPACK_IMPORTED_MODULE_1__.QueryCommand(params));\n    return result.Items || [];\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QzlELE1BQU1uRCxTQUFTVyxJQUFJLENBQUMsSUFBSWQsNkRBQVVBLENBQUM7UUFDakNTLFdBQVc7UUFDWGEsTUFBTTtZQUNKSyxTQUFTRjtZQUNUa0MsV0FBV0w7WUFDWDJDLE1BQU07WUFDTm1CLFdBQVdMLE1BQU1LLFNBQVM7WUFDMUJKO1lBQ0FDO1lBQ0F6QyxZQUFZbEI7WUFDWjZELFlBQVk3RDtRQUNkO0lBQ0Y7SUFDQSxPQUFPNEQ7QUFDVDtBQUVPLGVBQWVHLG9CQUFvQjVGLE1BQWM7SUFDdEQsTUFBTWpCLFNBQVM7UUFDYkMsV0FBVztRQUNYRSx3QkFBd0I7UUFDeEJDLDJCQUEyQjtZQUFFLFFBQVFhO1FBQU87UUFDNUN1QixrQkFBa0I7SUFDcEI7SUFDQSxNQUFNbkMsU0FBUyxNQUFNVixTQUFTVyxJQUFJLENBQUMsSUFBSWxCLCtEQUFZQSxDQUFDWTtJQUNwRCxPQUFPSyxPQUFPRSxLQUFLLElBQUksRUFBRTtBQUMzQiIsInNvdXJjZXMiOlsid2VicGFjazovL2RhdGUtc2Vuc2UtYWRtaW4vLi9zcmMvbGliL2RhdGFTZXJ2aWNlLnRzP2RkM2YiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRHluYW1vREJDbGllbnQgfSBmcm9tICdAYXdzLXNkay9jbGllbnQtZHluYW1vZGInO1xyXG5pbXBvcnQgeyBEeW5hbW9EQkRvY3VtZW50Q2xpZW50LCBRdWVyeUNvbW1hbmQsIEdldENvbW1hbmQsIFNjYW5Db21tYW5kLCBVcGRhdGVDb21tYW5kLCBQdXRDb21tYW5kIH0gZnJvbSAnQGF3cy1zZGsvbGliLWR5bmFtb2RiJztcclxuaW1wb3J0IEFXU19DT05GSUcgZnJvbSAnLi4vY29uZmlnL2F3cyc7XHJcbmltcG9ydCB7XHJcbiAgTWFuYWdlcixcclxuICBVc2VyLFxyXG4gIE1hdGNoaW5nUmVxdWVzdCxcclxuICBQcm9wb3NhbCxcclxuICBNYXRjaFBhaXIsXHJcbiAgTWF0Y2hpbmdIaXN0b3J5LFxyXG4gIFBvaW50SGlzdG9yeSxcclxuICBVc2VyU3RhdHVzSGlzdG9yeSxcclxuICBSZXZpZXcsXHJcbiAgTWFuYWdlckxvZyxcclxuICBEYXNoYm9hcmRTdGF0cyxcclxuICBSZXZpZXdTdGF0cyxcclxufSBmcm9tICcuLi90eXBlcyc7XHJcbmltcG9ydCB7IFNjb3JlSW5wdXQsIFNjb3JlUmVzdWx0IH0gZnJvbSAnLi4vdHlwZXMvc2NvcmUnO1xyXG5cclxuLy8gQVdTIOyEpOyglVxyXG5jb25zdCBjbGllbnQgPSBuZXcgRHluYW1vREJDbGllbnQoQVdTX0NPTkZJRyk7XHJcbmNvbnN0IGR5bmFtb2RiID0gRHluYW1vREJEb2N1bWVudENsaWVudC5mcm9tKGNsaWVudCk7XHJcblxyXG4vLyBEeW5hbW9EQiDtgbTrnbzsnbTslrjtirjrpbwgZXhwb3J07ZWY7JesIOuLpOuluCDrqqjrk4jsl5DshJwg7IKs7Jqp7ZWgIOyImCDsnojrj4TroZ0g7ZWoXHJcbmV4cG9ydCB7IGR5bmFtb2RiIH07XHJcblxyXG5jbGFzcyBEYXRhU2VydmljZSB7XHJcbiAgLy8g66ek64uI7KCAIOqzhOyglSDqtIDroKgg66mU7ISc65OcXHJcbiAgYXN5bmMgZ2V0TWFuYWdlckJ5RW1haWwoZW1haWw6IHN0cmluZyk6IFByb21pc2U8TWFuYWdlciB8IG51bGw+IHtcclxuICAgIGNvbnN0IHBhcmFtcyA9IHtcclxuICAgICAgVGFibGVOYW1lOiAnTWFuYWdlcnMnLFxyXG4gICAgICBJbmRleE5hbWU6ICdFbWFpbEluZGV4JyxcclxuICAgICAgS2V5Q29uZGl0aW9uRXhwcmVzc2lvbjogJ2VtYWlsID0gOmVtYWlsJyxcclxuICAgICAgRXhwcmVzc2lvbkF0dHJpYnV0ZVZhbHVlczoge1xyXG4gICAgICAgICc6ZW1haWwnOiBlbWFpbFxyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkeW5hbW9kYi5zZW5kKG5ldyBRdWVyeUNvbW1hbmQocGFyYW1zKSk7XHJcbiAgICAgIHJldHVybiByZXN1bHQuSXRlbXM/LlswXSBhcyBNYW5hZ2VyIHx8IG51bGw7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCfrp6Tri4jsoIAg6rOE7KCVIOyhsO2ajCDsmKTrpZg6JywgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGdldE1hbmFnZXJCeUlkKG1hbmFnZXJJZDogc3RyaW5nKTogUHJvbWlzZTxNYW5hZ2VyIHwgbnVsbD4ge1xyXG4gICAgY29uc3QgcGFyYW1zID0ge1xyXG4gICAgICBUYWJsZU5hbWU6ICdNYW5hZ2VycycsXHJcbiAgICAgIEtleTogeyBpZDogbWFuYWdlcklkIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGR5bmFtb2RiLnNlbmQobmV3IEdldENvbW1hbmQocGFyYW1zKSk7XHJcbiAgICAgIHJldHVybiByZXN1bHQuSXRlbSBhcyBNYW5hZ2VyIHx8IG51bGw7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCfrp6Tri4jsoIAg6rOE7KCVIOyhsO2ajCDsmKTrpZg6JywgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIOydvOuwmCDsgqzsmqnsnpAg6rSA66CoIOuplOyEnOuTnCAo6riw7KG0IFVzZXJzIO2FjOydtOu4lCDsgqzsmqkpXHJcbiAgYXN5bmMgZ2V0VXNlcnMoKTogUHJvbWlzZTxVc2VyW10+IHtcclxuICAgIGNvbnN0IHBhcmFtcyA9IHtcclxuICAgICAgVGFibGVOYW1lOiAnVXNlcnMnXHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkeW5hbW9kYi5zZW5kKG5ldyBTY2FuQ29tbWFuZChwYXJhbXMpKTtcclxuICAgICAgcmV0dXJuIHJlc3VsdC5JdGVtcyBhcyBVc2VyW10gfHwgW107XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCfsgqzsmqnsnpAg7KGw7ZqMIOyYpOulmDonLCBlcnJvcik7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0VXNlckJ5SWQodXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPFVzZXIgfCBudWxsPiB7XHJcbiAgICBjb25zb2xlLmxvZygnRGF0YVNlcnZpY2UuZ2V0VXNlckJ5SWQg7Zi47Lac65CoLCB1c2VySWQ6JywgdXNlcklkKTtcclxuICAgIFxyXG4gICAgY29uc3QgcGFyYW1zID0ge1xyXG4gICAgICBUYWJsZU5hbWU6ICdVc2VycycsXHJcbiAgICAgIEtleTogeyB1c2VyX2lkOiB1c2VySWQgfVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgY29uc29sZS5sb2coJ0R5bmFtb0RCIO2MjOudvOuvuO2EsDonLCBwYXJhbXMpO1xyXG4gICAgXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkeW5hbW9kYi5zZW5kKG5ldyBHZXRDb21tYW5kKHBhcmFtcykpO1xyXG4gICAgICBjb25zb2xlLmxvZygnRHluYW1vREIg7J2R64u1OicsIHJlc3VsdCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfsobDtmozrkJwg7IKs7Jqp7J6QOicsIHJlc3VsdC5JdGVtKTtcclxuICAgICAgcmV0dXJuIHJlc3VsdC5JdGVtIGFzIFVzZXIgfHwgbnVsbDtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+yCrOyaqeyekCDsobDtmowg7Jik66WYOicsIGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRQcm9maWxlKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxhbnkgfCBudWxsPiB7XHJcbiAgICBjb25zb2xlLmxvZygnRGF0YVNlcnZpY2UuZ2V0UHJvZmlsZSDtmLjstpzrkKgsIHVzZXJJZDonLCB1c2VySWQpO1xyXG4gICAgXHJcbiAgICBjb25zdCBwYXJhbXMgPSB7XHJcbiAgICAgIFRhYmxlTmFtZTogJ1Byb2ZpbGVzJyxcclxuICAgICAgS2V5OiB7IHVzZXJfaWQ6IHVzZXJJZCB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZygn7ZSE66Gc7ZWEIOyhsO2ajCDtjIzrnbzrr7jthLA6JywgcGFyYW1zKTtcclxuICAgIFxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZHluYW1vZGIuc2VuZChuZXcgR2V0Q29tbWFuZChwYXJhbXMpKTtcclxuICAgICAgY29uc29sZS5sb2coJ+2UhOuhnO2VhCDsobDtmowg6rKw6rO8OicsIHJlc3VsdC5JdGVtKTtcclxuICAgICAgcmV0dXJuIHJlc3VsdC5JdGVtIHx8IG51bGw7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCftlITroZztlYQg7KGw7ZqMIOyYpOulmDonLCBlcnJvcik7XHJcbiAgICAgIC8vIO2UhOuhnO2VhOydtCDsl4bslrTrj4Qg7Jik66WY66GcIOyymOumrO2VmOyngCDslYrsnYxcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRQcmVmZXJlbmNlcyh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8YW55IHwgbnVsbD4ge1xyXG4gICAgY29uc29sZS5sb2coJ0RhdGFTZXJ2aWNlLmdldFByZWZlcmVuY2VzIO2YuOy2nOuQqCwgdXNlcklkOicsIHVzZXJJZCk7XHJcbiAgICBcclxuICAgIGNvbnN0IHBhcmFtcyA9IHtcclxuICAgICAgVGFibGVOYW1lOiAnUHJlZmVyZW5jZXMnLFxyXG4gICAgICBLZXk6IHsgdXNlcl9pZDogdXNlcklkIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgIGNvbnNvbGUubG9nKCfshKDtmLjrj4Qg7KGw7ZqMIO2MjOudvOuvuO2EsDonLCBwYXJhbXMpO1xyXG4gICAgXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkeW5hbW9kYi5zZW5kKG5ldyBHZXRDb21tYW5kKHBhcmFtcykpO1xyXG4gICAgICBjb25zb2xlLmxvZygn7ISg7Zi464+EIOyhsO2ajCDqsrDqs7w6JywgcmVzdWx0Lkl0ZW0pO1xyXG4gICAgICByZXR1cm4gcmVzdWx0Lkl0ZW0gfHwgbnVsbDtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+yEoO2YuOuPhCDsobDtmowg7Jik66WYOicsIGVycm9yKTtcclxuICAgICAgLy8g7ISg7Zi464+E6rCAIOyXhuyWtOuPhCDsmKTrpZjroZwg7LKY66as7ZWY7KeAIOyViuydjFxyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIHVwZGF0ZVVzZXJTdGF0dXModXNlcklkOiBzdHJpbmcsIHN0YXR1czogc3RyaW5nLCByZWFzb24/OiBzdHJpbmcpOiBQcm9taXNlPFVzZXIgfCBudWxsPiB7XHJcbiAgICBjb25zdCBwYXJhbXM6IGFueSA9IHtcclxuICAgICAgVGFibGVOYW1lOiAnVXNlcnMnLFxyXG4gICAgICBLZXk6IHsgdXNlcl9pZDogdXNlcklkIH0sXHJcbiAgICAgIFVwZGF0ZUV4cHJlc3Npb246ICdTRVQgI3N0YXR1cyA9IDpzdGF0dXMsIHVwZGF0ZWRfYXQgPSA6dXBkYXRlZEF0JyxcclxuICAgICAgRXhwcmVzc2lvbkF0dHJpYnV0ZU5hbWVzOiB7XHJcbiAgICAgICAgJyNzdGF0dXMnOiAnc3RhdHVzJ1xyXG4gICAgICB9LFxyXG4gICAgICBFeHByZXNzaW9uQXR0cmlidXRlVmFsdWVzOiB7XHJcbiAgICAgICAgJzpzdGF0dXMnOiBzdGF0dXMsXHJcbiAgICAgICAgJzp1cGRhdGVkQXQnOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgfSxcclxuICAgICAgUmV0dXJuVmFsdWVzOiAnQUxMX05FVycgYXMgY29uc3RcclxuICAgIH07XHJcblxyXG4gICAgaWYgKHJlYXNvbikge1xyXG4gICAgICBwYXJhbXMuVXBkYXRlRXhwcmVzc2lvbiArPSAnLCBkZWxldGVfcmVhc29uID0gOnJlYXNvbic7XHJcbiAgICAgIHBhcmFtcy5FeHByZXNzaW9uQXR0cmlidXRlVmFsdWVzWyc6cmVhc29uJ10gPSByZWFzb247XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGR5bmFtb2RiLnNlbmQobmV3IFVwZGF0ZUNvbW1hbmQocGFyYW1zKSk7XHJcbiAgICAgIHJldHVybiByZXN1bHQuQXR0cmlidXRlcyBhcyBVc2VyIHx8IG51bGw7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCfsgqzsmqnsnpAg7IOB7YOcIOyXheuNsOydtO2KuCDsmKTrpZg6JywgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIHVwZGF0ZVVzZXJHcmFkZSh1c2VySWQ6IHN0cmluZywgZ3JhZGU6IHN0cmluZyk6IFByb21pc2U8VXNlciB8IG51bGw+IHtcclxuICAgIGNvbnN0IHBhcmFtcyA9IHtcclxuICAgICAgVGFibGVOYW1lOiAnVXNlcnMnLFxyXG4gICAgICBLZXk6IHsgdXNlcl9pZDogdXNlcklkIH0sXHJcbiAgICAgIFVwZGF0ZUV4cHJlc3Npb246ICdTRVQgZ3JhZGUgPSA6Z3JhZGUsIHVwZGF0ZWRfYXQgPSA6dXBkYXRlZEF0JyxcclxuICAgICAgRXhwcmVzc2lvbkF0dHJpYnV0ZVZhbHVlczoge1xyXG4gICAgICAgICc6Z3JhZGUnOiBncmFkZSxcclxuICAgICAgICAnOnVwZGF0ZWRBdCc6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICB9LFxyXG4gICAgICBSZXR1cm5WYWx1ZXM6ICdBTExfTkVXJyBhcyBjb25zdFxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZHluYW1vZGIuc2VuZChuZXcgVXBkYXRlQ29tbWFuZChwYXJhbXMpKTtcclxuICAgICAgcmV0dXJuIHJlc3VsdC5BdHRyaWJ1dGVzIGFzIFVzZXIgfHwgbnVsbDtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+yCrOyaqeyekCDrk7HquIkg7JeF642w7J207Yq4IOyYpOulmDonLCBlcnJvcik7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8g66ek7LmtIOq0gOugqCDrqZTshJzrk5xcclxuICBhc3luYyBnZXRNYXRjaGluZ1JlcXVlc3RzKHN0YXR1cz86IHN0cmluZyk6IFByb21pc2U8TWF0Y2hpbmdSZXF1ZXN0W10+IHtcclxuICAgIGNvbnN0IHBhcmFtczogYW55ID0ge1xyXG4gICAgICBUYWJsZU5hbWU6ICdNYXRjaGluZ1JlcXVlc3RzJ1xyXG4gICAgfTtcclxuXHJcbiAgICBpZiAoc3RhdHVzKSB7XHJcbiAgICAgIHBhcmFtcy5GaWx0ZXJFeHByZXNzaW9uID0gJyNzdGF0dXMgPSA6c3RhdHVzJztcclxuICAgICAgcGFyYW1zLkV4cHJlc3Npb25BdHRyaWJ1dGVOYW1lcyA9IHtcclxuICAgICAgICAnI3N0YXR1cyc6ICdzdGF0dXMnXHJcbiAgICAgIH07XHJcbiAgICAgIHBhcmFtcy5FeHByZXNzaW9uQXR0cmlidXRlVmFsdWVzID0ge1xyXG4gICAgICAgICc6c3RhdHVzJzogc3RhdHVzXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGR5bmFtb2RiLnNlbmQobmV3IFNjYW5Db21tYW5kKHBhcmFtcykpO1xyXG4gICAgICByZXR1cm4gcmVzdWx0Lkl0ZW1zIGFzIE1hdGNoaW5nUmVxdWVzdFtdIHx8IFtdO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcign66ek7LmtIOyalOyyrSDsobDtmowg7Jik66WYOicsIGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRQcm9wb3NhbHMoc3RhdHVzPzogc3RyaW5nKTogUHJvbWlzZTxQcm9wb3NhbFtdPiB7XHJcbiAgICBjb25zdCBwYXJhbXM6IGFueSA9IHtcclxuICAgICAgVGFibGVOYW1lOiAnUHJvcG9zYWxzJ1xyXG4gICAgfTtcclxuXHJcbiAgICBpZiAoc3RhdHVzKSB7XHJcbiAgICAgIHBhcmFtcy5GaWx0ZXJFeHByZXNzaW9uID0gJyNzdGF0dXMgPSA6c3RhdHVzJztcclxuICAgICAgcGFyYW1zLkV4cHJlc3Npb25BdHRyaWJ1dGVOYW1lcyA9IHtcclxuICAgICAgICAnI3N0YXR1cyc6ICdzdGF0dXMnXHJcbiAgICAgIH07XHJcbiAgICAgIHBhcmFtcy5FeHByZXNzaW9uQXR0cmlidXRlVmFsdWVzID0ge1xyXG4gICAgICAgICc6c3RhdHVzJzogc3RhdHVzXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGR5bmFtb2RiLnNlbmQobmV3IFNjYW5Db21tYW5kKHBhcmFtcykpO1xyXG4gICAgICByZXR1cm4gcmVzdWx0Lkl0ZW1zIGFzIFByb3Bvc2FsW10gfHwgW107XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCfsoJzslYgg7KGw7ZqMIOyYpOulmDonLCBlcnJvcik7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0TWF0Y2hQYWlycygpOiBQcm9taXNlPE1hdGNoUGFpcltdPiB7XHJcbiAgICBjb25zdCBwYXJhbXMgPSB7XHJcbiAgICAgIFRhYmxlTmFtZTogJ01hdGNoUGFpcnMnXHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkeW5hbW9kYi5zZW5kKG5ldyBTY2FuQ29tbWFuZChwYXJhbXMpKTtcclxuICAgICAgcmV0dXJuIHJlc3VsdC5JdGVtcyBhcyBNYXRjaFBhaXJbXSB8fCBbXTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+unpOy5rSDtjpjslrQg7KGw7ZqMIOyYpOulmDonLCBlcnJvcik7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0TWF0Y2hpbmdIaXN0b3J5KCk6IFByb21pc2U8TWF0Y2hpbmdIaXN0b3J5W10+IHtcclxuICAgIGNvbnN0IHBhcmFtcyA9IHtcclxuICAgICAgVGFibGVOYW1lOiAnTWF0Y2hpbmdIaXN0b3J5J1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZHluYW1vZGIuc2VuZChuZXcgU2NhbkNvbW1hbmQocGFyYW1zKSk7XHJcbiAgICAgIHJldHVybiByZXN1bHQuSXRlbXMgYXMgTWF0Y2hpbmdIaXN0b3J5W10gfHwgW107XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCfrp6Tsua0g7J2066ClIOyhsO2ajCDsmKTrpZg6JywgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGdldFJldmlld3MoKTogUHJvbWlzZTxSZXZpZXdbXT4ge1xyXG4gICAgY29uc3QgcGFyYW1zID0ge1xyXG4gICAgICBUYWJsZU5hbWU6ICdSZXZpZXdzJ1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZHluYW1vZGIuc2VuZChuZXcgU2NhbkNvbW1hbmQocGFyYW1zKSk7XHJcbiAgICAgIHJldHVybiByZXN1bHQuSXRlbXMgYXMgUmV2aWV3W10gfHwgW107XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCfrpqzrt7Ag7KGw7ZqMIOyYpOulmDonLCBlcnJvcik7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8g7Y+s7J247Yq4IOq0gOugqCDrqZTshJzrk5xcclxuICBhc3luYyBnZXRQb2ludEhpc3RvcnkodXNlcklkPzogc3RyaW5nKTogUHJvbWlzZTxQb2ludEhpc3RvcnlbXT4ge1xyXG4gICAgY29uc3QgcGFyYW1zOiBhbnkgPSB7XHJcbiAgICAgIFRhYmxlTmFtZTogJ1BvaW50SGlzdG9yeSdcclxuICAgIH07XHJcblxyXG4gICAgaWYgKHVzZXJJZCkge1xyXG4gICAgICBwYXJhbXMuS2V5Q29uZGl0aW9uRXhwcmVzc2lvbiA9ICd1c2VyX2lkID0gOnVzZXJJZCc7XHJcbiAgICAgIHBhcmFtcy5FeHByZXNzaW9uQXR0cmlidXRlVmFsdWVzID0ge1xyXG4gICAgICAgICc6dXNlcklkJzogdXNlcklkXHJcbiAgICAgIH07XHJcbiAgICAgIHBhcmFtcy5TY2FuSW5kZXhGb3J3YXJkID0gZmFsc2U7IC8vIOy1nOyLoOyInFxyXG4gICAgfVxyXG4gICAgXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSB1c2VySWQgXHJcbiAgICAgICAgPyBhd2FpdCBkeW5hbW9kYi5zZW5kKG5ldyBRdWVyeUNvbW1hbmQocGFyYW1zKSlcclxuICAgICAgICA6IGF3YWl0IGR5bmFtb2RiLnNlbmQobmV3IFNjYW5Db21tYW5kKHBhcmFtcykpO1xyXG4gICAgICByZXR1cm4gcmVzdWx0Lkl0ZW1zIGFzIFBvaW50SGlzdG9yeVtdIHx8IFtdO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcign7Y+s7J247Yq4IOuCtOyXrSDsobDtmowg7Jik66WYOicsIGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyDsgqzsmqnsnpAg7IOB7YOcIOydtOugpSDqtIDroKgg66mU7ISc65OcXHJcbiAgYXN5bmMgZ2V0VXNlclN0YXR1c0hpc3RvcnkodXNlcklkPzogc3RyaW5nKTogUHJvbWlzZTxVc2VyU3RhdHVzSGlzdG9yeVtdPiB7XHJcbiAgICBjb25zdCBwYXJhbXM6IGFueSA9IHtcclxuICAgICAgVGFibGVOYW1lOiAnVXNlclN0YXR1c0hpc3RvcnknXHJcbiAgICB9O1xyXG5cclxuICAgIGlmICh1c2VySWQpIHtcclxuICAgICAgcGFyYW1zLktleUNvbmRpdGlvbkV4cHJlc3Npb24gPSAndXNlcl9pZCA9IDp1c2VySWQnO1xyXG4gICAgICBwYXJhbXMuRXhwcmVzc2lvbkF0dHJpYnV0ZVZhbHVlcyA9IHtcclxuICAgICAgICAnOnVzZXJJZCc6IHVzZXJJZFxyXG4gICAgICB9O1xyXG4gICAgICBwYXJhbXMuU2NhbkluZGV4Rm9yd2FyZCA9IGZhbHNlOyAvLyDstZzsi6DsiJxcclxuICAgIH1cclxuICAgIFxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gdXNlcklkIFxyXG4gICAgICAgID8gYXdhaXQgZHluYW1vZGIuc2VuZChuZXcgUXVlcnlDb21tYW5kKHBhcmFtcykpXHJcbiAgICAgICAgOiBhd2FpdCBkeW5hbW9kYi5zZW5kKG5ldyBTY2FuQ29tbWFuZChwYXJhbXMpKTtcclxuICAgICAgcmV0dXJuIHJlc3VsdC5JdGVtcyBhcyBVc2VyU3RhdHVzSGlzdG9yeVtdIHx8IFtdO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcign7IKs7Jqp7J6QIOyDge2DnCDsnbTroKUg7KGw7ZqMIOyYpOulmDonLCBlcnJvcik7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8g66ek64uI7KCAIOuhnOq3uCDqtIDroKgg66mU7ISc65OcXHJcbiAgYXN5bmMgbG9nTWFuYWdlckFjdGlvbihtYW5hZ2VySWQ6IHN0cmluZywgYWN0aW9uVHlwZTogc3RyaW5nLCB0YXJnZXRJZDogc3RyaW5nLCBkZXRhaWxzOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGNvbnN0IHBhcmFtcyA9IHtcclxuICAgICAgVGFibGVOYW1lOiAnTWFuYWdlckxvZ3MnLFxyXG4gICAgICBJdGVtOiB7XHJcbiAgICAgICAgaWQ6IGAke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWAsXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgbWFuYWdlcklkOiBtYW5hZ2VySWQsXHJcbiAgICAgICAgYWN0aW9uOiBhY3Rpb25UeXBlLFxyXG4gICAgICAgIHRhcmdldElkOiB0YXJnZXRJZCxcclxuICAgICAgICBkZXRhaWxzOiBkZXRhaWxzXHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IGR5bmFtb2RiLnNlbmQobmV3IFB1dENvbW1hbmQocGFyYW1zKSk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfinIUg66ek64uI7KCAIOuhnOq3uCDsoIDsnqUg7JmE66OMOicsIHBhcmFtcy5JdGVtKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+unpOuLiOyggCDslaHshZgg66Gc6re4IOyggOyepSDsmKTrpZg6JywgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGdldE1hbmFnZXJMb2dzKGxpbWl0OiBudW1iZXIgPSA1MCwgbWFuYWdlcklkPzogc3RyaW5nLCBhY3Rpb24/OiBzdHJpbmcpOiBQcm9taXNlPE1hbmFnZXJMb2dbXT4ge1xyXG4gICAgY29uc3QgcGFyYW1zOiBhbnkgPSB7XHJcbiAgICAgIFRhYmxlTmFtZTogJ01hbmFnZXJMb2dzJyxcclxuICAgICAgTGltaXQ6IGxpbWl0XHJcbiAgICB9O1xyXG5cclxuICAgIGlmIChtYW5hZ2VySWQgfHwgYWN0aW9uKSB7XHJcbiAgICAgIHBhcmFtcy5GaWx0ZXJFeHByZXNzaW9uID0gW107XHJcbiAgICAgIHBhcmFtcy5FeHByZXNzaW9uQXR0cmlidXRlVmFsdWVzID0ge307XHJcbiAgICAgIFxyXG4gICAgICBpZiAobWFuYWdlcklkKSB7XHJcbiAgICAgICAgcGFyYW1zLkZpbHRlckV4cHJlc3Npb24ucHVzaCgnbWFuYWdlcklkID0gOm1hbmFnZXJJZCcpO1xyXG4gICAgICAgIHBhcmFtcy5FeHByZXNzaW9uQXR0cmlidXRlVmFsdWVzWyc6bWFuYWdlcklkJ10gPSBtYW5hZ2VySWQ7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGlmIChhY3Rpb24pIHtcclxuICAgICAgICBwYXJhbXMuRmlsdGVyRXhwcmVzc2lvbi5wdXNoKCdhY3Rpb24gPSA6YWN0aW9uJyk7XHJcbiAgICAgICAgcGFyYW1zLkV4cHJlc3Npb25BdHRyaWJ1dGVWYWx1ZXNbJzphY3Rpb24nXSA9IGFjdGlvbjtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgcGFyYW1zLkZpbHRlckV4cHJlc3Npb24gPSBwYXJhbXMuRmlsdGVyRXhwcmVzc2lvbi5qb2luKCcgQU5EICcpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkeW5hbW9kYi5zZW5kKG5ldyBTY2FuQ29tbWFuZChwYXJhbXMpKTtcclxuICAgICAgY29uc3QgbG9ncyA9IHJlc3VsdC5JdGVtcyBhcyBhbnlbXSB8fCBbXTtcclxuICAgICAgLy8g7Iuk7KCcIO2FjOydtOu4lCDsiqTtgqTrp4jsl5Ag66ee6rKMIOuzgO2ZmFxyXG4gICAgICBjb25zdCBjb252ZXJ0ZWRMb2dzOiBNYW5hZ2VyTG9nW10gPSBsb2dzLm1hcChsb2cgPT4gKHtcclxuICAgICAgICBpZDogbG9nLmlkLFxyXG4gICAgICAgIG1hbmFnZXJfaWQ6IGxvZy5tYW5hZ2VySWQsXHJcbiAgICAgICAgYWN0aW9uX3R5cGU6IGxvZy5hY3Rpb24sXHJcbiAgICAgICAgdGFyZ2V0X2lkOiBsb2cudGFyZ2V0SWQsXHJcbiAgICAgICAgZGV0YWlsczogbG9nLmRldGFpbHMsXHJcbiAgICAgICAgY3JlYXRlZF9hdDogbG9nLnRpbWVzdGFtcFxyXG4gICAgICB9KSk7XHJcbiAgICAgIHJldHVybiBjb252ZXJ0ZWRMb2dzLnNvcnQoKGEsIGIpID0+IG5ldyBEYXRlKGIuY3JlYXRlZF9hdCkuZ2V0VGltZSgpIC0gbmV3IERhdGUoYS5jcmVhdGVkX2F0KS5nZXRUaW1lKCkpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcign66ek64uI7KCAIOuhnOq3uCDsobDtmowg7Jik66WYOicsIGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyDsnKDti7jrpqzti7Ag66mU7ISc65OcXHJcbiAgZ2V0VGFyZ2V0VHlwZSh0YXJnZXRJZDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIGlmICh0YXJnZXRJZC5zdGFydHNXaXRoKCd1c2VyXycpKSByZXR1cm4gJ3VzZXInO1xyXG4gICAgaWYgKHRhcmdldElkLnN0YXJ0c1dpdGgoJ21hdGNoXycpKSByZXR1cm4gJ21hdGNoJztcclxuICAgIHJldHVybiAndW5rbm93bic7XHJcbiAgfVxyXG5cclxuICAvLyDrjIDsi5zrs7Trk5wg7Ya16rOEIOuplOyEnOuTnFxyXG4gIGFzeW5jIGdldERhc2hib2FyZFN0YXRzKCk6IFByb21pc2U8RGFzaGJvYXJkU3RhdHM+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IFt1c2VycywgbWF0Y2hlcywgcG9pbnRzXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgICAgICB0aGlzLmdldFVzZXJzKCksXHJcbiAgICAgICAgdGhpcy5nZXRNYXRjaGluZ0hpc3RvcnkoKSxcclxuICAgICAgICB0aGlzLmdldFBvaW50SGlzdG9yeSgpXHJcbiAgICAgIF0pO1xyXG5cclxuICAgICAgY29uc3QgdG90YWxVc2VycyA9IHVzZXJzLmxlbmd0aDtcclxuICAgICAgY29uc3QgYWN0aXZlVXNlcnMgPSB1c2Vycy5maWx0ZXIodXNlciA9PiB1c2VyLnN0YXR1cyA9PT0gJ2FjdGl2ZScgfHwgdXNlci5zdGF0dXMgPT09ICdncmVlbicpLmxlbmd0aDtcclxuICAgICAgY29uc3QgdG90YWxNYXRjaGVzID0gbWF0Y2hlcy5sZW5ndGg7XHJcbiAgICAgIGNvbnN0IHRvdGFsUG9pbnRzID0gcG9pbnRzLnJlZHVjZSgoc3VtLCBwb2ludCkgPT4gc3VtICsgcG9pbnQuYW1vdW50LCAwKTtcclxuICAgICAgY29uc3QgdG90YWxSZXZlbnVlID0gcG9pbnRzXHJcbiAgICAgICAgLmZpbHRlcihwb2ludCA9PiBwb2ludC50eXBlID09PSAnY2hhcmdlJyB8fCBwb2ludC5hbW91bnQgPiAwKVxyXG4gICAgICAgIC5yZWR1Y2UoKHN1bSwgcG9pbnQpID0+IHN1bSArIE1hdGguYWJzKHBvaW50LmFtb3VudCksIDApO1xyXG5cclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICB0b3RhbFVzZXJzLFxyXG4gICAgICAgIGFjdGl2ZVVzZXJzLFxyXG4gICAgICAgIHRvdGFsTWF0Y2hlcyxcclxuICAgICAgICB0b3RhbFBvaW50cyxcclxuICAgICAgICB0b3RhbFJldmVudWVcclxuICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+uMgOyLnOuztOuTnCDthrXqs4Qg7KGw7ZqMIOyYpOulmDonLCBlcnJvcik7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8g7LWc6re8IO2ZnOuPmSDrqZTshJzrk5xcclxuICBhc3luYyBnZXRSZWNlbnRBY3Rpdml0aWVzKGxpbWl0OiBudW1iZXIgPSAxMCk6IFByb21pc2U8YW55W10+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IFt1c2VycywgbWF0Y2hlcywgcG9pbnRzXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgICAgICB0aGlzLmdldFVzZXJzKCksXHJcbiAgICAgICAgdGhpcy5nZXRNYXRjaGluZ0hpc3RvcnkoKSxcclxuICAgICAgICB0aGlzLmdldFBvaW50SGlzdG9yeSgpXHJcbiAgICAgIF0pO1xyXG5cclxuICAgICAgY29uc3QgYWN0aXZpdGllczogYW55W10gPSBbXTtcclxuXHJcbiAgICAgIC8vIOy1nOq3vCDqsIDsnoXtlZwg7IKs7Jqp7J6Q65OkXHJcbiAgICAgIGNvbnN0IHJlY2VudFVzZXJzID0gdXNlcnNcclxuICAgICAgICAuc29ydCgoYSwgYikgPT4gbmV3IERhdGUoYi5jcmVhdGVkX2F0KS5nZXRUaW1lKCkgLSBuZXcgRGF0ZShhLmNyZWF0ZWRfYXQpLmdldFRpbWUoKSlcclxuICAgICAgICAuc2xpY2UoMCwgMyk7XHJcblxyXG4gICAgICByZWNlbnRVc2Vycy5mb3JFYWNoKHVzZXIgPT4ge1xyXG4gICAgICAgIGFjdGl2aXRpZXMucHVzaCh7XHJcbiAgICAgICAgICBpZDogdXNlci51c2VyX2lkLFxyXG4gICAgICAgICAgdHlwZTogJ3VzZXJfc2lnbnVwJyxcclxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBg7IOI66Gc7Jq0IOyCrOyaqeyekOqwgCDqsIDsnoXtlojsirXri4jri6Q6ICR7dXNlci5lbWFpbH1gLFxyXG4gICAgICAgICAgdGltZXN0YW1wOiB1c2VyLmNyZWF0ZWRfYXQsXHJcbiAgICAgICAgICB1c2VyOiB1c2VyLmVtYWlsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8g7LWc6re8IOunpOy5rSDtmZzrj5lcclxuICAgICAgY29uc3QgcmVjZW50TWF0Y2hlcyA9IG1hdGNoZXNcclxuICAgICAgICAuc29ydCgoYSwgYikgPT4gbmV3IERhdGUoYi5jcmVhdGVkX2F0KS5nZXRUaW1lKCkgLSBuZXcgRGF0ZShhLmNyZWF0ZWRfYXQpLmdldFRpbWUoKSlcclxuICAgICAgICAuc2xpY2UoMCwgMyk7XHJcblxyXG4gICAgICByZWNlbnRNYXRjaGVzLmZvckVhY2gobWF0Y2ggPT4ge1xyXG4gICAgICAgIGFjdGl2aXRpZXMucHVzaCh7XHJcbiAgICAgICAgICBpZDogbWF0Y2guaWQsXHJcbiAgICAgICAgICB0eXBlOiAnbWF0Y2hpbmcnLFxyXG4gICAgICAgICAgZGVzY3JpcHRpb246IGDsg4jroZzsmrQg66ek7Lmt7J20IOyDneyEseuQmOyXiOyKteuLiOuLpDogJHttYXRjaC51c2VyMV9pZH0g4oaUICR7bWF0Y2gudXNlcjJfaWR9YCxcclxuICAgICAgICAgIHRpbWVzdGFtcDogbWF0Y2guY3JlYXRlZF9hdCxcclxuICAgICAgICAgIHVzZXI6IGAke21hdGNoLnVzZXIxX2lkfSwgJHttYXRjaC51c2VyMl9pZH1gXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8g7LWc6re8IO2PrOyduO2KuCDqsbDrnphcclxuICAgICAgY29uc3QgcmVjZW50UG9pbnRzID0gcG9pbnRzXHJcbiAgICAgICAgLnNvcnQoKGEsIGIpID0+IG5ldyBEYXRlKGIuY3JlYXRlZF9hdCkuZ2V0VGltZSgpIC0gbmV3IERhdGUoYS5jcmVhdGVkX2F0KS5nZXRUaW1lKCkpXHJcbiAgICAgICAgLnNsaWNlKDAsIDMpO1xyXG5cclxuICAgICAgcmVjZW50UG9pbnRzLmZvckVhY2gocG9pbnQgPT4ge1xyXG4gICAgICAgIGFjdGl2aXRpZXMucHVzaCh7XHJcbiAgICAgICAgICBpZDogcG9pbnQuaWQsXHJcbiAgICAgICAgICB0eXBlOiAncG9pbnRfdHJhbnNhY3Rpb24nLFxyXG4gICAgICAgICAgZGVzY3JpcHRpb246IGDtj6zsnbjtirgg6rGw656YOiAke3BvaW50LmFtb3VudCA+IDAgPyAnKycgOiAnJ30ke3BvaW50LmFtb3VudH1QICgke3BvaW50LnR5cGV9KWAsXHJcbiAgICAgICAgICB0aW1lc3RhbXA6IHBvaW50LmNyZWF0ZWRfYXQsXHJcbiAgICAgICAgICB1c2VyOiBwb2ludC51c2VyX2lkXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8g66qo65OgIO2ZnOuPmeydhCDsi5zqsITsiJzsnLzroZwg7KCV66Cs7ZWY6rOgIOy1nOq3vCBsaW1pdOqwnOunjCDrsJjtmZhcclxuICAgICAgcmV0dXJuIGFjdGl2aXRpZXNcclxuICAgICAgICAuc29ydCgoYSwgYikgPT4gbmV3IERhdGUoYi50aW1lc3RhbXApLmdldFRpbWUoKSAtIG5ldyBEYXRlKGEudGltZXN0YW1wKS5nZXRUaW1lKCkpXHJcbiAgICAgICAgLnNsaWNlKDAsIGxpbWl0KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+y1nOq3vCDtmZzrj5kg7KGw7ZqMIOyYpOulmDonLCBlcnJvcik7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRGF0YVNlcnZpY2U7IFxyXG5cclxuLy8gU2NvcmVzIO2FjOydtOu4lCDsl7Drj5kg7ZWo7IiYXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYXZlVXNlclNjb3JlKHVzZXJJZDogc3RyaW5nLCBzY29yZTogYW55LCBzY29yZXI6IHN0cmluZywgc3VtbWFyeTogc3RyaW5nID0gJycpIHtcclxuICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XHJcbiAgY29uc3QgaXRlbSA9IHtcclxuICAgIHVzZXJfaWQ6IHVzZXJJZCxcclxuICAgIGNyZWF0ZWRfYXQ6IG5vdyxcclxuICAgIHNjb3JlcixcclxuICAgIHN1bW1hcnksXHJcbiAgICAuLi5zY29yZSxcclxuICAgIHVwZGF0ZWRfYXQ6IG5vdyxcclxuICB9O1xyXG4gIGF3YWl0IGR5bmFtb2RiLnNlbmQobmV3IFB1dENvbW1hbmQoeyBUYWJsZU5hbWU6ICdTY29yZXMnLCBJdGVtOiBpdGVtIH0pKTtcclxuICAvLyBVc2VycyDthYzsnbTruJTsl5AgaGFzX3Njb3JlOiB0cnVlIOyXheuNsOydtO2KuFxyXG4gIGF3YWl0IGR5bmFtb2RiLnNlbmQobmV3IFVwZGF0ZUNvbW1hbmQoe1xyXG4gICAgVGFibGVOYW1lOiAnVXNlcnMnLFxyXG4gICAgS2V5OiB7IHVzZXJfaWQ6IHVzZXJJZCB9LFxyXG4gICAgVXBkYXRlRXhwcmVzc2lvbjogJ1NFVCBoYXNfc2NvcmUgPSA6dHJ1ZSwgdXBkYXRlZF9hdCA9IDp1cGRhdGVkQXQnLFxyXG4gICAgRXhwcmVzc2lvbkF0dHJpYnV0ZVZhbHVlczogeyAnOnRydWUnOiB0cnVlLCAnOnVwZGF0ZWRBdCc6IG5vdyB9LFxyXG4gIH0pKTtcclxuICAvLyBVc2VyU3RhdHVzSGlzdG9yeeyXkCDsoJDsiJgg7J6F66ClIOuCtOyXrSDquLDroZ0gKGZhY2VTY29yZSwgc2NvcmVyLCBzdW1tYXJ5KVxyXG4gIGF3YWl0IGR5bmFtb2RiLnNlbmQobmV3IFB1dENvbW1hbmQoe1xyXG4gICAgVGFibGVOYW1lOiAnVXNlclN0YXR1c0hpc3RvcnknLFxyXG4gICAgSXRlbToge1xyXG4gICAgICB1c2VyX2lkOiB1c2VySWQsXHJcbiAgICAgIHRpbWVzdGFtcDogbm93LFxyXG4gICAgICB0eXBlOiAnc2NvcmUnLFxyXG4gICAgICBmYWNlU2NvcmU6IHNjb3JlLmZhY2VTY29yZSwgLy8g7J6F66Cl6rCS7J20IOyeiOycvOuptCDquLDroZ1cclxuICAgICAgc2NvcmVyLFxyXG4gICAgICBzdW1tYXJ5LFxyXG4gICAgICBjcmVhdGVkX2F0OiBub3csXHJcbiAgICAgIHVwZGF0ZWRfYXQ6IG5vdyxcclxuICAgIH1cclxuICB9KSk7XHJcbiAgcmV0dXJuIGl0ZW07XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyU2NvcmVIaXN0b3J5KHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxhbnlbXT4ge1xyXG4gIGNvbnN0IHBhcmFtcyA9IHtcclxuICAgIFRhYmxlTmFtZTogJ1Njb3JlcycsXHJcbiAgICBLZXlDb25kaXRpb25FeHByZXNzaW9uOiAndXNlcl9pZCA9IDp1aWQnLFxyXG4gICAgRXhwcmVzc2lvbkF0dHJpYnV0ZVZhbHVlczogeyAnOnVpZCc6IHVzZXJJZCB9LFxyXG4gICAgU2NhbkluZGV4Rm9yd2FyZDogZmFsc2UsIC8vIOy1nOyLoOyInCDsoJXroKxcclxuICB9O1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGR5bmFtb2RiLnNlbmQobmV3IFF1ZXJ5Q29tbWFuZChwYXJhbXMpKTtcclxuICByZXR1cm4gcmVzdWx0Lkl0ZW1zIHx8IFtdO1xyXG59ICJdLCJuYW1lcyI6WyJEeW5hbW9EQkNsaWVudCIsIkR5bmFtb0RCRG9jdW1lbnRDbGllbnQiLCJRdWVyeUNvbW1hbmQiLCJHZXRDb21tYW5kIiwiU2NhbkNvbW1hbmQiLCJVcGRhdGVDb21tYW5kIiwiUHV0Q29tbWFuZCIsIkFXU19DT05GSUciLCJjbGllbnQiLCJkeW5hbW9kYiIsImZyb20iLCJEYXRhU2VydmljZSIsImdldE1hbmFnZXJCeUVtYWlsIiwiZW1haWwiLCJwYXJhbXMiLCJUYWJsZU5hbWUiLCJJbmRleE5hbWUiLCJLZXlDb25kaXRpb25FeHByZXNzaW9uIiwiRXhwcmVzc2lvbkF0dHJpYnV0ZVZhbHVlcyIsInJlc3VsdCIsInNlbmQiLCJJdGVtcyIsImVycm9yIiwiY29uc29sZSIsImdldE1hbmFnZXJCeUlkIiwibWFuYWdlcklkIiwiS2V5IiwiaWQiLCJJdGVtIiwiZ2V0VXNlcnMiLCJnZXRVc2VyQnlJZCIsInVzZXJJZCIsImxvZyIsInVzZXJfaWQiLCJnZXRQcm9maWxlIiwiZ2V0UHJlZmVyZW5jZXMiLCJ1cGRhdGVVc2VyU3RhdHVzIiwic3RhdHVzIiwicmVhc29uIiwiVXBkYXRlRXhwcmVzc2lvbiIsIkV4cHJlc3Npb25BdHRyaWJ1dGVOYW1lcyIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsIlJldHVyblZhbHVlcyIsIkF0dHJpYnV0ZXMiLCJ1cGRhdGVVc2VyR3JhZGUiLCJncmFkZSIsImdldE1hdGNoaW5nUmVxdWVzdHMiLCJGaWx0ZXJFeHByZXNzaW9uIiwiZ2V0UHJvcG9zYWxzIiwiZ2V0TWF0Y2hQYWlycyIsImdldE1hdGNoaW5nSGlzdG9yeSIsImdldFJldmlld3MiLCJnZXRQb2ludEhpc3RvcnkiLCJTY2FuSW5kZXhGb3J3YXJkIiwiZ2V0VXNlclN0YXR1c0hpc3RvcnkiLCJsb2dNYW5hZ2VyQWN0aW9uIiwiYWN0aW9uVHlwZSIsInRhcmdldElkIiwiZGV0YWlscyIsIm5vdyIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0ciIsInRpbWVzdGFtcCIsImFjdGlvbiIsImdldE1hbmFnZXJMb2dzIiwibGltaXQiLCJMaW1pdCIsInB1c2giLCJqb2luIiwibG9ncyIsImNvbnZlcnRlZExvZ3MiLCJtYXAiLCJtYW5hZ2VyX2lkIiwiYWN0aW9uX3R5cGUiLCJ0YXJnZXRfaWQiLCJjcmVhdGVkX2F0Iiwic29ydCIsImEiLCJiIiwiZ2V0VGltZSIsImdldFRhcmdldFR5cGUiLCJzdGFydHNXaXRoIiwiZ2V0RGFzaGJvYXJkU3RhdHMiLCJ1c2VycyIsIm1hdGNoZXMiLCJwb2ludHMiLCJQcm9taXNlIiwiYWxsIiwidG90YWxVc2VycyIsImxlbmd0aCIsImFjdGl2ZVVzZXJzIiwiZmlsdGVyIiwidXNlciIsInRvdGFsTWF0Y2hlcyIsInRvdGFsUG9pbnRzIiwicmVkdWNlIiwic3VtIiwicG9pbnQiLCJhbW91bnQiLCJ0b3RhbFJldmVudWUiLCJ0eXBlIiwiYWJzIiwiZ2V0UmVjZW50QWN0aXZpdGllcyIsImFjdGl2aXRpZXMiLCJyZWNlbnRVc2VycyIsInNsaWNlIiwiZm9yRWFjaCIsImRlc2NyaXB0aW9uIiwicmVjZW50TWF0Y2hlcyIsIm1hdGNoIiwidXNlcjFfaWQiLCJ1c2VyMl9pZCIsInJlY2VudFBvaW50cyIsInNhdmVVc2VyU2NvcmUiLCJzY29yZSIsInNjb3JlciIsInN1bW1hcnkiLCJpdGVtIiwidXBkYXRlZF9hdCIsImZhY2VTY29yZSIsImdldFVzZXJTY29yZUhpc3RvcnkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/lib/dataService.ts\n");

/***/ }),

/***/ "(api)/./src/pages/api/dashboard/chart-data.ts":
/*!***********************************************!*\
  !*** ./src/pages/api/dashboard/chart-data.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_dataService__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../lib/dataService */ \"(api)/./src/lib/dataService.ts\");\n\nconst dataService = new _lib_dataService__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\nasync function handler(req, res) {\n    if (req.method !== \"GET\") {\n        return res.status(405).json({\n            message: \"Method not allowed\"\n        });\n    }\n    try {\n        const { period } = req.query;\n        // 임시로 토큰 검증 우회 (개발 중)\n        // if (process.env.NODE_ENV === 'production') {\n        //   const token = req.headers.authorization?.replace('Bearer ', '');\n        //   if (!token) {\n        //     return res.status(401).json({ message: 'Unauthorized' });\n        //   }\n        // }\n        console.log(\"차트 데이터 조회 시작\");\n        let chartData = [];\n        if (period === \"7d\") {\n            // 주간 데이터 - DataService를 사용하여 가져오기\n            const weekData = await getWeeklyData();\n            chartData = weekData;\n        } else if (period === \"30d\") {\n            // 월간 데이터 - DataService를 사용하여 가져오기\n            const monthData = await getMonthlyData();\n            chartData = monthData;\n        } else {\n            // 기본값은 주간 데이터\n            const weekData = await getWeeklyData();\n            chartData = weekData;\n        }\n        console.log(\"Chart data generated:\", chartData);\n        res.status(200).json(chartData);\n    } catch (error) {\n        console.error(\"Chart data error:\", error);\n        res.status(500).json({\n            message: \"차트 데이터 생성 중 오류가 발생했습니다.\",\n            error: error instanceof Error ? error.message : \"Unknown error\"\n        });\n    }\n}\nasync function getWeeklyData() {\n    const days = [\n        \"월\",\n        \"화\",\n        \"수\",\n        \"목\",\n        \"금\",\n        \"토\",\n        \"일\"\n    ];\n    const chartData = [];\n    for(let i = 6; i >= 0; i--){\n        const date = new Date();\n        date.setDate(date.getDate() - i);\n        const dayName = days[date.getDay() === 0 ? 6 : date.getDay() - 1];\n        // 해당 날짜의 시작과 끝\n        const startOfDay = new Date(date);\n        startOfDay.setHours(0, 0, 0, 0);\n        const endOfDay = new Date(date);\n        endOfDay.setHours(23, 59, 59, 999);\n        // 사용자 가입수\n        const usersCount = await getUsersCount(startOfDay, endOfDay);\n        // 매칭 요청수\n        const matchRequestsCount = await getMatchRequestsCount(startOfDay, endOfDay);\n        // 매칭 성사수\n        const matchesCount = await getMatchesCount(startOfDay, endOfDay);\n        chartData.push({\n            name: dayName,\n            가입수: usersCount,\n            매칭요청수: matchRequestsCount,\n            매칭수: matchesCount\n        });\n    }\n    return chartData;\n}\nasync function getMonthlyData() {\n    const weeks = [\n        \"1주차\",\n        \"2주차\",\n        \"3주차\",\n        \"4주차\"\n    ];\n    const chartData = [];\n    for(let i = 3; i >= 0; i--){\n        const date = new Date();\n        date.setDate(date.getDate() - i * 7);\n        const weekName = weeks[3 - i];\n        // 해당 주의 시작과 끝\n        const startOfWeek = new Date(date);\n        startOfWeek.setDate(startOfWeek.getDate() - startOfWeek.getDay());\n        startOfWeek.setHours(0, 0, 0, 0);\n        const endOfWeek = new Date(startOfWeek);\n        endOfWeek.setDate(endOfWeek.getDate() + 6);\n        endOfWeek.setHours(23, 59, 59, 999);\n        // 사용자 가입수\n        const usersCount = await getUsersCount(startOfWeek, endOfWeek);\n        // 매칭 요청수\n        const matchRequestsCount = await getMatchRequestsCount(startOfWeek, endOfWeek);\n        // 매칭 성사수\n        const matchesCount = await getMatchesCount(startOfWeek, endOfWeek);\n        chartData.push({\n            name: weekName,\n            가입수: usersCount,\n            매칭요청수: matchRequestsCount,\n            매칭수: matchesCount\n        });\n    }\n    return chartData;\n}\nasync function getUsersCount(startDate, endDate) {\n    try {\n        const users = await dataService.getUsers();\n        const filteredUsers = users.filter((user)=>{\n            const userDate = new Date(user.created_at);\n            return userDate >= startDate && userDate <= endDate;\n        });\n        console.log(`Users count for ${startDate.toDateString()}: ${filteredUsers.length}`);\n        return filteredUsers.length;\n    } catch (error) {\n        console.error(\"Error getting users count:\", error);\n        return 0;\n    }\n}\nasync function getMatchRequestsCount(startDate, endDate) {\n    try {\n        const matchRequests = await dataService.getMatchingRequests();\n        const filteredRequests = matchRequests.filter((request)=>{\n            const requestDate = new Date(request.created_at);\n            return requestDate >= startDate && requestDate <= endDate;\n        });\n        console.log(`Match requests count for ${startDate.toDateString()}: ${filteredRequests.length}`);\n        return filteredRequests.length;\n    } catch (error) {\n        console.error(\"Error getting match requests count:\", error);\n        return 0;\n    }\n}\nasync function getMatchesCount(startDate, endDate) {\n    try {\n        const matches = await dataService.getMatchPairs();\n        const filteredMatches = matches.filter((match)=>{\n            const matchDate = new Date(match.created_at);\n            return matchDate >= startDate && matchDate <= endDate;\n        });\n        console.log(`Matches count for ${startDate.toDateString()}: ${filteredMatches.length}`);\n        return filteredMatches.length;\n    } catch (error) {\n        console.error(\"Error getting matches count:\", error);\n        return 0;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL2Rhc2hib2FyZC9jaGFydC1kYXRhLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQ21EO0FBRW5ELE1BQU1DLGNBQWMsSUFBSUQsd0RBQVdBO0FBRXBCLGVBQWVFLFFBQVFDLEdBQW1CLEVBQUVDLEdBQW9CO0lBQzdFLElBQUlELElBQUlFLE1BQU0sS0FBSyxPQUFPO1FBQ3hCLE9BQU9ELElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsU0FBUztRQUFxQjtJQUM5RDtJQUVBLElBQUk7UUFDRixNQUFNLEVBQUVDLE1BQU0sRUFBRSxHQUFHTixJQUFJTyxLQUFLO1FBRTVCLHNCQUFzQjtRQUN0QiwrQ0FBK0M7UUFDL0MscUVBQXFFO1FBQ3JFLGtCQUFrQjtRQUNsQixnRUFBZ0U7UUFDaEUsTUFBTTtRQUNOLElBQUk7UUFFSkMsUUFBUUMsR0FBRyxDQUFDO1FBRVosSUFBSUMsWUFBWSxFQUFFO1FBRWxCLElBQUlKLFdBQVcsTUFBTTtZQUNuQixrQ0FBa0M7WUFDbEMsTUFBTUssV0FBVyxNQUFNQztZQUN2QkYsWUFBWUM7UUFDZCxPQUFPLElBQUlMLFdBQVcsT0FBTztZQUMzQixrQ0FBa0M7WUFDbEMsTUFBTU8sWUFBWSxNQUFNQztZQUN4QkosWUFBWUc7UUFDZCxPQUFPO1lBQ0wsY0FBYztZQUNkLE1BQU1GLFdBQVcsTUFBTUM7WUFDdkJGLFlBQVlDO1FBQ2Q7UUFFQUgsUUFBUUMsR0FBRyxDQUFDLHlCQUF5QkM7UUFDckNULElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUNNO0lBQ3ZCLEVBQUUsT0FBT0ssT0FBTztRQUNkUCxRQUFRTyxLQUFLLENBQUMscUJBQXFCQTtRQUNuQ2QsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUNuQkMsU0FBUztZQUNUVSxPQUFPQSxpQkFBaUJDLFFBQVFELE1BQU1WLE9BQU8sR0FBRztRQUNsRDtJQUNGO0FBQ0Y7QUFFQSxlQUFlTztJQUNiLE1BQU1LLE9B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QUFNVSxnQkFBZ0IsTUFBTXhELFlBQVl5RCxtQkFBbUI7UUFDM0QsTUFBTUMsbUJBQW1CRixjQUFjTixNQUFNLENBQUNTLENBQUFBO1lBQzVDLE1BQU1DLGNBQWMsSUFBSXRDLEtBQUtxQyxRQUFRTixVQUFVO1lBQy9DLE9BQU9PLGVBQWVmLGFBQWFlLGVBQWVkO1FBQ3BEO1FBQ0FwQyxRQUFRQyxHQUFHLENBQUMsQ0FBQyx5QkFBeUIsRUFBRWtDLFVBQVVTLFlBQVksR0FBRyxFQUFFLEVBQUVJLGlCQUFpQkgsTUFBTSxDQUFDLENBQUM7UUFDOUYsT0FBT0csaUJBQWlCSCxNQUFNO0lBQ2hDLEVBQUUsT0FBT3RDLE9BQU87UUFDZFAsUUFBUU8sS0FBSyxDQUFDLHVDQUF1Q0E7UUFDckQsT0FBTztJQUNUO0FBQ0Y7QUFFQSxlQUFla0IsZ0JBQWdCVSxTQUFlLEVBQUVDLE9BQWE7SUFDM0QsSUFBSTtRQUNGLE1BQU1lLFVBQVUsTUFBTTdELFlBQVk4RCxhQUFhO1FBQy9DLE1BQU1DLGtCQUFrQkYsUUFBUVgsTUFBTSxDQUFDYyxDQUFBQTtZQUNyQyxNQUFNQyxZQUFZLElBQUkzQyxLQUFLMEMsTUFBTVgsVUFBVTtZQUMzQyxPQUFPWSxhQUFhcEIsYUFBYW9CLGFBQWFuQjtRQUNoRDtRQUNBcEMsUUFBUUMsR0FBRyxDQUFDLENBQUMsa0JBQWtCLEVBQUVrQyxVQUFVUyxZQUFZLEdBQUcsRUFBRSxFQUFFUyxnQkFBZ0JSLE1BQU0sQ0FBQyxDQUFDO1FBQ3RGLE9BQU9RLGdCQUFnQlIsTUFBTTtJQUMvQixFQUFFLE9BQU90QyxPQUFPO1FBQ2RQLFFBQVFPLEtBQUssQ0FBQyxnQ0FBZ0NBO1FBQzlDLE9BQU87SUFDVDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGF0ZS1zZW5zZS1hZG1pbi8uL3NyYy9wYWdlcy9hcGkvZGFzaGJvYXJkL2NoYXJ0LWRhdGEudHM/ZWRhOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XHJcbmltcG9ydCBEYXRhU2VydmljZSBmcm9tICcuLi8uLi8uLi9saWIvZGF0YVNlcnZpY2UnO1xyXG5cclxuY29uc3QgZGF0YVNlcnZpY2UgPSBuZXcgRGF0YVNlcnZpY2UoKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpIHtcclxuICBpZiAocmVxLm1ldGhvZCAhPT0gJ0dFVCcpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IG1lc3NhZ2U6ICdNZXRob2Qgbm90IGFsbG93ZWQnIH0pO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgcGVyaW9kIH0gPSByZXEucXVlcnk7XHJcbiAgICBcclxuICAgIC8vIOyehOyLnOuhnCDthqDtgbAg6rKA7KadIOyasO2ajCAo6rCc67CcIOykkSlcclxuICAgIC8vIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAvLyAgIGNvbnN0IHRva2VuID0gcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbj8ucmVwbGFjZSgnQmVhcmVyICcsICcnKTtcclxuICAgIC8vICAgaWYgKCF0b2tlbikge1xyXG4gICAgLy8gICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xyXG4gICAgLy8gICB9XHJcbiAgICAvLyB9XHJcblxyXG4gICAgY29uc29sZS5sb2coJ+ywqO2KuCDrjbDsnbTthLAg7KGw7ZqMIOyLnOyekScpO1xyXG5cclxuICAgIGxldCBjaGFydERhdGEgPSBbXTtcclxuXHJcbiAgICBpZiAocGVyaW9kID09PSAnN2QnKSB7XHJcbiAgICAgIC8vIOyjvOqwhCDrjbDsnbTthLAgLSBEYXRhU2VydmljZeulvCDsgqzsmqntlZjsl6wg6rCA7KC47Jik6riwXHJcbiAgICAgIGNvbnN0IHdlZWtEYXRhID0gYXdhaXQgZ2V0V2Vla2x5RGF0YSgpO1xyXG4gICAgICBjaGFydERhdGEgPSB3ZWVrRGF0YTtcclxuICAgIH0gZWxzZSBpZiAocGVyaW9kID09PSAnMzBkJykge1xyXG4gICAgICAvLyDsm5TqsIQg642w7J207YSwIC0gRGF0YVNlcnZpY2Xrpbwg7IKs7Jqp7ZWY7JesIOqwgOyguOyYpOq4sFxyXG4gICAgICBjb25zdCBtb250aERhdGEgPSBhd2FpdCBnZXRNb250aGx5RGF0YSgpO1xyXG4gICAgICBjaGFydERhdGEgPSBtb250aERhdGE7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyDquLDrs7jqsJLsnYAg7KO86rCEIOuNsOydtO2EsFxyXG4gICAgICBjb25zdCB3ZWVrRGF0YSA9IGF3YWl0IGdldFdlZWtseURhdGEoKTtcclxuICAgICAgY2hhcnREYXRhID0gd2Vla0RhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coJ0NoYXJ0IGRhdGEgZ2VuZXJhdGVkOicsIGNoYXJ0RGF0YSk7XHJcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbihjaGFydERhdGEpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdDaGFydCBkYXRhIGVycm9yOicsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgXHJcbiAgICAgIG1lc3NhZ2U6ICfssKjtirgg642w7J207YSwIOyDneyEsSDspJEg7Jik66WY6rCAIOuwnOyDne2WiOyKteuLiOuLpC4nLFxyXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZ2V0V2Vla2x5RGF0YSgpIHtcclxuICBjb25zdCBkYXlzID0gWyfsm5QnLCAn7ZmUJywgJ+yImCcsICfrqqknLCAn6riIJywgJ+2GoCcsICfsnbwnXTtcclxuICBjb25zdCBjaGFydERhdGEgPSBbXTtcclxuXHJcbiAgZm9yIChsZXQgaSA9IDY7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoKTtcclxuICAgIGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSAtIGkpO1xyXG4gICAgY29uc3QgZGF5TmFtZSA9IGRheXNbZGF0ZS5nZXREYXkoKSA9PT0gMCA/IDYgOiBkYXRlLmdldERheSgpIC0gMV07XHJcbiAgICBcclxuICAgIC8vIO2VtOuLuSDrgqDsp5zsnZgg7Iuc7J6R6rO8IOuBnVxyXG4gICAgY29uc3Qgc3RhcnRPZkRheSA9IG5ldyBEYXRlKGRhdGUpO1xyXG4gICAgc3RhcnRPZkRheS5zZXRIb3VycygwLCAwLCAwLCAwKTtcclxuICAgIGNvbnN0IGVuZE9mRGF5ID0gbmV3IERhdGUoZGF0ZSk7XHJcbiAgICBlbmRPZkRheS5zZXRIb3VycygyMywgNTksIDU5LCA5OTkpO1xyXG5cclxuICAgIC8vIOyCrOyaqeyekCDqsIDsnoXsiJhcclxuICAgIGNvbnN0IHVzZXJzQ291bnQgPSBhd2FpdCBnZXRVc2Vyc0NvdW50KHN0YXJ0T2ZEYXksIGVuZE9mRGF5KTtcclxuICAgIFxyXG4gICAgLy8g66ek7LmtIOyalOyyreyImFxyXG4gICAgY29uc3QgbWF0Y2hSZXF1ZXN0c0NvdW50ID0gYXdhaXQgZ2V0TWF0Y2hSZXF1ZXN0c0NvdW50KHN0YXJ0T2ZEYXksIGVuZE9mRGF5KTtcclxuICAgIFxyXG4gICAgLy8g66ek7LmtIOyEseyCrOyImFxyXG4gICAgY29uc3QgbWF0Y2hlc0NvdW50ID0gYXdhaXQgZ2V0TWF0Y2hlc0NvdW50KHN0YXJ0T2ZEYXksIGVuZE9mRGF5KTtcclxuXHJcbiAgICBjaGFydERhdGEucHVzaCh7XHJcbiAgICAgIG5hbWU6IGRheU5hbWUsXHJcbiAgICAgIOqwgOyeheyImDogdXNlcnNDb3VudCxcclxuICAgICAg66ek7Lmt7JqU7LKt7IiYOiBtYXRjaFJlcXVlc3RzQ291bnQsXHJcbiAgICAgIOunpOy5reyImDogbWF0Y2hlc0NvdW50XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHJldHVybiBjaGFydERhdGE7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGdldE1vbnRobHlEYXRhKCkge1xyXG4gIGNvbnN0IHdlZWtzID0gWycx7KO87LCoJywgJzLso7zssKgnLCAnM+yjvOywqCcsICc07KO87LCoJ107XHJcbiAgY29uc3QgY2hhcnREYXRhID0gW107XHJcblxyXG4gIGZvciAobGV0IGkgPSAzOyBpID49IDA7IGktLSkge1xyXG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgLSAoaSAqIDcpKTtcclxuICAgIGNvbnN0IHdlZWtOYW1lID0gd2Vla3NbMyAtIGldO1xyXG4gICAgXHJcbiAgICAvLyDtlbTri7kg7KO87J2YIOyLnOyekeqzvCDrgZ1cclxuICAgIGNvbnN0IHN0YXJ0T2ZXZWVrID0gbmV3IERhdGUoZGF0ZSk7XHJcbiAgICBzdGFydE9mV2Vlay5zZXREYXRlKHN0YXJ0T2ZXZWVrLmdldERhdGUoKSAtIHN0YXJ0T2ZXZWVrLmdldERheSgpKTtcclxuICAgIHN0YXJ0T2ZXZWVrLnNldEhvdXJzKDAsIDAsIDAsIDApO1xyXG4gICAgY29uc3QgZW5kT2ZXZWVrID0gbmV3IERhdGUoc3RhcnRPZldlZWspO1xyXG4gICAgZW5kT2ZXZWVrLnNldERhdGUoZW5kT2ZXZWVrLmdldERhdGUoKSArIDYpO1xyXG4gICAgZW5kT2ZXZWVrLnNldEhvdXJzKDIzLCA1OSwgNTksIDk5OSk7XHJcblxyXG4gICAgLy8g7IKs7Jqp7J6QIOqwgOyeheyImFxyXG4gICAgY29uc3QgdXNlcnNDb3VudCA9IGF3YWl0IGdldFVzZXJzQ291bnQoc3RhcnRPZldlZWssIGVuZE9mV2Vlayk7XHJcbiAgICBcclxuICAgIC8vIOunpOy5rSDsmpTssq3siJhcclxuICAgIGNvbnN0IG1hdGNoUmVxdWVzdHNDb3VudCA9IGF3YWl0IGdldE1hdGNoUmVxdWVzdHNDb3VudChzdGFydE9mV2VlaywgZW5kT2ZXZWVrKTtcclxuICAgIFxyXG4gICAgLy8g66ek7LmtIOyEseyCrOyImFxyXG4gICAgY29uc3QgbWF0Y2hlc0NvdW50ID0gYXdhaXQgZ2V0TWF0Y2hlc0NvdW50KHN0YXJ0T2ZXZWVrLCBlbmRPZldlZWspO1xyXG5cclxuICAgIGNoYXJ0RGF0YS5wdXNoKHtcclxuICAgICAgbmFtZTogd2Vla05hbWUsXHJcbiAgICAgIOqwgOyeheyImDogdXNlcnNDb3VudCxcclxuICAgICAg66ek7Lmt7JqU7LKt7IiYOiBtYXRjaFJlcXVlc3RzQ291bnQsXHJcbiAgICAgIOunpOy5reyImDogbWF0Y2hlc0NvdW50XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHJldHVybiBjaGFydERhdGE7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGdldFVzZXJzQ291bnQoc3RhcnREYXRlOiBEYXRlLCBlbmREYXRlOiBEYXRlKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVzZXJzID0gYXdhaXQgZGF0YVNlcnZpY2UuZ2V0VXNlcnMoKTtcclxuICAgIGNvbnN0IGZpbHRlcmVkVXNlcnMgPSB1c2Vycy5maWx0ZXIodXNlciA9PiB7XHJcbiAgICAgIGNvbnN0IHVzZXJEYXRlID0gbmV3IERhdGUodXNlci5jcmVhdGVkX2F0KTtcclxuICAgICAgcmV0dXJuIHVzZXJEYXRlID49IHN0YXJ0RGF0ZSAmJiB1c2VyRGF0ZSA8PSBlbmREYXRlO1xyXG4gICAgfSk7XHJcbiAgICBjb25zb2xlLmxvZyhgVXNlcnMgY291bnQgZm9yICR7c3RhcnREYXRlLnRvRGF0ZVN0cmluZygpfTogJHtmaWx0ZXJlZFVzZXJzLmxlbmd0aH1gKTtcclxuICAgIHJldHVybiBmaWx0ZXJlZFVzZXJzLmxlbmd0aDtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyB1c2VycyBjb3VudDonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gMDtcclxuICB9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGdldE1hdGNoUmVxdWVzdHNDb3VudChzdGFydERhdGU6IERhdGUsIGVuZERhdGU6IERhdGUpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgbWF0Y2hSZXF1ZXN0cyA9IGF3YWl0IGRhdGFTZXJ2aWNlLmdldE1hdGNoaW5nUmVxdWVzdHMoKTtcclxuICAgIGNvbnN0IGZpbHRlcmVkUmVxdWVzdHMgPSBtYXRjaFJlcXVlc3RzLmZpbHRlcihyZXF1ZXN0ID0+IHtcclxuICAgICAgY29uc3QgcmVxdWVzdERhdGUgPSBuZXcgRGF0ZShyZXF1ZXN0LmNyZWF0ZWRfYXQpO1xyXG4gICAgICByZXR1cm4gcmVxdWVzdERhdGUgPj0gc3RhcnREYXRlICYmIHJlcXVlc3REYXRlIDw9IGVuZERhdGU7XHJcbiAgICB9KTtcclxuICAgIGNvbnNvbGUubG9nKGBNYXRjaCByZXF1ZXN0cyBjb3VudCBmb3IgJHtzdGFydERhdGUudG9EYXRlU3RyaW5nKCl9OiAke2ZpbHRlcmVkUmVxdWVzdHMubGVuZ3RofWApO1xyXG4gICAgcmV0dXJuIGZpbHRlcmVkUmVxdWVzdHMubGVuZ3RoO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIG1hdGNoIHJlcXVlc3RzIGNvdW50OicsIGVycm9yKTtcclxuICAgIHJldHVybiAwO1xyXG4gIH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZ2V0TWF0Y2hlc0NvdW50KHN0YXJ0RGF0ZTogRGF0ZSwgZW5kRGF0ZTogRGF0ZSkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBtYXRjaGVzID0gYXdhaXQgZGF0YVNlcnZpY2UuZ2V0TWF0Y2hQYWlycygpO1xyXG4gICAgY29uc3QgZmlsdGVyZWRNYXRjaGVzID0gbWF0Y2hlcy5maWx0ZXIobWF0Y2ggPT4ge1xyXG4gICAgICBjb25zdCBtYXRjaERhdGUgPSBuZXcgRGF0ZShtYXRjaC5jcmVhdGVkX2F0KTtcclxuICAgICAgcmV0dXJuIG1hdGNoRGF0ZSA+PSBzdGFydERhdGUgJiYgbWF0Y2hEYXRlIDw9IGVuZERhdGU7XHJcbiAgICB9KTtcclxuICAgIGNvbnNvbGUubG9nKGBNYXRjaGVzIGNvdW50IGZvciAke3N0YXJ0RGF0ZS50b0RhdGVTdHJpbmcoKX06ICR7ZmlsdGVyZWRNYXRjaGVzLmxlbmd0aH1gKTtcclxuICAgIHJldHVybiBmaWx0ZXJlZE1hdGNoZXMubGVuZ3RoO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIG1hdGNoZXMgY291bnQ6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIDA7XHJcbiAgfVxyXG59ICJdLCJuYW1lcyI6WyJEYXRhU2VydmljZSIsImRhdGFTZXJ2aWNlIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwicGVyaW9kIiwicXVlcnkiLCJjb25zb2xlIiwibG9nIiwiY2hhcnREYXRhIiwid2Vla0RhdGEiLCJnZXRXZWVrbHlEYXRhIiwibW9udGhEYXRhIiwiZ2V0TW9udGhseURhdGEiLCJlcnJvciIsIkVycm9yIiwiZGF5cyIsImkiLCJkYXRlIiwiRGF0ZSIsInNldERhdGUiLCJnZXREYXRlIiwiZGF5TmFtZSIsImdldERheSIsInN0YXJ0T2ZEYXkiLCJzZXRIb3VycyIsImVuZE9mRGF5IiwidXNlcnNDb3VudCIsImdldFVzZXJzQ291bnQiLCJtYXRjaFJlcXVlc3RzQ291bnQiLCJnZXRNYXRjaFJlcXVlc3RzQ291bnQiLCJtYXRjaGVzQ291bnQiLCJnZXRNYXRjaGVzQ291bnQiLCJwdXNoIiwibmFtZSIsIuqwgOyeheyImCIsIuunpOy5reyalOyyreyImCIsIuunpOy5reyImCIsIndlZWtzIiwid2Vla05hbWUiLCJzdGFydE9mV2VlayIsImVuZE9mV2VlayIsInN0YXJ0RGF0ZSIsImVuZERhdGUiLCJ1c2VycyIsImdldFVzZXJzIiwiZmlsdGVyZWRVc2VycyIsImZpbHRlciIsInVzZXIiLCJ1c2VyRGF0ZSIsImNyZWF0ZWRfYXQiLCJ0b0RhdGVTdHJpbmciLCJsZW5ndGgiLCJtYXRjaFJlcXVlc3RzIiwiZ2V0TWF0Y2hpbmdSZXF1ZXN0cyIsImZpbHRlcmVkUmVxdWVzdHMiLCJyZXF1ZXN0IiwicmVxdWVzdERhdGUiLCJtYXRjaGVzIiwiZ2V0TWF0Y2hQYWlycyIsImZpbHRlcmVkTWF0Y2hlcyIsIm1hdGNoIiwibWF0Y2hEYXRlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/dashboard/chart-data.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fdashboard%2Fchart-data&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cdashboard%5Cchart-data.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();